import{r as F,m as A,K as P,j as e,L as U}from"./app-DVX7GaSC.js";import{A as W}from"./app-layout-CNbu6e02.js";import{C as Y,a as R,b as q,c as K}from"./card-BaextrJi.js";import{T as z,b as J,c as k,d as x,e as Q,f as j}from"./table-Bmj30Wrv.js";import{A as C,a as D,b as S}from"./index-DQU2slDv.js";import{B as g}from"./button-D5ogiF7w.js";import{D as I,e as L,a as E,b as B,c as O,d as $,f as G,g as V}from"./dialog-D_IBfY_Y.js";import{I as t}from"./index-Cp8WyjPi.js";import{L as i}from"./label-xi9BGqyF.js";import{S as w,a as M,b as T,c as _,d as o}from"./select-CnzGuDpU.js";import{f as N}from"./format-CBpsKyOP.js";import{T as X}from"./textarea-yYvnZFaM.js";import"./index-CmsLp1Ls.js";import"./index-CHN2oHWX.js";function Z({pdl:s}){const[l,a]=F.useState(s.birthdate?new Date(s.birthdate):void 0),{data:c,setData:m,put:y,processing:p,errors:v}=A({fname:s.fname,lname:s.lname,alias:s.alias??"",birthdate:s.birthdate,age:(s.age??"").toString(),gender:s.gender??"",ethnic_group:s.ethnic_group??"",civil_status:s.civil_status??"",brgy:s.brgy??"",city:s.city??"",province:s.province??""}),{props:u}=P(),f=u.success;F.useEffect(()=>{if(l){const r=N(l,"yyyy-MM-dd"),n=new Date().getFullYear()-l.getFullYear();m("birthdate",r),m("age",n.toString())}},[l]);const d=r=>{const n=r.target.name;m(n,r.target.value)},h=r=>{r.preventDefault(),y(route("pdl-management.update",s.id),{preserveScroll:!0})};return e.jsxs(I,{children:[e.jsx(L,{asChild:!0,children:e.jsx(g,{variant:"outline",children:"Edit"})}),e.jsxs(E,{className:"sm:max-w-2xl",children:[e.jsxs(B,{children:[e.jsx(O,{children:"Edit Personal Information"}),e.jsx($,{children:"Update the details for this personal information record."})]}),e.jsxs("form",{onSubmit:h,className:"mx-auto w-full space-y-4",children:[Object.keys(v).length>0&&e.jsxs(C,{variant:"destructive",className:"mt-4 mb-4",children:[e.jsx(D,{children:"Unable to update record"}),e.jsx(S,{children:e.jsx("ul",{className:"list-inside list-disc text-sm",children:Object.values(v).map((r,n)=>e.jsx("li",{children:r},n))})})]}),f&&e.jsxs(C,{variant:"default",className:"mb-4",children:[e.jsx(D,{children:"Success"}),e.jsx(S,{children:f})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"fname",children:"First Name"}),e.jsx(t,{id:"fname",name:"fname",value:c.fname,onChange:d})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"lname",children:"Last Name"}),e.jsx(t,{id:"lname",name:"lname",value:c.lname,onChange:d})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"alias",children:"Alias"}),e.jsx(t,{id:"alias",name:"alias",value:c.alias,onChange:d})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Date of Birth"}),e.jsx(t,{type:"date",value:l?N(l,"yyyy-MM-dd"):"",onChange:r=>a(r.target.value?new Date(r.target.value):void 0),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Gender"}),e.jsxs(w,{value:c.gender,onValueChange:r=>m("gender",r),children:[e.jsx(M,{children:e.jsx(T,{placeholder:"Select gender"})}),e.jsxs(_,{children:[e.jsx(o,{value:"Male",children:"Male"}),e.jsx(o,{value:"Female",children:"Female"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"ethnic_group",children:"Ethnic Group"}),e.jsx(t,{id:"ethnic_group",name:"ethnic_group",value:c.ethnic_group,onChange:d})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Civil Status"}),e.jsxs(w,{value:c.civil_status,onValueChange:r=>m("civil_status",r),children:[e.jsx(M,{children:e.jsx(T,{placeholder:"Select status"})}),e.jsxs(_,{children:[e.jsx(o,{value:"Single",children:"Single"}),e.jsx(o,{value:"Married",children:"Married"}),e.jsx(o,{value:"Widowed",children:"Widowed"}),e.jsx(o,{value:"Divorced",children:"Divorced"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"brgy",children:"Barangay"}),e.jsx(t,{id:"brgy",name:"brgy",value:c.brgy,onChange:d})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"city",children:"City"}),e.jsx(t,{id:"city",name:"city",value:c.city,onChange:d})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"province",children:"Province"}),e.jsx(t,{id:"province",name:"province",value:c.province,onChange:d})]})]}),e.jsxs(G,{children:[e.jsx(g,{type:"submit",disabled:p,children:"Update"}),e.jsx(V,{asChild:!0,children:e.jsx(g,{variant:"outline",type:"button",children:"Cancel"})})]})]})]})]})}function ee(){const{data:s,setData:l,post:a,processing:c,errors:m,reset:y}=A({fname:"",lname:"",alias:"",birthdate:"",age:"",gender:"",ethnic_group:"",civil_status:"",brgy:"",city:"",province:""}),{props:p}=P(),v=p.success,[u,f]=F.useState(void 0),d=n=>{f(n)},h=n=>{const b=n.target.name;l(b,n.target.value)},r=n=>{n.preventDefault();const b=u?N(u,"yyyy-MM-dd"):"",H=u?new Date().getFullYear()-u.getFullYear():"";l("birthdate",b),l("age",H.toString()),a(route("pdl-management.create"),{preserveScroll:!0,onSuccess:()=>y()})};return e.jsxs(I,{children:[e.jsx(L,{asChild:!0,children:e.jsx(g,{variant:"outline",children:"Create Personal Information"})}),e.jsxs(E,{className:"sm:max-w-2xl",children:[e.jsxs(B,{children:[e.jsx(O,{children:"Create Personal Information"}),e.jsx($,{children:"Fill in the details to create a new personal information record."})]}),e.jsxs("form",{onSubmit:r,className:"mx-auto w-full space-y-4",children:[Object.keys(m).length>0&&e.jsxs(C,{variant:"destructive",className:"mt-4 mb-4",children:[e.jsx(D,{children:"Unable to process request"}),e.jsx(S,{children:e.jsx("ul",{className:"list-inside list-disc text-sm",children:Object.values(m).map((n,b)=>e.jsx("li",{children:n},b))})})]}),v&&e.jsxs(C,{variant:"default",className:"mb-4",children:[e.jsx(D,{children:"Success"}),e.jsx(S,{children:v})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"fname",children:"First Name"}),e.jsx(t,{id:"fname",name:"fname",value:s.fname,onChange:h})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"lname",children:"Last Name"}),e.jsx(t,{id:"lname",name:"lname",value:s.lname,onChange:h})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"alias",children:"Alias"}),e.jsx(t,{id:"alias",name:"alias",value:s.alias,onChange:h})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Date of Birth"}),e.jsx(t,{type:"date",value:u?N(u,"yyyy-MM-dd"):"",onChange:n=>d(n.target.value?new Date(n.target.value):void 0),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Gender"}),e.jsxs(w,{value:s.gender,onValueChange:n=>l("gender",n),children:[e.jsx(M,{children:e.jsx(T,{placeholder:"Select gender"})}),e.jsxs(_,{children:[e.jsx(o,{value:"Male",children:"Male"}),e.jsx(o,{value:"Female",children:"Female"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"ethnic_group",children:"Ethnic Group"}),e.jsx(t,{id:"ethnic_group",name:"ethnic_group",value:s.ethnic_group,onChange:h})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Civil Status"}),e.jsxs(w,{value:s.civil_status,onValueChange:n=>l("civil_status",n),children:[e.jsx(M,{children:e.jsx(T,{placeholder:"Select status"})}),e.jsxs(_,{children:[e.jsx(o,{value:"Single",children:"Single"}),e.jsx(o,{value:"Married",children:"Married"}),e.jsx(o,{value:"Widowed",children:"Widowed"}),e.jsx(o,{value:"Divorced",children:"Divorced"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"brgy",children:"Barangay"}),e.jsx(t,{id:"brgy",name:"brgy",value:s.brgy,onChange:h})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"city",children:"City"}),e.jsx(t,{id:"city",name:"city",value:s.city,onChange:h})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"province",children:"Province"}),e.jsx(t,{id:"province",name:"province",value:s.province,onChange:h})]})]}),e.jsxs(G,{children:[e.jsx(g,{type:"submit",disabled:c,children:"Create"}),e.jsx(V,{asChild:!0,children:e.jsx(g,{variant:"outline",type:"button",children:"Cancel"})})]})]})]})]})}function se({pdl:s}){const[l,a]=F.useState(!1),{data:c,setData:m,post:y,processing:p,errors:v,reset:u}=A({reason:"",pdl_id:s.id}),{props:f}=P(),d=f.success,h=()=>{y(route("pdl-management.transfer",s.id),{preserveScroll:!0,onSuccess:()=>{u(),setTimeout(()=>a(!1),2e3)}})};return e.jsxs(I,{open:l,onOpenChange:a,children:[e.jsx(L,{asChild:!0,children:e.jsx(g,{variant:"default",className:"bg-blue-600 hover:bg-blue-700",children:"Transfer PDL"})}),e.jsxs(E,{className:"sm:max-w-md",children:[e.jsxs(B,{children:[e.jsx(O,{children:"Confirm PDL Transfer"}),e.jsxs($,{children:["Transfer ",s.full_name," to another facility"]})]}),e.jsxs("div",{className:"space-y-4 py-2",children:[d&&e.jsxs(C,{variant:"success",className:"mb-4",children:[e.jsx(D,{children:"Success"}),e.jsx(S,{children:d})]}),Object.keys(v).length>0&&e.jsx("div",{className:"rounded-md bg-red-100 p-3 text-red-700",children:e.jsx("ul",{className:"list-disc pl-5",children:Object.values(v).map((r,n)=>e.jsx("li",{children:r},n))})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"reason",children:"Transfer Reason *"}),e.jsx(X,{id:"reason",value:c.reason,onChange:r=>m("reason",r.target.value),placeholder:"Explain the reason for transfer...",rows:3,required:!0})]}),e.jsx("div",{className:"mt-2 rounded bg-yellow-50 p-4",children:e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsx("span",{className:"font-bold",children:"Final Confirmation:"})," This action will immediately initiate the transfer process. Are you sure you want to transfer this PDL?"]})})]}),e.jsxs(G,{children:[e.jsx(g,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(g,{type:"button",onClick:h,disabled:p||!c.reason.trim(),className:"bg-red-600 hover:bg-red-700 disabled:opacity-50",children:p?"Processing...":"Confirm Transfer"})]})]})]})}const ae=[{title:"PDL Management",href:"/pdl-management"}];function ve(){const{props:s}=P(),{pdls:l}=s;return e.jsxs(W,{breadcrumbs:ae,children:[e.jsx(U,{title:"Personal Information"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Personal Information"}),e.jsxs(Y,{children:[e.jsx(R,{children:e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Personal Information List"}),e.jsx(ee,{})]})})}),e.jsx(K,{children:e.jsxs(z,{children:[e.jsx(J,{children:e.jsxs(k,{children:[e.jsx(x,{children:"ID"}),e.jsx(x,{children:"Full Name"}),e.jsx(x,{children:"Alias"}),e.jsx(x,{children:"Gender"}),e.jsx(x,{children:"Ethnic Group"}),e.jsx(x,{children:"Civil Status"}),e.jsx(x,{children:"Date of Birth"}),e.jsx(x,{children:"Age"}),e.jsx(x,{children:"Address"}),e.jsx(x,{children:"Added By"}),e.jsx(x,{children:"Actions"})]})}),e.jsx(Q,{children:l.map(a=>e.jsxs(k,{children:[e.jsx(j,{children:a.id}),e.jsx(j,{children:`${a.fname} ${a.lname}`}),e.jsx(j,{children:a.alias??"-"}),e.jsx(j,{children:a.gender??"-"}),e.jsx(j,{children:a.ethnic_group??"-"}),e.jsx(j,{children:a.civil_status??"-"}),e.jsx(j,{children:N(new Date(a.birthdate),"MMMM dd, yyyy")}),e.jsx(j,{children:a.age}),e.jsx(j,{children:`${a.brgy??""}, ${a.city??""}, ${a.province??""}`}),e.jsx(j,{children:a.personnel?`${a.personnel.fname} ${a.personnel.lname}`:"—"}),e.jsxs(j,{className:"space-x-1",children:[e.jsx(Z,{pdl:a}),e.jsx(se,{pdl:a})]})]},a.id))})]})})]})]})]})}export{ve as default};
