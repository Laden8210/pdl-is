import{r as l,m as T,j as e,L as C,$ as F,S as k}from"./app-Cw2Ola3T.js";import{A as n,a as c,b as L}from"./alert-CFenGozM.js";import{c as A,B as u}from"./button-HtDwNjna.js";import{C as P,I as S}from"./input-C-67zMx9.js";import{L as E}from"./label-Cw4YEQsI.js";import{C as V}from"./circle-alert-DjBpCXZi.js";import{L as D}from"./loader-circle-xQ7Wq_Td.js";import{A as I}from"./arrow-left-BTDqadLz.js";import"./index-DeIeTENR.js";import"./index-BsnjEC5y.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],$=A("Smartphone",R);function W({personnel_id:d,phone_number:f,message:m}){const[a,x]=l.useState(600),[g,p]=l.useState(!1),{data:b,setData:j,post:N,processing:i,errors:s,clearErrors:h}=T({otp_code:"",personnel_id:d});l.useEffect(()=>{if(a>0){const t=setTimeout(()=>x(a-1),1e3);return()=>clearTimeout(t)}else p(!0)},[a]);const v=t=>{const r=Math.floor(t/60),o=t%60;return`${r}:${o<10?"0":""}${o}`},_=t=>{t.preventDefault(),N(route("verify.otp"))},y=()=>{k.post(route("resend.otp"),{personnel_id:d},{onSuccess:()=>{x(600),p(!1),h()}})},w=t=>{const r=t.target.value.replace(/\D/g,"").slice(0,6);j("otp_code",r),s.otp_code&&h("otp_code")},O=b.otp_code.length===6;return e.jsxs(e.Fragment,{children:[e.jsxs(C,{title:"OTP Verification",children:[e.jsx("link",{rel:"preconnect",href:"https://fonts.bunny.net"}),e.jsx("link",{href:"https://fonts.bunny.net/css?family=instrument-sans:400,500,600",rel:"stylesheet"}),e.jsx("meta",{name:"description",content:"Verify your OTP code for password reset."})]}),e.jsxs("div",{className:"flex min-h-screen flex-col items-center bg-gradient-to-br from-[#FDFDFC] via-[#FAFAFA] to-[#F5F5F4] p-6 text-[#1b1b18] lg:justify-center lg:p-8",children:[e.jsx("div",{className:"flex w-full items-center justify-center opacity-100 transition-opacity duration-750 lg:grow starting:opacity-0",children:e.jsx("main",{className:"flex w-full max-w-[335px] flex-col-reverse lg:max-w-2xl lg:flex-row",children:e.jsxs("div",{className:"flex-1 rounded-br-lg rounded-bl-lg bg-white/80 p-6 pb-12 text-[13px] leading-[20px] shadow-[inset_0px_0px_0px_1px_rgba(26,26,0,0.12),0_4px_12px_rgba(0,0,0,0.05)] backdrop-blur-sm transition-all duration-300 hover:shadow-[inset_0px_0px_0px_1px_rgba(26,26,0,0.16),0_8px_24px_rgba(0,0,0,0.08)] lg:rounded-tl-lg lg:rounded-br-none lg:p-20",children:[e.jsxs("div",{className:"mb-8 flex flex-col items-center",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-6",children:[e.jsx("img",{src:"/PGO.jpg",alt:"Logo 1",className:"h-20 w-auto rounded-full p-1"}),e.jsx("img",{src:"/SCRDC.jpg",alt:"Logo 2",className:"h-20 w-auto rounded-full p-1"})]}),e.jsx("h1",{className:"mb-3 text-3xl font-semibold text-[#1b1b18] lg:text-4xl",children:"OTP Verification"}),e.jsxs("p",{className:"text-center text-base text-[#6b6b6b] lg:text-lg",children:["Enter the 6-digit OTP sent to your phone number ending with ",e.jsx("strong",{children:f})]})]}),m&&e.jsxs(n,{className:"mb-6 border-green-200 bg-green-50/80 backdrop-blur-sm",children:[e.jsx(P,{className:"h-4 w-4 text-green-600"}),e.jsx(c,{className:"font-medium text-green-800",children:m})]}),s.otp_code&&e.jsxs(n,{className:"mb-6 border-red-200 bg-red-50/80 backdrop-blur-sm",children:[e.jsx(V,{className:"h-4 w-4 text-red-600"}),e.jsx(c,{className:"font-medium text-red-800",children:s.otp_code})]}),Object.keys(s).filter(t=>t!=="otp_code").length>0&&e.jsxs(n,{variant:"destructive",className:"mb-4",children:[e.jsx(L,{children:"Unable to process request"}),e.jsx(c,{children:Object.entries(s).filter(([t])=>t!=="otp_code").map(([t,r],o)=>e.jsx("ul",{className:"list-inside list-disc text-sm",children:e.jsx("li",{children:r})},o))})]}),e.jsx("form",{className:"flex flex-col gap-6",onSubmit:_,noValidate:!0,children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx(E,{htmlFor:"otp_code",className:"text-sm font-medium text-[#1b1b18]",children:"OTP Code"}),e.jsxs("div",{className:"group relative",children:[e.jsx("div",{className:"absolute top-1/2 left-3 flex -translate-y-1/2 items-center text-[#6b6b6b] transition-colors group-focus-within:text-[#1b1b18]",children:e.jsx($,{className:"h-4 w-4"})}),e.jsx(S,{id:"otp_code",type:"text",required:!0,autoFocus:!0,tabIndex:1,inputMode:"numeric",pattern:"[0-9]*",autoComplete:"one-time-code",value:b.otp_code,onChange:w,placeholder:"Enter 6-digit OTP",className:`h-12 pl-10 text-base text-center tracking-widest transition-all duration-200 ${s.otp_code?"border-red-300 bg-red-50/50 focus-visible:ring-red-200":"border-gray-200 hover:border-gray-300 focus-visible:ring-blue-200"}`,"aria-invalid":s.otp_code?"true":"false","aria-describedby":s.otp_code?"otp_code-error":void 0,disabled:i})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[e.jsxs("div",{className:"text-sm text-[#6b6b6b]",children:["Time remaining: ",e.jsx("span",{className:"font-semibold text-[#1b1b18]",children:v(a)})]}),g&&e.jsx(u,{type:"button",variant:"outline",onClick:y,className:"text-sm font-medium text-[#6b6b6b] hover:text-[#1b1b18]",disabled:i,children:"Resend OTP"})]}),e.jsx(u,{type:"submit",className:"mt-4 h-12 w-full bg-[#1b1b18] text-base font-medium text-white transition-all duration-200 hover:bg-[#2d2d2a] disabled:opacity-50",tabIndex:2,disabled:i||!O,children:i?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying OTP..."]}):"Verify OTP"}),e.jsx("div",{className:"text-center",children:e.jsxs(F,{href:"/forgot-password",className:"inline-flex items-center text-sm font-medium text-[#6b6b6b] transition-colors hover:text-[#1b1b18] hover:underline",tabIndex:3,children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Back to reset request"]})})]})})]})})}),e.jsx("div",{className:"hidden h-14.5 lg:block"})]})]})}export{W as default};
