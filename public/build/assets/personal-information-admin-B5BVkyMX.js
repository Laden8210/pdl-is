import{r as N,m as V,K as B,j as e,L as O}from"./app-uc6TJGc3.js";import{C as I,a as Y,b as U,c as W}from"./card-C_daB7ZP.js";import{T as z,a as K,b,c as d,d as q,e as i}from"./table-XCOjqIEw.js";import{A as _,a as C,b as D}from"./alert-CNO0x5GU.js";import{B as v}from"./button-DL_-RBt4.js";import{D as T,e as k,a as $,b as P,c as E,d as J,f as Q,g as X,A as Z}from"./app-layout-Bd0CnOES.js";import{I as c}from"./index-Ccm-RLGB.js";import{L as t}from"./label-DPFnUvdW.js";import{S as M,a as A,b as w,c as S,d as x}from"./select-9bBlCJrZ.js";import{f as o}from"./format-CBpsKyOP.js";import{B as F}from"./badge-FQ0rDj2D.js";import{A as ee,a as u,b as g,c as p}from"./accordion-cQ5TFD1R.js";import{E as se}from"./eye-CkrlEkmS.js";import"./user-bziGaaEG.js";import"./index-CtmwyAQp.js";function ae({pdl:a}){const[s,r]=N.useState(a.birthdate?new Date(a.birthdate):void 0),{data:l,setData:h,put:L,processing:H,errors:y}=V({fname:a.fname,lname:a.lname,alias:a.alias??"",birthdate:a.birthdate,age:(a.age??"").toString(),gender:a.gender??"",ethnic_group:a.ethnic_group??"",civil_status:a.civil_status??"",brgy:a.brgy??"",city:a.city??"",province:a.province??""}),{props:R}=B(),f=R.success;N.useEffect(()=>{if(s){const n=o(s,"yyyy-MM-dd"),j=new Date().getFullYear()-s.getFullYear();h("birthdate",n),h("age",j.toString())}},[s]);const m=n=>{const j=n.target.name;h(j,n.target.value)},G=n=>{n.preventDefault(),L(route("pdl-management.update",a.id),{preserveScroll:!0})};return e.jsxs(T,{children:[e.jsx(k,{asChild:!0,children:e.jsx(v,{variant:"outline",children:"Edit"})}),e.jsxs($,{className:"sm:max-w-2xl",children:[e.jsxs(P,{children:[e.jsx(E,{children:"Edit Personal Information"}),e.jsx(J,{children:"Update the details for this personal information record."})]}),e.jsxs("form",{onSubmit:G,className:"mx-auto w-full space-y-4",children:[Object.keys(y).length>0&&e.jsxs(_,{variant:"destructive",className:"mt-4 mb-4",children:[e.jsx(C,{children:"Unable to update record"}),e.jsx(D,{children:e.jsx("ul",{className:"list-inside list-disc text-sm",children:Object.values(y).map((n,j)=>e.jsx("li",{children:n},j))})})]}),f&&e.jsxs(_,{variant:"default",className:"mb-4",children:[e.jsx(C,{children:"Success"}),e.jsx(D,{children:f})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"fname",children:"First Name"}),e.jsx(c,{id:"fname",name:"fname",value:l.fname,onChange:m})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"lname",children:"Last Name"}),e.jsx(c,{id:"lname",name:"lname",value:l.lname,onChange:m})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"alias",children:"Alias"}),e.jsx(c,{id:"alias",name:"alias",value:l.alias,onChange:m})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Date of Birth"}),e.jsx(c,{type:"date",value:s?o(s,"yyyy-MM-dd"):"",onChange:n=>r(n.target.value?new Date(n.target.value):void 0),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Gender"}),e.jsxs(M,{value:l.gender,onValueChange:n=>h("gender",n),children:[e.jsx(A,{children:e.jsx(w,{placeholder:"Select gender"})}),e.jsxs(S,{children:[e.jsx(x,{value:"Male",children:"Male"}),e.jsx(x,{value:"Female",children:"Female"})]})]})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"ethnic_group",children:"Ethnic Group"}),e.jsx(c,{id:"ethnic_group",name:"ethnic_group",value:l.ethnic_group,onChange:m})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Civil Status"}),e.jsxs(M,{value:l.civil_status,onValueChange:n=>h("civil_status",n),children:[e.jsx(A,{children:e.jsx(w,{placeholder:"Select status"})}),e.jsxs(S,{children:[e.jsx(x,{value:"Single",children:"Single"}),e.jsx(x,{value:"Married",children:"Married"}),e.jsx(x,{value:"Widowed",children:"Widowed"}),e.jsx(x,{value:"Divorced",children:"Divorced"})]})]})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"brgy",children:"Barangay"}),e.jsx(c,{id:"brgy",name:"brgy",value:l.brgy,onChange:m})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"city",children:"City"}),e.jsx(c,{id:"city",name:"city",value:l.city,onChange:m})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"province",children:"Province"}),e.jsx(c,{id:"province",name:"province",value:l.province,onChange:m})]})]}),e.jsxs(Q,{children:[e.jsx(v,{type:"submit",disabled:H,children:"Update"}),e.jsx(X,{asChild:!0,children:e.jsx(v,{variant:"outline",type:"button",children:"Cancel"})})]})]})]})]})}function re({pdl:a}){return console.log(a),e.jsxs(T,{children:[e.jsx(k,{asChild:!0,children:e.jsxs(v,{variant:"ghost",size:"sm",children:[e.jsx(se,{className:"h-4 w-4"})," View"]})}),e.jsxs($,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(P,{children:e.jsx(E,{children:"PDL Information"})}),e.jsxs("div",{className:"grid gap-4 py-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Full Name:"})," ",`${a.fname} ${a.lname}`]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Alias:"})," ",a.alias||"-"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Gender:"})," ",a.gender||"-"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Birthdate:"})," ",o(new Date(a.birthdate),"MMMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Age:"})," ",a.age]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Ethnic Group:"})," ",a.ethnic_group||"-"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Civil Status:"})," ",a.civil_status||"-"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Added By:"})," ",a.personnel?`${a.personnel.fname} ${a.personnel.lname}`:"-"]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Address:"})," ",`${a.brgy||""}, ${a.city||""}, ${a.province||""}`]})]})]}),e.jsxs(ee,{type:"multiple",className:"w-full",children:[Array.isArray(a.physical_characteristics)&&a.physical_characteristics.length>0&&e.jsxs(u,{value:"physical",children:[e.jsx(g,{className:"text-sm font-medium",children:"Physical Characteristics"}),e.jsx(p,{className:"grid grid-cols-2 gap-4 p-2 text-sm",children:a.physical_characteristics.map((s,r)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Height:"})," ",s.height," cm"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Weight:"})," ",s.weight," kg"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Build:"})," ",s.build]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Complexion:"})," ",s.complexion]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Hair Color:"})," ",s.hair_color]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Eye Color:"})," ",s.eye_color]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"ID Marks:"})," ",s.identification_marks]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Mark Location:"})," ",s.mark_location]}),s.remark&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Remarks:"})," ",s.remark]})]},r))})]}),Array.isArray(a.court_orders)&&a.court_orders.length>0&&e.jsxs(u,{value:"court",children:[e.jsxs(g,{className:"text-sm font-medium",children:["Court Orders (",a.court_orders.length,")"]}),e.jsx(p,{className:"space-y-4 p-2",children:a.court_orders.map((s,r)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Order #:"})," ",s.court_order_number]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"})," ",s.order_type]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Order Date:"})," ",o(new Date(s.order_date),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Received Date:"})," ",o(new Date(s.received_date),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Court Branch:"})," ",s.court_branch]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Document Type:"})," ",s.document_type]}),s.remarks&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Remarks:"})," ",s.remarks]})]},r))})]}),Array.isArray(a.medical_records)&&a.medical_records.length>0&&e.jsxs(u,{value:"medical",children:[e.jsxs(g,{className:"text-sm font-medium",children:["Medical Records (",a.medical_records.length,")"]}),e.jsx(p,{className:"space-y-4 p-2",children:a.medical_records.map((s,r)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date:"})," ",o(new Date(s.date),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Complaint:"})," ",s.complaint]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Findings:"})," ",s.findings]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Prognosis:"})," ",s.prognosis]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Laboratory Results:"})," ",s.laboratory]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Prescription:"})," ",s.prescription]})]},r))})]}),Array.isArray(a.cases)&&a.cases.length>0&&e.jsxs(u,{value:"cases",children:[e.jsxs(g,{className:"text-sm font-medium",children:["Case Information (",a.cases.length,")"]}),e.jsx(p,{className:"space-y-4 p-2",children:a.cases.map((s,r)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Case #:"})," ",s.case_number]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx(F,{variant:s.case_status==="open"?"destructive":s.case_status==="closed"?"secondary":"default",children:s.case_status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Crime:"})," ",s.crime_committed]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date Committed:"})," ",o(new Date(s.date_committed),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Time Committed:"})," ",s.time_committed]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Security:"}),e.jsx(F,{variant:s.security_classification==="low"?"secondary":s.security_classification==="medium"?"default":(s.security_classification==="high","destructive"),children:s.security_classification})]}),s.case_remarks&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Remarks:"})," ",s.case_remarks]})]},r))})]})]})]})]})]})}function ne(a){console.log("Birthdate:",a);const s=new Date(a),r=new Date;let l=r.getFullYear()-s.getFullYear();return r.getMonth()>s.getMonth()||r.getMonth()===s.getMonth()&&r.getDate()>=s.getDate()||l--,l}const le=[{title:"PDL Management",href:"/pdl-management"}];function Ne(){const{props:a}=B(),{verifications:s}=a;return console.log("Verifications:",s),e.jsxs(Z,{breadcrumbs:le,children:[e.jsx(O,{title:"Personal Information"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Personal Information"}),e.jsxs(I,{children:[e.jsx(Y,{children:e.jsx(U,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{children:"Personal Information List"})})})}),e.jsx(W,{children:e.jsxs(z,{children:[e.jsx(K,{children:e.jsxs(b,{children:[e.jsx(d,{children:"ID"}),e.jsx(d,{children:"Full Name"}),e.jsx(d,{children:"Alias"}),e.jsx(d,{children:"Gender"}),e.jsx(d,{children:"Ethnic Group"}),e.jsx(d,{children:"Civil Status"}),e.jsx(d,{children:"Date of Birth"}),e.jsx(d,{children:"Age"}),e.jsx(d,{children:"Address"}),e.jsx(d,{children:"Added By"}),e.jsx(d,{children:"Actions"})]})}),e.jsx(q,{children:s.map(r=>r.pdl&&e.jsxs(b,{children:[e.jsx(i,{children:r.pdl.id}),e.jsx(i,{children:`${r.pdl.fname} ${r.pdl.lname}`}),e.jsx(i,{children:r.pdl.alias??"-"}),e.jsx(i,{children:r.pdl.gender??"-"}),e.jsx(i,{children:r.pdl.ethnic_group??"-"}),e.jsx(i,{children:r.pdl.civil_status??"-"}),e.jsx(i,{children:o(new Date(r.pdl.birthdate),"MMMM dd, yyyy")}),e.jsx(i,{children:ne(r.pdl.birthdate)}),e.jsx(i,{children:`${r.pdl.brgy??""}, ${r.pdl.city??""}, ${r.pdl.province??""}`}),e.jsx(i,{children:r.pdl.personnel?`${r.pdl.personnel.fname} ${r.pdl.personnel.lname}`:"—"}),e.jsxs(i,{className:"space-x-1",children:[e.jsx(re,{pdl:r.pdl}),e.jsx(ae,{pdl:r.pdl})]})]},r.pdl.id))})]})})]})]})]})}export{Ne as default};
