import{K as B,r as d,j as e,S as V,L as $}from"./app-CcM30sAC.js";import{D as H,e as K,a as z,b as W,c as Y,d as G,A as J}from"./app-layout-K72RpabK.js";import{B as c}from"./button-nw6-iZy9.js";import{I as Q}from"./input-DJk89yj0.js";import{A as X,a as m,b as x,c as u}from"./accordion-ChcvJMeN.js";import{A as L,b as T,a as E}from"./alert-CzczWuzi.js";import{B as h}from"./badge-C0fBl2_7.js";import{C as Z}from"./card-DsmJmjsu.js";import{L as y}from"./label-BXwUcAO4.js";import{T as I}from"./textarea-BL1DW8-i.js";import{f as i}from"./format-B3rlCQGj.js";import"./index-8Ri7KS3l.js";import"./users-DrCRUVNL.js";import"./user-D8VfSULE.js";import"./scale-BF71mymd.js";import"./eye-gBfh2ZBe.js";function ee({verification:a,onUpdate:p,updateRoute:o="admin.verification.update"}){var M,k,A,R;const{flash:j,errors:b}=B().props,[l,t]=d.useState(""),[n,f]=d.useState(""),[q,g]=d.useState(!1),[_,N]=d.useState(!1),[O,S]=d.useState(!1),[F,D]=d.useState(!1),[w,C]=d.useState(""),v=`${a.pdl.fname} ${a.pdl.lname}`,P=a.personnel?`${a.personnel.fname} ${a.personnel.lname}`:"Unknown Personnel",U=()=>{N(!0),V.patch(route(o,a.verification_id),{feedback:l,status:n},{preserveScroll:!0,onSuccess:()=>{p(),t(""),f(""),g(!1),N(!1),C("Verification status updated successfully!"),S(!0),setTimeout(()=>{S(!1)},5e3)},onError:s=>{N(!1);const r=Object.values(s).join(", ");C(r),D(!0),setTimeout(()=>{D(!1)},5e3)}})};return e.jsx("li",{children:e.jsxs(Z,{className:"flex h-full flex-col p-4",children:[O&&e.jsxs(L,{variant:"default",className:"mb-4",children:[e.jsx(T,{children:"Success"}),e.jsx(E,{children:w})]}),F&&e.jsxs(L,{variant:"destructive",className:"mb-4",children:[e.jsx(T,{children:"Error"}),e.jsx(E,{children:w})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:v}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Requested by: ",P]})]}),e.jsx(h,{variant:a.status==="approved"?"default":a.status==="rejected"?"destructive":"secondary",children:a.status})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Reason:"})," ",a.reason]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Submitted:"})," ",i(new Date(a.created_at),"MMM dd, yyyy")]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs(H,{open:q,onOpenChange:g,children:[e.jsx(K,{asChild:!0,children:e.jsx(c,{variant:"outline",size:"sm",children:"Review Request"})}),e.jsxs(z,{className:"max-h-[80vh] overflow-y-auto sm:max-w-2xl",children:[e.jsxs(W,{children:[e.jsx(Y,{children:"Verification Request Details"}),e.jsxs(G,{children:["Review verification request for ",e.jsx("strong",{children:v})," ",e.jsx("br",{}),e.jsx("br",{}),"Submitted on: ",e.jsx("strong",{children:i(new Date(a.created_at),"MMM dd, yyyy, hh:mm a")})]})]}),e.jsxs("div",{className:"grid gap-4 py-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"PDL Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Full Name:"})," ",v]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Birthdate:"})," ",a.pdl.birthdate?i(new Date(a.pdl.birthdate),"MMM dd, yyyy"):"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Location:"})," ",[a.pdl.brgy,a.pdl.city,a.pdl.province].filter(Boolean).join(", ")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"})," ",e.jsx(h,{children:a.pdl.status||"N/A"})]})]})]}),e.jsxs(X,{type:"multiple",className:"w-full",children:[e.jsxs(m,{value:"physical",children:[e.jsx(x,{className:"text-sm font-medium",children:"Physical Characteristics"}),e.jsx(u,{className:"grid grid-cols-2 gap-2 p-2 text-sm",children:(M=a.pdl.physical_characteristics)!=null&&M.length?a.pdl.physical_characteristics.map((s,r)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Height:"})," ",s.height," cm"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Weight:"})," ",s.weight," kg"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Build:"})," ",s.build]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Complexion:"})," ",s.complexion]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Hair Color:"})," ",s.hair_color]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Eye Color:"})," ",s.eye_color]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"ID Marks:"})," ",s.identification_marks]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Mark Location:"})," ",s.mark_location]})]},r)):e.jsx("div",{className:"text-muted-foreground",children:"No physical characteristics recorded"})})]}),e.jsxs(m,{value:"court",children:[e.jsx(x,{className:"text-sm font-medium",children:"Court Orders"}),e.jsx(u,{className:"space-y-2 p-2",children:(k=a.pdl.court_orders)!=null&&k.length?a.pdl.court_orders.map((s,r)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Order #:"})," ",s.court_order_number]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"})," ",s.order_type]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Order Date:"})," ",i(new Date(s.order_date),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Received:"})," ",i(new Date(s.received_date),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Court Branch:"})," ",s.court_branch]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Document Type:"})," ",s.document_type]}),s.remarks&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Remarks:"})," ",s.remarks]})]},r)):e.jsx("div",{className:"text-muted-foreground",children:"No court orders recorded"})})]}),e.jsxs(m,{value:"medical",children:[e.jsx(x,{className:"text-sm font-medium",children:"Medical Records"}),e.jsx(u,{className:"space-y-2 p-2",children:(A=a.pdl.medical_records)!=null&&A.length?a.pdl.medical_records.map((s,r)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date:"})," ",i(new Date(s.date),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Complaint:"})," ",s.complaint]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Findings:"})," ",s.findings]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Prognosis:"})," ",s.prognosis]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Laboratory:"})," ",s.laboratory]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Prescription:"})," ",s.prescription]})]},r)):e.jsx("div",{className:"text-muted-foreground",children:"No medical records recorded"})})]}),e.jsxs(m,{value:"cases",children:[e.jsx(x,{className:"text-sm font-medium",children:"Case Information"}),e.jsx(u,{className:"space-y-2 p-2",children:(R=a.pdl.cases)!=null&&R.length?a.pdl.cases.map((s,r)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Case #:"})," ",s.case_number]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"})," ",e.jsx(h,{variant:s.case_status==="open"?"destructive":s.case_status==="closed"?"secondary":"default",children:s.case_status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Crime:"})," ",s.crime_committed]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date Committed:"})," ",i(new Date(s.date_committed),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Time Committed:"})," ",s.time_committed]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Security:"})," ",e.jsx(h,{variant:s.security_classification==="low"?"secondary":s.security_classification==="medium"?"default":(s.security_classification==="high","destructive"),children:s.security_classification})]}),s.case_remarks&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Remarks:"})," ",s.case_remarks]})]},r)):e.jsx("div",{className:"text-muted-foreground",children:"No case information recorded"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:`feedback-${a.verification_id}`,className:"text-sm font-medium",children:"Your Feedback"}),e.jsx(I,{id:`feedback-${a.verification_id}`,value:l,onChange:s=>t(s.target.value),placeholder:"Enter your feedback or comments...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Update Status"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:n==="approved"?"default":"outline",onClick:()=>f("approved"),children:"Approve"}),e.jsx(c,{variant:n==="rejected"?"destructive":"outline",onClick:()=>f("rejected"),children:"Reject"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(c,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsx(c,{onClick:U,disabled:_||!n||n==="rejected"&&!l.trim(),children:_?"Submitting...":"Submit"})]})]})]})})]})})}const se=[{title:"Dashboard",href:"/dashboard"},{title:"Document Verification",href:"/admin/verification"}];function ge(){const{verifications:a,filters:p,userRole:o}=B().props,[j,b]=d.useState(p.search||""),l=()=>{const t=o==="admin"?"/admin/verification":"/record-officer/verification";V.get(t,{search:j},{preserveState:!0})};return e.jsxs(J,{breadcrumbs:se,children:[e.jsx($,{title:"Document Verification"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Document Verification Requests"}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{id:"search",placeholder:"Search by PDL name or reason...",className:"w-full sm:w-64",value:j,onChange:t=>b(t.target.value),onKeyDown:t=>t.key==="Enter"&&l()}),e.jsx(c,{variant:"outline",onClick:l,children:"Search"})]})})]}),a.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx("p",{className:"text-lg",children:"No verification requests found"}),e.jsx("p",{className:"mt-2",children:"All verification requests will appear here"})]})}):e.jsx("ul",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(t=>e.jsx(ee,{verification:t,onUpdate:l,updateRoute:o==="admin"?"admin.verification.update":"record-officer.verification.update"},t.verification_id))})]})]})}export{ge as default};
