import{j as e,r as I,m as k,K as F,L as M,S as V}from"./app-ComDjZnt.js";import{D as R}from"./data-table-Jw0yEYMC.js";import{C as A,a as L,b as E,c as O}from"./card-DysgWUbO.js";import{I as p}from"./input-K0Qk0HNA.js";import{L as t}from"./label-D7-ESfDA.js";import{D as B,e as K,a as H,b as U,c as q,d as G,P as W,h as z,i as J,f as $,g as Y,A as Q}from"./app-layout-CQUFQldb.js";import{B as m}from"./button-CvEfsPre.js";import{D as X,a as Z,E as ee,b as se,c as ae,d as S}from"./dropdown-menu-5lTkt48E.js";import{B as T}from"./badge-Dyz0nZya.js";import{f as re}from"./format-B3rlCQGj.js";import{A as C,b as y,a as v}from"./alert-DdQUG61h.js";import{S as _,a as b,b as D,c as N,d as o}from"./select-D3GizBEP.js";import{T as ie}from"./textarea-BCoba47n.js";import{C as te,a as ne,b as ce,c as oe,d as le,e as de,f as me}from"./command-BxCjcFcn.js";import{R as ue,a as P}from"./radio-group-DXPcaPMV.js";import{C as he}from"./index-DwKaq7lm.js";import"./table-Bw0EwsBe.js";import"./index-Bpe871pD.js";import"./users-Be-d0Qcs.js";import"./user-DDqHKi5T.js";import"./scale-NzznseH8.js";import"./eye-C1nbeBXd.js";import"./index-D6vQNB0D.js";const xe=[{accessorKey:"case_number",header:"Case Number"},{accessorKey:"crime_committed",header:"Crime Committed"},{accessorKey:"date_committed",header:"Date Committed",cell:({row:r})=>re(new Date(r.original.date_committed),"MMM dd, yyyy")},{accessorKey:"time_committed",header:"Time Committed"},{accessorKey:"case_status",header:"Status",cell:({row:r})=>e.jsx(T,{variant:r.original.case_status==="open"?"default":"destructive",children:r.original.case_status.toUpperCase()})},{id:"pdl",header:"PDL",cell:({row:r})=>{const n=r.original.pdl;return n?`${n.fname} ${n.lname}`:`ID: ${r.original.pdl_id}`}},{accessorKey:"security_classification",header:"Security Classification"},{accessorKey:"drug_related",header:"Drug Related",cell:({row:r})=>e.jsx(T,{variant:r.original.drug_related?"destructive":"secondary",children:r.original.drug_related?"Yes":"No"})},{id:"actions",header:"Actions",cell:({row:r})=>{const n=r.original;return e.jsxs(X,{children:[e.jsx(Z,{asChild:!0,children:e.jsxs(m,{variant:"ghost",size:"icon",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ee,{className:"h-4 w-4"})]})}),e.jsxs(se,{align:"end",children:[e.jsx(ae,{children:"Actions"}),e.jsx(S,{asChild:!0}),e.jsx(S,{onClick:()=>console.log("Delete case",n.case_id),className:"text-red-500",children:"Delete"})]})]})}}],ge=[{category:"Violent Crimes",cases:["Murder","Homicide","Manslaughter","Assault","Battery","Robbery","Armed Robbery","Kidnapping","Abduction","Rape","Sexual Assault","Domestic Violence","Child Abuse","Elder Abuse","Hate Crime","Terrorism","Mass Shooting","Gang Violence"]},{category:"Property Crimes",cases:["Theft","Burglary","Larceny","Embezzlement","Fraud","Identity Theft","Credit Card Fraud","Insurance Fraud","Tax Evasion","Money Laundering","Arson","Vandalism","Trespassing","Shoplifting","Auto Theft","Grand Theft","Petty Theft"]},{category:"Drug Crimes",cases:["Drug Possession","Drug Trafficking","Drug Manufacturing","Drug Distribution","Drug Importation","Prescription Drug Fraud","Drug Paraphernalia","Marijuana Possession","Cocaine Possession","Heroin Possession","Methamphetamine","Ecstasy","LSD","Synthetic Drugs"]},{category:"White Collar Crimes",cases:["Corporate Fraud","Securities Fraud","Bank Fraud","Wire Fraud","Mail Fraud","Internet Fraud","Ponzi Scheme","Insider Trading","Bribery","Corruption","Extortion","Racketeering","Organized Crime","Cybercrime","Identity Theft","Forgery","Counterfeiting"]},{category:"Traffic Violations",cases:["DUI/DWI","Reckless Driving","Hit and Run","Driving Without License","Driving Under Suspension","Speeding","Running Red Light","Illegal Parking","Vehicle Registration Violation","Driving Without Insurance","Vehicular Manslaughter","Street Racing"]},{category:"Public Order Crimes",cases:["Disorderly Conduct","Public Intoxication","Disturbing the Peace","Loitering","Prostitution","Solicitation","Public Indecency","Trespassing","Vagrancy","Panhandling","Noise Violation","Public Nuisance","Obstruction of Justice","Resisting Arrest","Escape from Custody"]},{category:"Juvenile Crimes",cases:["Truancy","Curfew Violation","Underage Drinking","Underage Smoking","Graffiti","Vandalism","Shoplifting","Fighting","Bullying","Cyberbullying","Sexting","Gang Activity"]},{category:"Federal Crimes",cases:["Tax Evasion","Immigration Violation","Customs Violation","Border Crossing","Human Trafficking","Drug Trafficking","Weapons Trafficking","Terrorism","Espionage","Treason","Sedition","Federal Fraud","Bank Robbery","Postal Crime","Interstate Crime"]},{category:"Other Crimes",cases:["Contempt of Court","Perjury","Obstruction of Justice","Escape","Parole Violation","Probation Violation","Failure to Appear","Bail Jumping","Witness Tampering","Jury Tampering","Election Fraud","Environmental Crime","Animal Cruelty","Stalking","Harassment"]}];function pe({pdls:r}){const[n,u]=I.useState(!1),{data:a,setData:i,post:h,processing:d,errors:l,reset:j}=k({case_number:"",crime_committed:"",date_committed:"",time_committed:"",case_status:"open",case_remarks:"",security_classification:"medium",drug_related:!1,pdl_id:""}),f=s=>{s.preventDefault(),h(route("case-information.store"),{preserveScroll:!0,onSuccess:()=>j()})},{props:x}=F(),g=x.success;return e.jsxs(B,{children:[e.jsx(K,{asChild:!0,children:e.jsx(m,{variant:"outline",children:"Create Case"})}),e.jsxs(H,{className:"sm:max-w-3xl",children:[e.jsxs(U,{children:[e.jsx(q,{children:"Create Case Information"}),e.jsx(G,{children:"Fill in the details for the new case."})]}),Object.keys(l).length>0&&e.jsxs(C,{variant:"destructive",className:"mt-4 mb-4",children:[e.jsx(y,{children:"Unable to process request"}),e.jsx(v,{children:e.jsx("ul",{className:"list-inside list-disc text-sm",children:Object.values(l).map((s,c)=>e.jsx("li",{children:s},c))})})]}),g&&e.jsxs(C,{variant:"default",className:"mb-4",children:[e.jsx(y,{children:"Success"}),e.jsx(v,{children:g})]}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[Object.keys(l).length>0&&e.jsxs(C,{variant:"destructive",children:[e.jsx(y,{children:"Error"}),e.jsx(v,{children:e.jsx("ul",{className:"list-inside list-disc",children:Object.values(l).map((s,c)=>e.jsx("li",{children:s},c))})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"case_number",children:"Case Number"}),e.jsx(p,{id:"case_number",value:a.case_number,onChange:s=>i("case_number",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"crime_committed",children:"Crime Committed"}),e.jsxs(W,{open:n,onOpenChange:u,children:[e.jsx(z,{asChild:!0,children:e.jsxs(m,{variant:"outline",role:"combobox","aria-expanded":n,className:"w-full justify-between",children:[a.crime_committed||"Select or type crime committed...",e.jsx(te,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(J,{className:"w-full p-0",align:"start",children:e.jsxs(ne,{children:[e.jsx(ce,{placeholder:"Search crimes or type custom...",value:a.crime_committed,onValueChange:s=>i("crime_committed",s)}),e.jsxs(oe,{children:[e.jsx(le,{children:e.jsxs("div",{className:"p-2 text-sm text-muted-foreground",children:['No crime found. Press Enter to add "',a.crime_committed,'" as custom crime.']})}),ge.map(s=>e.jsx(de,{heading:s.category,children:s.cases.map(c=>e.jsxs(me,{value:c,onSelect:w=>{i("crime_committed",w),u(!1)},children:[e.jsx(he,{className:`mr-2 h-4 w-4 ${a.crime_committed===c?"opacity-100":"opacity-0"}`}),c]},c))},s.category))]})]})})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Select from common crimes or type a custom crime description"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"date_committed",children:"Date Committed"}),e.jsx(p,{type:"date",value:a.date_committed,onChange:s=>i("date_committed",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"time_committed",children:"Time Committed"}),e.jsx(p,{type:"time",value:a.time_committed,onChange:s=>i("time_committed",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"case_status",children:"Case Status"}),e.jsxs(_,{value:a.case_status,onValueChange:s=>i("case_status",s),required:!0,children:[e.jsx(b,{children:e.jsx(D,{placeholder:"Select status"})}),e.jsxs(N,{children:[e.jsx(o,{value:"open",children:"Open"}),e.jsx(o,{value:"closed",children:"Closed"}),e.jsx(o,{value:"pending",children:"Pending"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"security_classification",children:"Security Classification"}),e.jsxs(_,{value:a.security_classification,onValueChange:s=>i("security_classification",s),required:!0,children:[e.jsx(b,{children:e.jsx(D,{placeholder:"Select classification"})}),e.jsxs(N,{children:[e.jsx(o,{value:"low",children:"Low"}),e.jsx(o,{value:"medium",children:"Medium"}),e.jsx(o,{value:"high",children:"High"}),e.jsx(o,{value:"maximum",children:"Maximum"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Drug Related Case"}),e.jsxs(ue,{value:a.drug_related.toString(),onValueChange:s=>i("drug_related",s==="true"),className:"flex flex-row space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{value:"true",id:"drug_related_yes"}),e.jsx(t,{htmlFor:"drug_related_yes",className:"text-sm font-normal",children:"Yes"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{value:"false",id:"drug_related_no"}),e.jsx(t,{htmlFor:"drug_related_no",className:"text-sm font-normal",children:"No"})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Indicate if this case is related to drug offenses"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"PDL (Person Deprived of Liberty)"}),e.jsxs(_,{value:a.pdl_id,onValueChange:s=>i("pdl_id",s),required:!0,children:[e.jsx(b,{children:e.jsx(D,{placeholder:"Select a PDL"})}),e.jsx(N,{children:r.map(s=>e.jsxs(o,{value:s.id.toString(),children:[s.fname," ",s.lname," (ID: ",s.id,")"]},s.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"case_remarks",children:"Remarks"}),e.jsx(ie,{id:"case_remarks",value:a.case_remarks,onChange:s=>i("case_remarks",s.target.value),rows:3})]}),e.jsxs($,{children:[e.jsx(Y,{asChild:!0,children:e.jsx(m,{variant:"outline",children:"Cancel"})}),e.jsx(m,{type:"submit",disabled:d,children:d?"Creating...":"Create Case"})]})]})]})]})}const je=[{title:"Case Information Management",href:"/case-information"}];function Ke(){const{props:r}=F(),{cases:n,pdls:u,filters:a,auth:i,searchPerformed:h,totalResults:d}=r,[l,j]=I.useState((a==null?void 0:a.search)||""),f=()=>{var c;switch((c=i==null?void 0:i.user)==null?void 0:c.position){case"admin":return"/admin/pdl-management/case-information";case"law-enforcement":return"/law-enforcement/pdl-management/case-information";case"record-officer":default:return"/record-officer/pdl-management/case-information"}},x=()=>{V.get(f(),{search:l},{preserveState:!0,replace:!0})},g=s=>{s.key==="Enter"&&x()};return e.jsxs(Q,{breadcrumbs:je,children:[e.jsx(M,{title:"Case Information Management"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Case Information Management"}),e.jsxs(A,{children:[e.jsx(L,{children:e.jsx(E,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Case Information List"}),e.jsx(pe,{pdls:u})]})})}),e.jsxs(O,{children:[e.jsxs("div",{className:"mb-4 flex items-center space-x-4",children:[e.jsx(t,{htmlFor:"search",className:"text-sm font-medium",children:"Search Cases"}),e.jsx(p,{id:"search",placeholder:"Search by case number, crime, PDL name, etc.",className:"w-64 md:w-96",value:l,onChange:s=>j(s.target.value),onKeyDown:g}),e.jsx(m,{variant:"outline",onClick:x,children:"Search"})]}),e.jsx(R,{data:n,columns:xe}),h&&e.jsx("div",{className:"mt-4 text-center",children:d===0?e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx("p",{className:"text-lg font-medium",children:"No cases found"}),e.jsxs("p",{className:"mt-2",children:['No case records match your search criteria: "',a==null?void 0:a.search,'"']}),e.jsx("p",{className:"mt-1 text-sm",children:"Try searching with different keywords or check your spelling."})]}):e.jsx("div",{className:"text-muted-foreground",children:e.jsxs("p",{className:"text-sm",children:["Found ",d," case",d!==1?"s":"",' matching "',a==null?void 0:a.search,'"']})})}),!h&&n.length===0&&e.jsxs("div",{className:"mt-4 text-center text-muted-foreground",children:[e.jsx("p",{className:"text-lg font-medium",children:"No case records found"}),e.jsx("p",{className:"mt-2",children:"Case information records will appear here once they are created."})]})]})]})]})]})}export{Ke as default};
