import{j as e,K as p,r as x,L as g,S as n}from"./app-BoTlE5aI.js";import{D as _}from"./data-table-BoojbhFL.js";import{B as l}from"./button-Bj5pH61S.js";import{C as y,a as v,b as j,c as u}from"./card-CZFfk_eq.js";import{I as L}from"./input-Ciq5s3C_.js";import{L as C}from"./label-BRAb8jl0.js";import{A as b}from"./app-layout-BJZfQwuR.js";import"./table-C9Lu31Gh.js";import"./index-BnHx_bQJ.js";import"./index-D9HIOdVr.js";import"./users-Dvtkh9mR.js";import"./user-CJ7gsqVA.js";import"./scale-BNjvP8Fo.js";import"./eye-B19QzQqd.js";const A=[{accessorKey:"assignment_id",header:"Assignment ID"},{accessorKey:"pdl_name",header:"PDL Name"},{accessorKey:"pdl_gender",header:"PDL Gender"},{accessorKey:"from_cell",header:"From Cell"},{accessorKey:"to_cell",header:"To Cell"},{accessorKey:"transferred_by",header:"Transferred By"},{accessorKey:"reason",header:"Reason",cell:({row:t})=>e.jsx("div",{className:"max-w-xs truncate",title:t.original.reason,children:t.original.reason})},{accessorKey:"transferred_at",header:"Transferred At",cell:({row:t})=>{const s=new Date(t.original.transferred_at);return e.jsxs("div",{children:[e.jsx("div",{children:s.toLocaleDateString()}),e.jsx("div",{className:"text-sm text-gray-500",children:s.toLocaleTimeString()})]})}}];function M(){const{props:t}=p(),{transferLogs:s,cell:r,filters:d,pagination:m}=t,[c,f]=x.useState(d.search||"");console.log(s);const i=s.map(a=>({id:a.id,assignment_id:a.assignment_id,pdl_name:`${a.pdl.fname} ${a.pdl.lname}`,pdl_gender:a.pdl.gender,from_cell:a.from_cell.cell_name,to_cell:a.to_cell.cell_name,transferred_by:a.transferred_by?`${a.transferred_by.fname} ${a.transferred_by.lname}`:"Unknown User",reason:a.reason||"No reason provided",transferred_at:a.transferred_at})),o=()=>{const a=r?`/admin/pdl-management/cell-activity-log?cell_id=${r.cell_id}`:"/admin/pdl-management/cell-activity-log";n.get(a,{search:c})},h=[{title:"Cell Management",href:"/admin/cell-management"},{title:r?`Activity Log - ${r.cell_name}`:"Activity Log",href:r?`/admin/pdl-management/cell-activity-log?cell_id=${r.cell_id}`:"/admin/pdl-management/cell-activity-log"}];return e.jsxs(b,{breadcrumbs:h,children:[e.jsx(g,{title:"Cell Transfer Activity Log"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:r?`Cell Transfer Activity Log - ${r.cell_name}`:"Cell Transfer Activity Log"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[r&&e.jsx(l,{variant:"outline",onClick:()=>n.get("/admin/cell-management"),children:"Back to Cell Management"}),e.jsx(l,{variant:"outline",onClick:()=>n.get("/admin/pdl-management/cell-assignment"),children:"Back to Assignments"})]})]}),e.jsxs(y,{children:[e.jsx(v,{children:e.jsx(j,{children:"Transfer History"})}),e.jsxs(u,{children:[e.jsxs("div",{className:"mb-4 flex items-center space-x-4",children:[e.jsx(C,{htmlFor:"search",className:"text-sm font-medium",children:"Search Activity Log"}),e.jsx(L,{id:"search",placeholder:"Search by PDL name, cell names, or personnel...",className:"w-64",value:c,onChange:a=>f(a.target.value),onKeyDown:a=>a.key==="Enter"&&o()}),e.jsx(l,{variant:"outline",onClick:o,children:"Search"})]}),e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Showing ",i.length," of ",m.total," transfer records",r&&` for ${r.cell_name}`]}),e.jsx(_,{columns:A,data:i})]})]})]})]})}export{M as default};
