import{K as M,r as E,j as t,L as A}from"./app-uc6TJGc3.js";import{A as F,D as L,a as O,b as P,c as G}from"./app-layout-Bd0CnOES.js";import{D as _,m as j,g as p,y as l,S as U,V,c as N,s as $,d as B,f as I,e as W,h as z,N as q,j as K,k as w,B as k,l as Y,n as C,o as J,_ as H,E as X,p as R,q as Q,r as b,t as Z,u as ee,v as te,w as x,C as se,F as ae,i as ie,a as re,b as ne}from"./create-event-BBI8viQ9.js";import{B as le}from"./badge-FQ0rDj2D.js";import{f as S}from"./format-CBpsKyOP.js";import"./button-DL_-RBt4.js";import"./index-Ccm-RLGB.js";import"./user-bziGaaEG.js";import"./alert-CNO0x5GU.js";import"./label-DPFnUvdW.js";import"./search-CYExiVL2.js";class de extends k{constructor(){super(...arguments),this.state={textId:p()}}render(){let{theme:e,dateEnv:a,options:n,viewApi:s}=this.context,{cellId:d,dayDate:o,todayRange:r}=this.props,{textId:c}=this.state,f=Y(o,r),m=n.listDayFormat?a.format(o,n.listDayFormat):"",g=n.listDaySideFormat?a.format(o,n.listDaySideFormat):"",u=Object.assign({date:a.toDate(o),view:s,textId:c,text:m,sideText:g,navLinkAttrs:C(this.context,o),sideNavLinkAttrs:C(this.context,o,"day",!1)},f);return l(N,{elTag:"tr",elClasses:["fc-list-day",...J(f,e)],elAttrs:{"data-date":I(o)},renderProps:u,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:oe,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},h=>l("th",{scope:"colgroup",colSpan:3,id:d,"aria-labelledby":c},l(h,{elTag:"div",elClasses:["fc-list-day-cushion",e.getClass("tableCellShaded")]})))}}function oe(i){return l(H,null,i.text&&l("a",Object.assign({id:i.textId,className:"fc-list-day-text"},i.navLinkAttrs),i.text),i.sideText&&l("a",Object.assign({"aria-hidden":!0,className:"fc-list-day-side-text"},i.sideNavLinkAttrs),i.sideText))}const ce=R({hour:"numeric",minute:"2-digit",meridiem:"short"});class fe extends k{render(){let{props:e,context:a}=this,{options:n}=a,{seg:s,timeHeaderId:d,eventHeaderId:o,dateHeaderId:r}=e,c=n.eventTimeFormat||ce;return l(X,Object.assign({},e,{elTag:"tr",elClasses:["fc-list-event",s.eventRange.def.url&&"fc-event-forced-url"],defaultGenerator:()=>me(s,a),seg:s,timeText:"",disableDragging:!0,disableResizing:!0}),(f,m)=>l(H,null,ue(s,c,a,d,r),l("td",{"aria-hidden":!0,className:"fc-list-event-graphic"},l("span",{className:"fc-list-event-dot",style:{borderColor:m.borderColor||m.backgroundColor}})),l(f,{elTag:"td",elClasses:["fc-list-event-title"],elAttrs:{headers:`${o} ${r}`}})))}}function me(i,e){let a=Z(i,e);return l("a",Object.assign({},a),i.eventRange.def.title)}function ue(i,e,a,n,s){let{options:d}=a;if(d.displayEventTime!==!1){let o=i.eventRange.def,r=i.eventRange.instance,c=!1,f;if(o.allDay?c=!0:Q(i.eventRange.range)?i.isStart?f=b(i,e,a,null,null,r.range.start,i.end):i.isEnd?f=b(i,e,a,null,null,i.start,r.range.end):c=!0:f=b(i,e,a),c){let m={text:a.options.allDayText,view:a.viewApi};return l(N,{elTag:"td",elClasses:["fc-list-event-time"],elAttrs:{headers:`${n} ${s}`},renderProps:m,generatorName:"allDayContent",customGenerator:d.allDayContent,defaultGenerator:he,classNameGenerator:d.allDayClassNames,didMount:d.allDayDidMount,willUnmount:d.allDayWillUnmount})}return l("td",{className:"fc-list-event-time"},f)}return null}function he(i){return i.text}class ge extends _{constructor(){super(...arguments),this.computeDateVars=j(pe),this.eventStoreToSegs=j(this._eventStoreToSegs),this.state={timeHeaderId:p(),eventHeaderId:p(),dateHeaderIdRoot:p()},this.setRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e}):this.context.unregisterInteractiveComponent(this)}}render(){let{props:e,context:a}=this,{dayDates:n,dayRanges:s}=this.computeDateVars(e.dateProfile),d=this.eventStoreToSegs(e.eventStore,e.eventUiBases,s);return l(V,{elRef:this.setRootEl,elClasses:["fc-list",a.theme.getClass("table"),a.options.stickyHeaderDates!==!1?"fc-list-sticky":""],viewSpec:a.viewSpec},l(U,{liquid:!e.isHeightAuto,overflowX:e.isHeightAuto?"visible":"hidden",overflowY:e.isHeightAuto?"visible":"auto"},d.length>0?this.renderSegList(d,n):this.renderEmptyMessage()))}renderEmptyMessage(){let{options:e,viewApi:a}=this.context,n={text:e.noEventsText,view:a};return l(N,{elTag:"div",elClasses:["fc-list-empty"],renderProps:n,generatorName:"noEventsContent",customGenerator:e.noEventsContent,defaultGenerator:xe,classNameGenerator:e.noEventsClassNames,didMount:e.noEventsDidMount,willUnmount:e.noEventsWillUnmount},s=>l(s,{elTag:"div",elClasses:["fc-list-empty-cushion"]}))}renderSegList(e,a){let{theme:n,options:s}=this.context,{timeHeaderId:d,eventHeaderId:o,dateHeaderIdRoot:r}=this.state,c=ve(e);return l(q,{unit:"day"},(f,m)=>{let g=[];for(let u=0;u<c.length;u+=1){let h=c[u];if(h){let v=I(a[u]),D=r+"-"+v;g.push(l(de,{key:v,cellId:D,dayDate:a[u],todayRange:m})),h=W(h,s.eventOrder);for(let y of h)g.push(l(fe,Object.assign({key:v+":"+y.eventRange.instance.instanceId,seg:y,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,timeHeaderId:d,eventHeaderId:o,dateHeaderId:D},z(y,m,f))))}}return l("table",{className:"fc-list-table "+n.getClass("table")},l("thead",null,l("tr",null,l("th",{scope:"col",id:d},s.timeHint),l("th",{scope:"col","aria-hidden":!0}),l("th",{scope:"col",id:o},s.eventHint))),l("tbody",null,g))})}_eventStoreToSegs(e,a,n){return this.eventRangesToSegs($(e,a,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,n)}eventRangesToSegs(e,a){let n=[];for(let s of e)n.push(...this.eventRangeToSegs(s,a));return n}eventRangeToSegs(e,a){let{dateEnv:n}=this.context,{nextDayThreshold:s}=this.context.options,d=e.range,o=e.def.allDay,r,c,f,m=[];for(r=0;r<a.length;r+=1)if(c=B(d,a[r]),c&&(f={component:this,eventRange:e,start:c.start,end:c.end,isStart:e.isStart&&c.start.valueOf()===d.start.valueOf(),isEnd:e.isEnd&&c.end.valueOf()===d.end.valueOf(),dayIndex:r},m.push(f),!f.isEnd&&!o&&r+1<a.length&&d.end<n.add(a[r+1].start,s))){f.end=d.end,f.isEnd=!0;break}return m}}function xe(i){return i.text}function pe(i){let e=K(i.renderRange.start),a=i.renderRange.end,n=[],s=[];for(;e<a;)n.push(e),s.push({start:e,end:w(e,1)}),e=w(e,1);return{dayDates:n,dayRanges:s}}function ve(i){let e=[],a,n;for(a=0;a<i.length;a+=1)n=i[a],(e[n.dayIndex]||(e[n.dayIndex]=[])).push(n);return e}var ye=':root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid var(--fc-border-color)}.fc .fc-list-empty{align-items:center;background-color:var(--fc-neutral-bg-color);display:flex;height:100%;justify-content:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{border-style:hidden;width:100%}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{background:var(--fc-page-bg-color);position:sticky;top:0}.fc .fc-list-table thead{left:-10000px;position:absolute}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{clear:both;content:"";display:table}.fc-theme-standard .fc-list-day-cushion{background-color:var(--fc-neutral-bg-color)}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:var(--fc-list-event-hover-bg-color)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{border:calc(var(--fc-list-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-list-event-dot-width)/2);box-sizing:content-box;display:inline-block;height:0;width:0}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}';ee(ye);const be={listDayFormat:T,listDaySideFormat:T,noEventsClassNames:x,noEventsContent:x,noEventsDidMount:x,noEventsWillUnmount:x};function T(i){return i===!1?null:R(i)}var Ne=te({name:"@fullcalendar/list",optionRefiners:be,views:{list:{component:ge,buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDaySideFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDaySideFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDaySideFormat:{weekday:"long"}}}});const De=[{title:"Dashboard",href:"/dashboard"}];function Ae(){const{props:i}=M(),{pdls:e=[],activities:a=[]}=i,n=a.map(r=>({id:r.activity_id,title:r.activity_name,start:`${r.activity_date}T${r.activity_time}`,extendedProps:{description:r.description||"No description provided",pdl:r.pdl,category:r.category,location:r.location||"Not specified"},backgroundColor:o(r.category),borderColor:o(r.category),textColor:"#ffffff",className:"hover:shadow-md transition-shadow duration-200"})),[s,d]=E.useState(null);function o(r){switch(r.toLowerCase()){case"court hearing":return"#3b82f6";case"medical":return"#ef4444";case"visitation":return"#10b981";case"rehabilitation":return"#f59e0b";case"transfer":return"#8b5cf6";default:return"#6b7280"}}return t.jsxs(F,{breadcrumbs:De,children:[t.jsx(A,{title:"Calendar"}),t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 p-4",children:[t.jsxs("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Court Hearings & Jail Activities"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage and view all scheduled activities"})]}),t.jsx(se,{pdls:e})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"h-3 w-3 rounded-full bg-[#3b82f6]"}),t.jsx("span",{className:"text-xs",children:"Court Hearing"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"h-3 w-3 rounded-full bg-[#ef4444]"}),t.jsx("span",{className:"text-xs",children:"Medical"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"h-3 w-3 rounded-full bg-[#10b981]"}),t.jsx("span",{className:"text-xs",children:"Visitation"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"h-3 w-3 rounded-full bg-[#f59e0b]"}),t.jsx("span",{className:"text-xs",children:"Rehabilitation"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"h-3 w-3 rounded-full bg-[#8b5cf6]"}),t.jsx("span",{className:"text-xs",children:"Transfer"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"h-3 w-3 rounded-full bg-[#6b7280]"}),t.jsx("span",{className:"text-xs",children:"Other"})]})]}),t.jsx("div",{className:"h-[75vh] w-full rounded-lg border bg-card p-4 shadow-sm",children:t.jsx(ae,{plugins:[ie,re,ne,Ne],initialView:"dayGridMonth",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay listWeek"},height:"100%",selectable:!0,editable:!0,events:n,eventDisplay:"block",eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:"short",hour12:!0},eventClick:r=>{d({title:r.event.title,start:r.event.start,description:r.event.extendedProps.description,pdl:r.event.extendedProps.pdl,category:r.event.extendedProps.category,location:r.event.extendedProps.location})},dayHeaderClassNames:"font-medium",dayCellClassNames:"hover:bg-muted/50",nowIndicator:!0,slotMinTime:"06:00:00",slotMaxTime:"20:00:00"})})]}),t.jsx(L,{open:!!s,onOpenChange:()=>d(null),children:t.jsxs(O,{className:"sm:max-w-[600px]",children:[t.jsxs(P,{children:[t.jsx(G,{className:"text-2xl",children:s==null?void 0:s.title}),t.jsx("div",{className:"flex gap-2",children:t.jsx(le,{variant:"outline",className:"border-blue-500 text-blue-500",children:s==null?void 0:s.category})})]}),t.jsxs("div",{className:"grid gap-4 py-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Date"}),t.jsx("p",{children:(s==null?void 0:s.start)&&S(s.start,"MMMM d, yyyy")})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Time"}),t.jsx("p",{children:(s==null?void 0:s.start)&&S(s.start,"h:mm a")})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),t.jsx("p",{children:(s==null?void 0:s.location)||"Not specified"})]}),(s==null?void 0:s.pdl)&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Person Deprived of Liberty"}),t.jsxs("p",{children:[s.pdl.fname," ",s.pdl.lname]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),t.jsx("p",{className:"whitespace-pre-line",children:(s==null?void 0:s.description)||"No description provided"})]})]})]})})]})}export{Ae as default};
