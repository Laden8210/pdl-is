import{K as N,r as S,m as F,j as e,L as $}from"./app-DViah51f.js";import{B as C}from"./button-1m7tU0fB.js";import{C as L,a as T,b as y,c as D}from"./card-Bv9K5Yeq.js";import{I as M}from"./input-B5md_aLw.js";import{L as R}from"./label-CAM58Klf.js";import{T as I,a as Y,b as j,c as t,d as B,e as l}from"./table-duwmMhiQ.js";import{A as G}from"./app-layout-CCA6Jim-.js";import{t as A,n as _,f as P}from"./format-B3rlCQGj.js";import"./index-DaG-CaTw.js";import"./users-CO_wy2-e.js";import"./user-BeiPvLfV.js";import"./scale-GmYhU3cx.js";import"./eye-DdWqV9kt.js";function w(d,i){const r=+A(d)-+A(i);return r<0?-1:r>0?1:r}function k(d,i,r){const[c,n]=_(r==null?void 0:r.in,d,i);return c.getFullYear()-n.getFullYear()}function E(d,i,r){const[c,n]=_(r==null?void 0:r.in,d,i),o=w(c,n),h=Math.abs(k(c,n));c.setFullYear(1584),n.setFullYear(1584);const x=w(c,n)===-o,m=o*(h-+x);return m===0?0:m}const H=[{title:"Reports",href:"/reports"},{title:"List of PDL",href:"/reports/pdl-list"}];function z(d){return E(new Date,new Date(d))}function re(){const{props:d}=N(),{verifications:i}=d,[r,c]=S.useState(""),{data:n,get:o}=F({start_date:"",end_date:""}),h=i.filter(s=>{var u,f,g,b;if(!r)return!0;const a=s.pdl;if(!a)return!1;const p=r.toLowerCase();return((u=a.fname)==null?void 0:u.toLowerCase().includes(p))||((f=a.lname)==null?void 0:f.toLowerCase().includes(p))||((g=a.alias)==null?void 0:g.toLowerCase().includes(p))||`${a.fname} ${a.lname}`.toLowerCase().includes(p)||((b=a.id)==null?void 0:b.toString().includes(r))}),x=s=>{const a=new URLSearchParams;s&&a.append("verification_id",s.toString()),window.open(route("reports.gcta-tastm.export")+"?"+a.toString(),"_blank")},m=()=>{o(route("reports.gcta-tastm",{start_date:n.start_date,end_date:n.end_date}))};return e.jsxs(G,{breadcrumbs:H,children:[e.jsx($,{title:"List of PDL Reports"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold",children:"List of GCTA and TASTM Reports"})}),e.jsxs(L,{children:[e.jsx(T,{children:e.jsx(y,{children:"Filter Reports"})}),e.jsx(D,{children:e.jsxs("div",{className:"mb-4 grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"search",children:"Search"}),e.jsx(M,{id:"search",type:"text",placeholder:"Search by name or ID...",value:r,onChange:s=>c(s.target.value)})]}),e.jsx("div",{className:"flex items-end gap-2 md:col-span-2",children:e.jsx(C,{onClick:m,className:"bg-blue-500 hover:bg-blue-600",children:"Apply Filter"})})]})})]}),e.jsxs(L,{children:[e.jsx(T,{children:e.jsx(y,{children:"PDL List"})}),e.jsx(D,{children:e.jsxs(I,{children:[e.jsx(Y,{children:e.jsxs(j,{children:[e.jsx(t,{children:"ID"}),e.jsx(t,{children:"Full Name"}),e.jsx(t,{children:"Alias"}),e.jsx(t,{children:"Gender"}),e.jsx(t,{children:"GCTA Days"}),e.jsx(t,{children:"TASTM Days"}),e.jsx(t,{children:"Date of Birth"}),e.jsx(t,{children:"Age"}),e.jsx(t,{children:"Address"}),e.jsx(t,{children:"Added By"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(B,{children:h.length>0?h.map(s=>s.pdl&&e.jsxs(j,{children:[e.jsx(l,{children:s.pdl.id}),e.jsx(l,{children:`${s.pdl.fname} ${s.pdl.lname}`}),e.jsx(l,{children:s.pdl.alias??"-"}),e.jsx(l,{children:s.pdl.gender??"-"}),e.jsx(l,{className:"font-medium",children:s.gcta_days}),e.jsx(l,{className:"font-medium",children:s.tastm_days}),e.jsx(l,{children:P(new Date(s.pdl.birthdate),"MMMM dd, yyyy")}),e.jsx(l,{children:z(s.pdl.birthdate)}),e.jsx(l,{children:`${s.pdl.brgy??""}, ${s.pdl.city??""}, ${s.pdl.province??""}`}),e.jsx(l,{children:s.pdl.personnel?`${s.pdl.personnel.fname} ${s.pdl.personnel.lname}`:"â€”"}),e.jsx(l,{className:"space-x-1",children:e.jsx(C,{size:"sm",variant:"outline",onClick:()=>x(s.verification_id),children:"View"})})]},s.pdl.id)):e.jsx(j,{children:e.jsx(l,{colSpan:11,className:"py-4 text-center",children:"No records found"})})})]})})]})]})]})}export{re as default};
