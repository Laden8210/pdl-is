import{r as g,j as e,S as l,K as x,L as b}from"./app-Cw60ViYM.js";import{D as v}from"./data-table-rWmPc-3y.js";import{C as _,a as w,b as S,c as M}from"./card-fzSJF6jC.js";import{I as k}from"./input-Cov4X3e_.js";import{L as T}from"./label-DXzrxJOZ.js";import{D as K,i as A,a as L,b as P,c as E,d as I,g as B,A as R}from"./app-layout-DcwmIHce.js";import{B as t}from"./button-CmvSvEjs.js";import{D as F,a as O,E as $,b as H,c as U,d as f}from"./dropdown-menu-Dl_YXC-s.js";import{B as j}from"./badge-BacZE9yX.js";import{T as z}from"./trash-2-Dw4RpZ2s.js";import{f as Y}from"./format-B3rlCQGj.js";import{A as q,b as G,a as J}from"./alert-o4LoJfEd.js";import"./table-2RhIxSd3.js";import"./index-Bw_Z07or.js";import"./index-BPS7Tynv.js";import"./users-HzoBiL24.js";import"./user-DV2uFnOi.js";import"./scale-C_Y39GyJ.js";import"./eye-B-iqHte5.js";import"./index-3H_A0TGf.js";import"./index-DDJ1Usrt.js";import"./index-NaDUNWMp.js";function Q({caseInfo:s}){const[a,n]=g.useState(!1),r=()=>{l.delete(route("case-information.destroy",s.case_id),{onSuccess:()=>{n(!1)}})};return e.jsxs(K,{open:a,onOpenChange:n,children:[e.jsx(A,{asChild:!0,children:e.jsxs(t,{variant:"ghost",className:"w-full justify-start text-red-500 hover:text-red-700",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Delete"]})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(P,{children:[e.jsx(E,{children:"Delete Case Information"}),e.jsxs(I,{children:["Are you sure you want to delete this case information record?",s.pdl&&e.jsxs("span",{className:"block mt-2 font-medium",children:["PDL: ",s.pdl.fname," ",s.pdl.lname]}),s.case_number&&e.jsxs("span",{className:"block mt-1 text-sm text-gray-600",children:["Case Number: ",s.case_number]}),s.crime_committed&&e.jsxs("span",{className:"block mt-1 text-sm text-gray-600",children:["Crime: ",s.crime_committed]}),e.jsx("span",{className:"block mt-2 text-red-600",children:"This action cannot be undone."})]})]}),e.jsxs(B,{children:[e.jsx(t,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(t,{variant:"destructive",onClick:r,children:"Delete"})]})]})]})}const V=[{accessorKey:"case_number",header:"Case Number"},{accessorKey:"crime_committed",header:"Crime Committed"},{accessorKey:"date_committed",header:"Date Committed",cell:({row:s})=>Y(new Date(s.original.date_committed),"MMM dd, yyyy")},{accessorKey:"time_committed",header:"Time Committed"},{accessorKey:"case_status",header:"Status",cell:({row:s})=>e.jsx(j,{variant:s.original.case_status==="open"?"default":"destructive",children:s.original.case_status.toUpperCase()})},{id:"pdl",header:"PDL",cell:({row:s})=>{const a=s.original.pdl;return a?`${a.fname} ${a.lname}`:`ID: ${s.original.pdl_id}`}},{accessorKey:"security_classification",header:"Security Classification"},{accessorKey:"drug_related",header:"Drug Related",cell:({row:s})=>e.jsx(j,{variant:s.original.drug_related?"destructive":"secondary",children:s.original.drug_related?"Yes":"No"})},{id:"actions",header:"Actions",cell:({row:s})=>{const a=s.original;return e.jsxs(F,{children:[e.jsx(O,{asChild:!0,children:e.jsxs(t,{variant:"ghost",size:"icon",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx($,{className:"h-4 w-4"})]})}),e.jsxs(H,{align:"end",children:[e.jsx(U,{children:"Actions"}),e.jsx(f,{asChild:!0,children:e.jsx(t,{variant:"ghost",className:"w-full justify-start",onClick:()=>l.visit(route("case-information.edit",a.case_id)),children:"Edit"})}),e.jsx(f,{asChild:!0,children:e.jsx(Q,{caseInfo:a})})]})]})}}],W=[{title:"Case Information Management",href:"/case-information"}];function ye(){const{props:s}=x(),{cases:a,pdls:n,filters:r,auth:c,searchPerformed:d,totalResults:o}=s,[m,C]=g.useState((r==null?void 0:r.search)||""),y=()=>{var p;switch((p=c==null?void 0:c.user)==null?void 0:p.position){case"admin":return"/admin/pdl-management/case-information";case"law-enforcement":return"/law-enforcement/pdl-management/case-information";case"record-officer":default:return"/record-officer/pdl-management/case-information"}},h=()=>{l.get(y(),{search:m},{preserveState:!0,replace:!0})},D=i=>{i.key==="Enter"&&h()},{props:N}=x(),u=N.success;return e.jsxs(R,{breadcrumbs:W,children:[e.jsx(b,{title:"Case Information Management"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Case Information Management"}),e.jsxs(_,{children:[e.jsx(w,{children:e.jsx(S,{children:u&&e.jsxs(q,{variant:"default",children:[e.jsx(G,{children:"Success"}),e.jsx(J,{children:u})]})})}),e.jsxs(M,{children:[e.jsxs("div",{className:"mb-4 flex items-center space-x-4",children:[e.jsx(T,{htmlFor:"search",className:"text-sm font-medium",children:"Search Cases"}),e.jsx(k,{id:"search",placeholder:"Search by case number, crime, PDL name, etc.",className:"w-64 md:w-96",value:m,onChange:i=>C(i.target.value),onKeyDown:D}),e.jsx(t,{variant:"outline",onClick:h,children:"Search"})]}),e.jsx(v,{data:a,columns:V}),d&&e.jsx("div",{className:"mt-4 text-center",children:o===0?e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx("p",{className:"text-lg font-medium",children:"No cases found"}),e.jsxs("p",{className:"mt-2",children:['No case records match your search criteria: "',r==null?void 0:r.search,'"']}),e.jsx("p",{className:"mt-1 text-sm",children:"Try searching with different keywords or check your spelling."})]}):e.jsx("div",{className:"text-muted-foreground",children:e.jsxs("p",{className:"text-sm",children:["Found ",o," case",o!==1?"s":"",' matching "',r==null?void 0:r.search,'"']})})}),!d&&a.length===0&&e.jsxs("div",{className:"mt-4 text-center text-muted-foreground",children:[e.jsx("p",{className:"text-lg font-medium",children:"No case records found"}),e.jsx("p",{className:"mt-2",children:"Case information records will appear here once they are created."})]})]})]})]})]})}export{ye as default};
