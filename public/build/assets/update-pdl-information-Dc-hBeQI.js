import{r as f,K as ma,m as ha,j as e,L as ua}from"./app-QDpy6TC6.js";import{A as xa,X as $,P as pa,e as ga,f as ja}from"./app-layout-CHh0ZPRX.js";import{A as fe,b as ve,a as ye}from"./alert-B-Zf9-ZM.js";import{B as ee}from"./badge-Bw_7jUoZ.js";import{B as x}from"./button-C1stvJLJ.js";import{C as V,a as O,b as W,c as J}from"./card-BUi2rvmY.js";import{C as fa,a as va,b as ya,c as _a,d as Na,e as ba,f as wa}from"./command-Df-Fpsx3.js";import{I as j}from"./input-DysJzXiX.js";import{L as n}from"./label-CWDDxBV-.js";import{u as Ca,P as Pa,U as $s}from"./usePSGCLocation-XlSydilJ.js";import{R as ka,a as Us}from"./radio-group-8Lj4ceYH.js";import{S as A,a as T,b as E,c as L,d as g}from"./select-BcSXBIK4.js";import{S as _e}from"./separator-BpB88E-S.js";import{T as U}from"./textarea-A2eBYvJl.js";import{E as z}from"./eye-CLS_UQln.js";import{F as P}from"./users-DXkaOl-D.js";import{C as Sa}from"./index-CuOWeFhD.js";import{L as Ne}from"./loader-circle-BjMHaqn6.js";import{I as be}from"./image-Rqckmby-.js";import{f as H}from"./format-B3rlCQGj.js";import"./index-DgYTK6HS.js";import"./user-CSdNkW6G.js";import"./scale-C6syR94t.js";import"./circle-alert-Dk5uZCcK.js";import"./index-BoQhnAhW.js";import"./index-Bew6t8jT.js";import"./index-Df9iSfxr.js";const Fa=[{category:"Violent Crimes",cases:["Murder","Homicide","Manslaughter","Assault","Battery","Robbery","Armed Robbery","Kidnapping","Abduction","Rape","Sexual Assault","Domestic Violence","Child Abuse","Elder Abuse","Hate Crime","Terrorism","Mass Shooting","Gang Violence"]},{category:"Property Crimes",cases:["Theft","Burglary","Larceny","Embezzlement","Fraud","Identity Theft","Credit Card Fraud","Insurance Fraud","Tax Evasion","Money Laundering","Arson","Vandalism","Trespassing","Shoplifting","Auto Theft","Grand Theft","Petty Theft"]},{category:"Drug Crimes",cases:["Drug Possession","Drug Trafficking","Drug Manufacturing","Drug Distribution","Drug Importation","Prescription Drug Fraud","Drug Paraphernalia","Marijuana Possession","Cocaine Possession","Heroin Possession","Methamphetamine","Ecstasy","LSD","Synthetic Drugs"]},{category:"White Collar Crimes",cases:["Corporate Fraud","Securities Fraud","Bank Fraud","Wire Fraud","Mail Fraud","Internet Fraud","Ponzi Scheme","Insider Trading","Bribery","Corruption","Extortion","Racketeering","Organized Crime","Cybercrime","Identity Theft","Forgery","Counterfeiting"]},{category:"Traffic Violations",cases:["DUI/DWI","Reckless Driving","Hit and Run","Driving Without License","Driving Under Suspension","Speeding","Running Red Light","Illegal Parking","Vehicle Registration Violation","Driving Without Insurance","Vehicular Manslaughter","Street Racing"]},{category:"Public Order Crimes",cases:["Disorderly Conduct","Public Intoxication","Disturbing the Peace","Loitering","Prostitution","Solicitation","Public Indecency","Trespassing","Vagrancy","Panhandling","Noise Violation","Public Nuisance","Obstruction of Justice","Resisting Arrest","Escape from Custody"]},{category:"Juvenile Crimes",cases:["Truancy","Curfew Violation","Underage Drinking","Underage Smoking","Graffiti","Vandalism","Shoplifting","Fighting","Bullying","Cyberbullying","Sexting","Gang Activity"]},{category:"Federal Crimes",cases:["Tax Evasion","Immigration Violation","Customs Violation","Border Crossing","Human Trafficking","Drug Trafficking","Weapons Trafficking","Terrorism","Espionage","Treason","Sedition","Federal Fraud","Bank Robbery","Postal Crime","Interstate Crime"]},{category:"Other Crimes",cases:["Contempt of Court","Perjury","Obstruction of Justice","Escape","Parole Violation","Probation Violation","Failure to Appear","Bail Jumping","Witness Tampering","Jury Tampering","Election Fraud","Environmental Crime","Animal Cruelty","Stalking","Harassment"]}],Ma=[{title:"Update PDL Management",href:"/pdl-management"}],X=[{id:1,title:"Personal Information",description:"Basic personal details and address"},{id:2,title:"Court Order Details",description:"Court order and legal documentation"},{id:3,title:"Case Information",description:"Criminal case details and status"},{id:4,title:"Medical Records",description:"Health and medical information"},{id:5,title:"Physical Characteristics",description:"Physical description and identification marks"},{id:6,title:"Review & Submit",description:"Review all information before submission"}];function ir(){var Be,Ie,$e,Ue,ze,Ge,Ve,Oe,We,Je,He,Xe,Ke,Ye,qe,Qe,Ze,es,ss,as,rs;const[y,se]=f.useState(1),[h,ae]=f.useState(0),[m,re]=f.useState(0),[o,te]=f.useState(0),[we,K]=f.useState(null),[R,ne]=f.useState(null),{props:Y}=ma(),{pdl:c}=Y,{auth:de}=Y,{courts:zs}=Y,{provinces:q,citiesMunicipalities:Q,barangays:Z,selectedProvince:ie,selectedCityMunicipality:le,selectedBarangay:Gs,loading:k,error:Ce,handleProvinceChange:oe,handleCityMunicipalityChange:me,handleBarangayChange:he,getSelectedLocationNames:Vs}=Ca(),ue=(s,r)=>{if(s==="province"){const i=q.find(l=>l.code===r);oe(r),p("province",(i==null?void 0:i.name)||""),p("city",""),p("brgy","")}else if(s==="city"){const i=Q.find(l=>l.code===r);me(r),p("city",(i==null?void 0:i.name)||""),p("brgy","")}else if(s==="barangay"){const i=Z.find(l=>l.code===r);he(r),p("brgy",(i==null?void 0:i.name)||"")}};f.useEffect(()=>{if(c.province&&q.length>0){const s=q.find(r=>r.name===c.province);s&&oe(s.code)}},[q,c.province,oe]),f.useEffect(()=>{if(c.city&&Q.length>0){const s=Q.find(r=>r.name===c.city);s&&me(s.code)}},[Q,c.city,me]),f.useEffect(()=>{if(c.brgy&&Z.length>0){const s=Z.find(r=>r.name===c.brgy);s&&he(s.code)}},[Z,c.brgy,he]);const Os=()=>{const s=a.cases||[];p("cases",[...s,{case_id:0,case_number:"",crime_committed:"",date_committed:"",time_committed:"",case_status:"",case_remarks:"",security_classification:"",drug_related:!1}]),ae(s.length)},Ws=s=>{if(!a.cases||!Array.isArray(a.cases)||a.cases.length<=1)return;const r=a.cases.filter((i,l)=>l!==s);p("cases",r),ae(Math.min(h,r.length-1))},Js=()=>{const s=a.court_orders||[];p("court_orders",[...s,{court_order_id:0,order_type:"",order_date:"",received_date:"",document_type:null,document_path:"",original_filename:"",court_id:0,cod_remarks:""}]),re(s.length)},Hs=s=>{if(!a.court_orders||!Array.isArray(a.court_orders)||a.court_orders.length<=1)return;const r=a.court_orders.filter((i,l)=>l!==s);p("court_orders",r),re(Math.min(m,r.length-1))},G=(s,r,i)=>{if(!a.court_orders||!Array.isArray(a.court_orders)||s<0||s>=a.court_orders.length)return;const l=[...a.court_orders];l[s]&&(l[s]={...l[s],[r]:i},p("court_orders",l))},Xs=()=>{const s=a.medical_records||[];p("medical_records",[...s,{medical_record_id:0,complaint:"",date:new Date().toISOString().split("T")[0],prognosis:"",prescription:"",findings:"",medical_file:null}]),te(s.length)},Ks=s=>{if(!a.medical_records||!Array.isArray(a.medical_records)||a.medical_records.length<=1)return;const r=a.medical_records.filter((i,l)=>l!==s);p("medical_records",r),te(Math.min(o,r.length-1))},B=(s,r,i)=>{if(!a.medical_records||!Array.isArray(a.medical_records)||s<0||s>=a.medical_records.length)return;const l=[...a.medical_records];l[s]&&(l[s]={...l[s],[r]:i},p("medical_records",l))},S=(s,r,i)=>{if(!a.cases||!Array.isArray(a.cases)||s<0||s>=a.cases.length)return;const l=[...a.cases];l[s]&&(l[s]={...l[s],[r]:i},p("cases",l))},{data:a,setData:p,post:Ys,processing:xe,errors:Pe}=ha({id:c.id,fname:c.fname||"",lname:c.lname||"",alias:c.alias||"",mname:c.mname||"",suffix:c.suffix||"",birthdate:c.birthdate||"",age:c.age?c.age.toString():"",gender:c.gender||"",ethnic_group:c.ethnic_group||"",civil_status:c.civil_status||"",brgy:c.brgy||"",city:c.city||"",province:c.province||"",court_orders:Array.isArray(c.court_orders)&&c.court_orders.length>0?c.court_orders.map(s=>{var i;let r=0;return s!=null&&s.court_id?r=parseInt(s.court_id)||0:(i=s==null?void 0:s.court)!=null&&i.court_id&&(r=parseInt(s.court.court_id)||0),{court_order_id:(s==null?void 0:s.court_order_id)||0,order_type:(s==null?void 0:s.order_type)||"",order_date:s!=null&&s.order_date?H(new Date(s.order_date),"yyyy-MM-dd"):"",received_date:s!=null&&s.received_date?H(new Date(s.received_date),"yyyy-MM-dd"):"",document_type:(s==null?void 0:s.document_type)||"",document_path:(s==null?void 0:s.document_path)||"",original_filename:(s==null?void 0:s.original_filename)||"",court_id:r,cod_remarks:(s==null?void 0:s.remarks)||""}}):[{court_order_id:0,order_type:"",order_date:"",received_date:"",document_type:"",document_path:"",original_filename:"",court_id:0,cod_remarks:""}],medical_records:Array.isArray(c.medical_records)&&c.medical_records.length>0?c.medical_records.map(s=>({medical_record_id:(s==null?void 0:s.medical_record_id)||0,complaint:(s==null?void 0:s.complaint)||"",date:H(new Date(s.date),"yyyy-MM-dd")||"",prognosis:(s==null?void 0:s.prognosis)||"",prescription:(s==null?void 0:s.prescription)||"",findings:(s==null?void 0:s.findings)||"",medical_file:null})):[{medical_record_id:0,complaint:"",date:new Date().toISOString().split("T")[0],prognosis:"",prescription:"",findings:"",medical_file:null}],physical_characteristic_id:((Ie=(Be=c.physical_characteristics)==null?void 0:Be[0])==null?void 0:Ie.characteristic_id)||0,height:((Ue=($e=c.physical_characteristics)==null?void 0:$e[0])==null?void 0:Ue.height)??170,weight:((Ge=(ze=c.physical_characteristics)==null?void 0:ze[0])==null?void 0:Ge.weight)??70,build:((Oe=(Ve=c.physical_characteristics)==null?void 0:Ve[0])==null?void 0:Oe.build)||"",complexion:((Je=(We=c.physical_characteristics)==null?void 0:We[0])==null?void 0:Je.complexion)||"",hair_color:((Xe=(He=c.physical_characteristics)==null?void 0:He[0])==null?void 0:Xe.hair_color)||"",eye_color:((Ye=(Ke=c.physical_characteristics)==null?void 0:Ke[0])==null?void 0:Ye.eye_color)||"",identification_marks:((Qe=(qe=c.physical_characteristics)==null?void 0:qe[0])==null?void 0:Qe.identification_marks)||"",mark_location:((es=(Ze=c.physical_characteristics)==null?void 0:Ze[0])==null?void 0:es.mark_location)||"",pc_remark:((as=(ss=c.physical_characteristics)==null?void 0:ss[0])==null?void 0:as.remark)||"",mugshot:null,cases:Array.isArray(c.cases)&&c.cases.length>0?c.cases.map(s=>({case_id:(s==null?void 0:s.case_id)||0,case_number:(s==null?void 0:s.case_number)||"",crime_committed:(s==null?void 0:s.crime_committed)||"",date_committed:H(new Date(s==null?void 0:s.date_committed),"yyyy-MM-dd")||"",time_committed:(s==null?void 0:s.time_committed)||"",case_status:(s==null?void 0:s.case_status)||"open",case_remarks:(s==null?void 0:s.case_remarks)||"",security_classification:(s==null?void 0:s.security_classification)||"medium",drug_related:(s==null?void 0:s.drug_related)||!1})):[{case_id:0,case_number:"",crime_committed:"",date_committed:"",time_committed:"",case_status:"open",case_remarks:"",security_classification:"medium",drug_related:!1}]}),ke=Y.success,pe=Y.error,[Se,qs]=f.useState(a.birthdate?new Date(a.birthdate):void 0),[Fe,Me]=f.useState(!1),[Da,De]=f.useState([]),[N,I]=f.useState([]),[_,F]=f.useState([]),[w,M]=f.useState(null),[C,D]=f.useState(null),Qs=s=>{var i;const r=(i=s.target.files)==null?void 0:i[0];r&&(De(l=>[...l,r]),B(o,"medical_file",r),Ae(r))},Zs=s=>{var i;const r=(i=s.target.files)==null?void 0:i[0];r&&(G(m,"document_type",r),ea(r))},ea=s=>{const r=new FileReader;if(s.type.startsWith("image/"))r.onload=i=>{var u;const l=[...N];l[m]=(u=i.target)==null?void 0:u.result,I(l)},r.readAsDataURL(s);else if(s.type==="application/pdf")r.onload=i=>{var u;const l=[...N];l[m]=(u=i.target)==null?void 0:u.result,I(l)},r.readAsDataURL(s);else if(s.type==="text/plain")r.onload=i=>{var u;const l=[...N];l[m]=(u=i.target)==null?void 0:u.result,I(l)},r.readAsText(s);else if(s.type.includes("document")||s.name.endsWith(".doc")||s.name.endsWith(".docx")){const i=[...N];i[m]="document-file",I(i)}else{const i=[...N];i[m]=null,I(i)}},Ae=s=>{const r=new FileReader;if(s.type.startsWith("image/"))r.onload=i=>{var u;const l=[..._];l[o]=(u=i.target)==null?void 0:u.result,F(l)},r.readAsDataURL(s);else if(s.type==="application/pdf")r.onload=i=>{var u;const l=[..._];l[o]=(u=i.target)==null?void 0:u.result,F(l)},r.readAsDataURL(s);else if(s.type==="text/plain")r.onload=i=>{var u;const l=[..._];l[o]=(u=i.target)==null?void 0:u.result,F(l)},r.readAsText(s);else if(s.type.includes("document")||s.name.endsWith(".doc")||s.name.endsWith(".docx")){const i=[..._];i[o]="document-file",F(i)}else{const i=[..._];i[o]=null,F(i)}},sa=(s,r)=>{var l;const i=(l=r.split(".").pop())==null?void 0:l.toLowerCase();["jpg","jpeg","png","gif"].includes(i||"")?M(`/storage/${s}`):i==="pdf"?M(`/storage/${s}`):i==="txt"?fetch(`/storage/${s}`).then(u=>u.text()).then(u=>M(u)).catch(()=>M("document-file")):(["doc","docx"].includes(i||""),M("document-file"))},ge=(s,r)=>{var l;const i=(l=r.split(".").pop())==null?void 0:l.toLowerCase();["jpg","jpeg","png","gif"].includes(i||"")?D(`/storage/${s}`):i==="pdf"?D(`/storage/${s}`):i==="txt"?fetch(`/storage/${s}`).then(u=>u.text()).then(u=>D(u)).catch(()=>D("document-file")):(["doc","docx"].includes(i||""),D("document-file"))},aa=s=>{var i;const r=(i=s.target.files)==null?void 0:i[0];r&&(ne(r),p("mugshot",r),Te(r))},Te=s=>{const r=new FileReader;r.onload=i=>{var l;K((l=i.target)==null?void 0:l.result)},r.readAsDataURL(s)},ra=()=>{ne(null),p("mugshot",null),K(null)},ta=s=>{var i;switch((i=s.name.split(".").pop())==null?void 0:i.toLowerCase()){case"pdf":return e.jsx(P,{className:"h-5 w-5 text-red-500"});case"jpg":case"jpeg":case"png":case"gif":return e.jsx(be,{className:"h-5 w-5 text-blue-500"});default:return e.jsx(P,{className:"h-5 w-5 text-gray-500"})}},je=s=>{if(s===0)return"0 Bytes";const r=1024,i=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(s)/Math.log(r));return parseFloat((s/Math.pow(r,l)).toFixed(2))+" "+i[l]},ia=s=>{if(qs(s),s){const r=H(s,"yyyy-MM-dd"),i=new Date().getFullYear()-s.getFullYear();p("birthdate",r),p("age",i.toString())}},v=s=>{const r=s.target.name,i=s.target.type==="number"?parseFloat(s.target.value):s.target.value;p(r,i)},la=s=>{s.preventDefault();const r=new FormData;r.append("id",a.id.toString()),r.append("fname",a.fname),r.append("lname",a.lname),r.append("mname",a.mname),r.append("alias",a.alias),r.append("birthdate",a.birthdate),r.append("age",a.age),r.append("gender",a.gender),r.append("ethnic_group",a.ethnic_group),r.append("civil_status",a.civil_status),r.append("brgy",a.brgy),r.append("city",a.city),r.append("province",a.province),r.append("physical_characteristic_id",a.physical_characteristic_id.toString()),r.append("height",a.height.toString()),r.append("weight",a.weight.toString()),r.append("build",a.build),r.append("complexion",a.complexion),r.append("hair_color",a.hair_color),r.append("eye_color",a.eye_color),r.append("identification_marks",a.identification_marks),r.append("mark_location",a.mark_location),r.append("pc_remark",a.pc_remark),R&&r.append("mugshot",R),a.court_orders.forEach((i,l)=>{r.append(`court_orders[${l}][court_order_id]`,i.court_order_id.toString()),r.append(`court_orders[${l}][order_type]`,i.order_type),r.append(`court_orders[${l}][order_date]`,i.order_date),r.append(`court_orders[${l}][received_date]`,i.received_date),r.append(`court_orders[${l}][court_id]`,i.court_id.toString()),r.append(`court_orders[${l}][cod_remarks]`,i.cod_remarks),r.append(`court_orders[${l}][document_path]`,i.document_path),r.append(`court_orders[${l}][original_filename]`,i.original_filename),i.document_type instanceof File&&r.append(`court_orders[${l}][document_type]`,i.document_type)}),a.medical_records.forEach((i,l)=>{r.append(`medical_records[${l}][medical_record_id]`,i.medical_record_id.toString()),r.append(`medical_records[${l}][complaint]`,i.complaint),r.append(`medical_records[${l}][date]`,i.date),r.append(`medical_records[${l}][prognosis]`,i.prognosis),r.append(`medical_records[${l}][prescription]`,i.prescription),r.append(`medical_records[${l}][findings]`,i.findings),i.medical_file instanceof File&&r.append(`medical_records[${l}][medical_file]`,i.medical_file)}),a.cases.forEach((i,l)=>{r.append(`cases[${l}][case_id]`,i.case_id.toString()),r.append(`cases[${l}][case_number]`,i.case_number),r.append(`cases[${l}][crime_committed]`,i.crime_committed),r.append(`cases[${l}][date_committed]`,i.date_committed),r.append(`cases[${l}][time_committed]`,i.time_committed),r.append(`cases[${l}][case_status]`,i.case_status),r.append(`cases[${l}][case_remarks]`,i.case_remarks),r.append(`cases[${l}][security_classification]`,i.security_classification),r.append(`cases[${l}][drug_related]`,i.drug_related?"1":"0")}),Ys(route("pdl-management.personal-information.update",c.id),{forceFormData:!0,...r,preserveScroll:!0,onSuccess:()=>{ae(0),re(0),te(0),se(1),De([]),I([]),F([]),M(null),D(null),ne(null),K(null)},onError:i=>{console.error("Submit errors:",i)}})};f.useEffect(()=>{console.log("Step changed to:",y),console.log("Court orders before step change:",a.court_orders);const s={...a};s.court_orders&&s.court_orders.length>0&&(s.court_orders=s.court_orders.map(r=>({...r,court_id:r.court_id||0}))),p(s)},[y]);const ca=()=>{y<X.length&&se(y+1)},na=()=>{y>1&&se(y-1)},da=s=>{se(s)},Ee=s=>{switch(s){case"low":return"secondary";case"medium":return"default";case"high":return"destructive";case"maximum":return"destructive";default:return"default"}},Le=s=>{switch(s){case"open":return"destructive";case"closed":return"secondary";case"pending":return"default"}},oa=()=>{var s,r,i,l,u,ts,is,ls,cs,ns,ds,os,ms,hs,us,xs,ps,gs,js,fs,vs,ys,_s,Ns,bs,ws,Cs,Ps,ks,Ss,Fs,Ms,Ds,As,Ts,Es,Ls,Rs,Bs,Is;switch(y){case 1:return e.jsxs(V,{children:[e.jsx(O,{children:e.jsx(W,{children:"Personal Information"})}),e.jsxs(J,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"fname",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{id:"fname",name:"fname",value:a.fname,onChange:v,placeholder:"Enter first name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"lname",children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{id:"lname",name:"lname",value:a.lname,onChange:v,placeholder:"Enter last name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"mname",children:"Middle Name"}),e.jsx(j,{id:"mname",name:"mname",value:a.mname,onChange:v,placeholder:"Enter middle name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"alias",children:"Alias"}),e.jsx(j,{id:"alias",name:"alias",value:a.alias,onChange:v,placeholder:"Enter alias (if any)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"suffix",children:"Suffix"}),e.jsx(j,{id:"suffix",name:"suffix",value:a.suffix,onChange:v,placeholder:"Enter suffix (if any)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{children:["Date of Birth ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{type:"date",value:Se?H(Se,"yyyy-MM-dd"):a.birthdate,onChange:t=>ia(t.target.value?new Date(t.target.value):void 0)}),a.age&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Age: ",a.age," years"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{children:["Gender ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(A,{value:a.gender,onValueChange:t=>p("gender",t),children:[e.jsx(T,{children:e.jsx(E,{placeholder:"Select gender"})}),e.jsxs(L,{children:[e.jsx(g,{value:"Male",children:"Male"}),e.jsx(g,{value:"Female",children:"Female"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"ethnic_group",children:"Ethnic Group"}),e.jsx(j,{id:"ethnic_group",name:"ethnic_group",value:a.ethnic_group,onChange:v,placeholder:"Enter ethnic group"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Civil Status"}),e.jsxs(A,{value:a.civil_status,onValueChange:t=>p("civil_status",t),children:[e.jsx(T,{children:e.jsx(E,{placeholder:"Select civil status"})}),e.jsxs(L,{children:[e.jsx(g,{value:"Single",children:"Single"}),e.jsx(g,{value:"Married",children:"Married"}),e.jsx(g,{value:"Widowed",children:"Widowed"}),e.jsx(g,{value:"Annulment",children:"Annulment"})]})]})]})]}),e.jsx(_e,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-4 text-lg font-medium",children:"Address Information"}),Ce&&e.jsxs(fe,{variant:"destructive",className:"mb-4",children:[e.jsx(ve,{children:"Location Service Error"}),e.jsxs(ye,{children:[Ce,". Please refresh the page or try again later."]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"province",children:["Province",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(A,{value:ie,onValueChange:t=>ue("province",t),disabled:k.provinces,children:[e.jsx(T,{children:e.jsx(E,{placeholder:k.provinces?"Loading provinces...":"Select province"})}),e.jsx(L,{children:q.map(t=>e.jsx(g,{value:t.code,children:t.name},t.code))})]}),k.provinces&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Ne,{className:"h-3 w-3 animate-spin"}),"Loading provinces..."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"city",children:["City/Municipality",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(A,{value:le,onValueChange:t=>ue("city",t),disabled:!ie||k.citiesMunicipalities,children:[e.jsx(T,{children:e.jsx(E,{placeholder:ie?k.citiesMunicipalities?"Loading cities/municipalities...":"Select city/municipality":"Select province first"})}),e.jsx(L,{children:Q.map(t=>e.jsx(g,{value:t.code,children:t.name},t.code))})]}),k.citiesMunicipalities&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Ne,{className:"h-3 w-3 animate-spin"}),"Loading cities/municipalities..."]}),!ie&&e.jsx("div",{className:"text-xs text-muted-foreground",children:"Please select a province first"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"brgy",children:["Barangay",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(A,{value:Gs,onValueChange:t=>ue("barangay",t),disabled:!le||k.barangays,children:[e.jsx(T,{children:e.jsx(E,{placeholder:le?k.barangays?"Loading barangays...":"Select barangay":"Select city/municipality first"})}),e.jsx(L,{children:Z.map(t=>e.jsx(g,{value:t.code,children:t.name},t.code))})]}),k.barangays&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Ne,{className:"h-3 w-3 animate-spin"}),"Loading barangays..."]}),!le&&e.jsx("div",{className:"text-xs text-muted-foreground",children:"Please select a city/municipality first"})]})]})]}),e.jsx(_e,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-4 text-lg font-medium",children:"Mugshot Photo"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border-2 border-dashed border-gray-300 p-6 text-center transition-colors hover:border-gray-400",children:[e.jsx("input",{type:"file",id:"mugshot",accept:"image/jpeg,image/jpg,image/png",onChange:aa,className:"hidden"}),e.jsxs("label",{htmlFor:"mugshot",className:"cursor-pointer",children:[e.jsx($s,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Upload mugshot photo"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Supports: JPG, JPEG, PNG (Max 5MB)"})]})]})]}),c.mugshot_path&&c.mugshot_original_filename&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Current Mugshot"}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(be,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:c.mugshot_original_filename}),e.jsx("p",{className:"text-xs text-gray-500",children:"Current mugshot"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>K(`/storage/${c.mugshot_path}`),className:"text-blue-500 hover:text-blue-700",title:"Preview current mugshot",children:e.jsx(z,{className:"h-4 w-4"})})})]})]}),R&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"New Mugshot"}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(be,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:R.name}),e.jsx("p",{className:"text-xs text-gray-500",children:je(R.size)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>Te(R),className:"text-blue-500 hover:text-blue-700",title:"Preview mugshot",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:ra,className:"text-red-500 hover:text-red-700",children:e.jsx($,{className:"h-4 w-4"})})]})]})]}),we&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(n,{children:R?"New Mugshot Preview":"Current Mugshot Preview"}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:we,alt:"Mugshot preview",className:"max-h-96 w-full rounded-lg border object-contain"}),e.jsx(x,{type:"button",variant:"outline",size:"sm",className:"absolute top-2 right-2",onClick:()=>K(null),children:e.jsx($,{className:"h-4 w-4"})})]})]})]})]})]})]});case 2:return e.jsxs(V,{children:[e.jsx(O,{children:e.jsxs(W,{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:"Court Order Information"}),e.jsx(x,{variant:"outline",size:"sm",type:"button",onClick:Js,children:"Add New Court Order"})]})}),e.jsxs(J,{className:"space-y-6",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto py-2",children:a.court_orders.map((t,d)=>e.jsxs(x,{variant:m===d?"default":"outline",size:"sm",type:"button",onClick:()=>re(d),className:"relative",children:["Court Order ",d+1,a.court_orders.length>1&&e.jsx("button",{onClick:b=>{b.stopPropagation(),Hs(d)},className:"absolute -top-2 -right-2 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs text-white",children:"×"})]},d))}),a.court_orders.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"order_type",children:["Order Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{id:"order_type",name:"order_type",value:(s=a.court_orders[m])==null?void 0:s.order_type,onChange:t=>G(m,"order_type",t.target.value),placeholder:"Enter order type"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{children:["Order Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{type:"date",value:(r=a.court_orders[m])==null?void 0:r.order_date,onChange:t=>G(m,"order_date",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{children:["Received Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{type:"date",value:(i=a.court_orders[m])==null?void 0:i.received_date,onChange:t=>G(m,"received_date",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"document_type",children:["Upload Document ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"file",id:"document_type",name:"document_type",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt",onChange:Zs,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Supported formats: PDF, DOC, DOCX, JPG, JPEG, PNG, TXT"}),((l=a.court_orders[m])==null?void 0:l.original_filename)&&e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:(u=a.court_orders[m])==null?void 0:u.original_filename}),e.jsx("p",{className:"text-xs text-gray-500",children:"Current file"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>{var t,d;return sa(((t=a.court_orders[m])==null?void 0:t.document_path)||"",((d=a.court_orders[m])==null?void 0:d.original_filename)||"")},className:"text-blue-500 hover:text-blue-700",title:"Preview current file",children:e.jsx(z,{className:"h-4 w-4"})})})]}),N[m]&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(n,{children:"New Document Preview"}),e.jsxs("div",{className:"relative",children:[N[m]==="document-file"?e.jsx("div",{className:"flex h-64 w-full items-center justify-center rounded-lg border bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(P,{className:"mx-auto h-16 w-16 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm font-medium text-gray-900",children:(ts=a.court_orders[m].document_type)==null?void 0:ts.name}),e.jsx("p",{className:"text-xs text-gray-500",children:"Document file - Preview not available"}),e.jsx("p",{className:"text-xs text-gray-400",children:je(((is=a.court_orders[m].document_type)==null?void 0:is.size)||0)})]})}):(ls=N[m])!=null&&ls.startsWith("data:image/")?e.jsx("img",{src:N[m],alt:"Document preview",className:"max-h-64 w-full rounded-lg border object-contain"}):(cs=N[m])!=null&&cs.startsWith("data:application/pdf")?e.jsx("iframe",{src:N[m],className:"h-64 w-full rounded-lg border",title:"PDF Preview"}):e.jsx("div",{className:"h-64 w-full rounded-lg border bg-white p-4",children:e.jsx("pre",{className:"h-full w-full overflow-auto text-sm whitespace-pre-wrap text-gray-900",children:N[m]})}),e.jsx(x,{type:"button",variant:"outline",size:"sm",className:"absolute top-2 right-2",onClick:()=>{const t=[...N];t[m]=null,I(t)},children:e.jsx($,{className:"h-4 w-4"})})]})]}),w&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(n,{children:"Current Document Preview"}),e.jsxs("div",{className:"relative",children:[w==="document-file"?e.jsx("div",{className:"flex h-64 w-full items-center justify-center rounded-lg border bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(P,{className:"mx-auto h-16 w-16 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm font-medium text-gray-900",children:a.court_orders[m].original_filename}),e.jsx("p",{className:"text-xs text-gray-500",children:"Document file - Preview not available"})]})}):w.startsWith("/storage/")&&(w.includes(".jpg")||w.includes(".jpeg")||w.includes(".png"))?e.jsx("img",{src:w,alt:"Current document preview",className:"max-h-64 w-full rounded-lg border object-contain"}):w.startsWith("/storage/")&&w.includes(".pdf")?e.jsx("iframe",{src:w,className:"h-64 w-full rounded-lg border",title:"PDF Preview"}):e.jsx("div",{className:"h-64 w-full rounded-lg border bg-white p-4",children:e.jsx("pre",{className:"h-full w-full overflow-auto text-sm whitespace-pre-wrap text-gray-900",children:w})}),e.jsx(x,{type:"button",variant:"outline",size:"sm",className:"absolute top-2 right-2",onClick:()=>M(null),children:e.jsx($,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"court_branch",children:["Court Branch ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(A,{value:((ds=(ns=a.court_orders[m])==null?void 0:ns.court_id)==null?void 0:ds.toString())||"0",onValueChange:t=>{const d=parseInt(t)||0;G(m,"court_id",d)},children:[e.jsx(T,{children:e.jsx(E,{placeholder:"Select court branch"})}),e.jsxs(L,{children:[e.jsx(g,{value:"0",children:"Select court branch"}),zs.map(t=>e.jsx(g,{value:t.court_id.toString(),children:t.branch_code},t.court_id))]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"cod_remarks",children:"Remarks"}),e.jsx(U,{id:"cod_remarks",name:"cod_remarks",value:(os=a.court_orders[m])==null?void 0:os.cod_remarks,onChange:t=>G(m,"cod_remarks",t.target.value),rows:3,placeholder:"Enter any additional remarks..."})]})]})]})]});case 3:return e.jsxs(V,{children:[e.jsx(O,{children:e.jsxs(W,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:["Case Information",((ms=a.cases[h])==null?void 0:ms.case_status)&&e.jsx(ee,{variant:Le(((hs=a.cases[h])==null?void 0:hs.case_status)||""),children:(((us=a.cases[h])==null?void 0:us.case_status)||"").charAt(0).toUpperCase()+(((xs=a.cases[h])==null?void 0:xs.case_status)||"").slice(1)}),((ps=a.cases[h])==null?void 0:ps.security_classification)&&e.jsxs(ee,{variant:Ee(((gs=a.cases[h])==null?void 0:gs.security_classification)||""),children:[(((js=a.cases[h])==null?void 0:js.security_classification)||"").charAt(0).toUpperCase()+(((fs=a.cases[h])==null?void 0:fs.security_classification)||"").slice(1)," ","Security"]})]}),e.jsx(x,{variant:"outline",size:"sm",type:"button",onClick:Os,children:"Add New Case"})]})}),e.jsxs(J,{className:"space-y-6",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto py-2",children:a.cases.map((t,d)=>e.jsxs(x,{variant:h===d?"default":"outline",size:"sm",type:"button",onClick:()=>ae(d),className:"relative",children:["Case ",d+1,a.cases.length>1&&e.jsx("button",{onClick:b=>{b.stopPropagation(),Ws(d)},className:"absolute -top-2 -right-2 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs text-white",children:"×"})]},d))}),a.cases&&Array.isArray(a.cases)&&a.cases.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"case_number",children:["Case Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{id:"case_number",value:((vs=a.cases[h])==null?void 0:vs.case_number)||"",onChange:t=>S(h,"case_number",t.target.value),placeholder:"Enter case number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"crime_committed",children:["Crime Committed ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(pa,{open:Fe,onOpenChange:Me,children:[e.jsx(ga,{asChild:!0,children:e.jsxs(x,{variant:"outline",role:"combobox","aria-expanded":Fe,className:"w-full justify-between",children:[((ys=a.cases[h])==null?void 0:ys.crime_committed)||"Select or type crime committed...",e.jsx(fa,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(ja,{className:"w-full p-0",align:"start",children:e.jsxs(va,{children:[e.jsx(ya,{placeholder:"Search crimes or type custom...",value:((_s=a.cases[h])==null?void 0:_s.crime_committed)||"",onValueChange:t=>S(h,"crime_committed",t)}),e.jsxs(_a,{children:[e.jsx(Na,{children:e.jsxs("div",{className:"p-2 text-sm text-muted-foreground",children:['No crime found. Press Enter to add "',((Ns=a.cases[h])==null?void 0:Ns.crime_committed)||"",'" as custom crime.']})}),Fa.map(t=>e.jsx(ba,{heading:t.category,children:t.cases.map(d=>{var b;return e.jsxs(wa,{value:d,onSelect:ce=>{S(h,"crime_committed",ce),Me(!1)},children:[e.jsx(Sa,{className:`mr-2 h-4 w-4 ${((b=a.cases[h])==null?void 0:b.crime_committed)===d?"opacity-100":"opacity-0"}`}),d]},d)})},t.category))]})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"date_committed",children:["Date Committed ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{type:"date",value:((bs=a.cases[h])==null?void 0:bs.date_committed)||"",onChange:t=>S(h,"date_committed",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"time_committed",children:["Time Committed ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{type:"time",value:((ws=a.cases[h])==null?void 0:ws.time_committed)||"",onChange:t=>S(h,"time_committed",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"case_status",children:["Case Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(A,{value:((Cs=a.cases[h])==null?void 0:Cs.case_status)||"",onValueChange:t=>S(h,"case_status",t),children:[e.jsx(T,{children:e.jsx(E,{placeholder:"Select status"})}),e.jsxs(L,{children:[e.jsx(g,{value:"on_trial",children:"On Trial"}),e.jsx(g,{value:"convicted",children:"Convicted"}),e.jsx(g,{value:"deceased",children:"Deceased"}),e.jsx(g,{value:"bonded",children:"Bonded"}),e.jsx(g,{value:"transferred",children:"Transferred"}),e.jsx(g,{value:"served_sentence",children:"Served Sentence"}),e.jsx(g,{value:"dismissed",children:"Dismissed"}),((Ps=de==null?void 0:de.user)==null?void 0:Ps.position)==="law-enforcement"&&e.jsx(g,{value:"arraignment",children:"Arraignment"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"security_classification",children:["Security Classification ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(A,{value:((ks=a.cases[h])==null?void 0:ks.security_classification)||"",onValueChange:t=>S(h,"security_classification",t),children:[e.jsx(T,{children:e.jsx(E,{placeholder:"Select classification"})}),e.jsxs(L,{children:[e.jsx(g,{value:"low",children:"Low"}),e.jsx(g,{value:"medium",children:"Medium"}),e.jsx(g,{value:"high",children:"High"}),e.jsx(g,{value:"maximum",children:"Maximum"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Drug Related"}),e.jsxs(ka,{value:(Ss=a.cases[h])!=null&&Ss.drug_related?"yes":"no",onValueChange:t=>S(h,"drug_related",t==="yes"),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Us,{value:"yes",id:"drug_yes"}),e.jsx(n,{htmlFor:"drug_yes",children:"Yes"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Us,{value:"no",id:"drug_no"}),e.jsx(n,{htmlFor:"drug_no",children:"No"})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Indicate if this case is related to drug offenses"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"case_remarks",children:"Case Remarks"}),e.jsx(U,{id:"case_remarks",value:((Fs=a.cases[h])==null?void 0:Fs.case_remarks)||"",onChange:t=>S(h,"case_remarks",t.target.value),rows:3,placeholder:"Enter case-related remarks..."})]})]})]})]});case 4:return e.jsxs(V,{children:[e.jsx(O,{children:e.jsxs(W,{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:"Medical Records"}),e.jsx(x,{variant:"outline",size:"sm",type:"button",onClick:Xs,children:"Add New Medical Record"})]})}),e.jsxs(J,{className:"space-y-6",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto py-2",children:a.medical_records.map((t,d)=>e.jsxs(x,{variant:o===d?"default":"outline",size:"sm",type:"button",onClick:()=>te(d),className:"relative",children:["Medical Record ",d+1,a.medical_records.length>1&&e.jsx("button",{onClick:b=>{b.stopPropagation(),Ks(d)},className:"absolute -top-2 -right-2 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs text-white",children:"×"})]},d))}),a.medical_records.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"date",children:["Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{type:"date",id:"date",value:a.medical_records[o].date,onChange:t=>B(o,"date",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"complaint",children:["Complaint ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(U,{id:"complaint",name:"complaint",value:a.medical_records[o].complaint,onChange:t=>B(o,"complaint",t.target.value),rows:3,placeholder:"Describe the medical complaint or symptoms..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"findings",children:["Medical Findings ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(U,{id:"findings",name:"findings",value:a.medical_records[o].findings,onChange:t=>B(o,"findings",t.target.value),rows:3,placeholder:"Enter medical findings and observations..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"prognosis",children:["Prognosis ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(U,{id:"prognosis",name:"prognosis",value:a.medical_records[o].prognosis,onChange:t=>B(o,"prognosis",t.target.value),rows:3,placeholder:"Enter medical prognosis (e.g., Good prognosis with treatment, Poor prognosis due to complications, etc.)"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Specify prognosis details in parentheses for clarity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"prescription",children:["Prescription ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(U,{id:"prescription",name:"prescription",value:a.medical_records[o].prescription,onChange:t=>B(o,"prescription",t.target.value),rows:3,placeholder:"Enter prescribed medications and treatments..."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Medical Documents"}),e.jsxs("div",{className:"rounded-lg border-2 border-dashed border-gray-300 p-6 text-center transition-colors hover:border-gray-400",children:[e.jsx("input",{type:"file",id:"medical-file",accept:"image/*,.pdf,.doc,.docx,.txt",onChange:Qs,className:"hidden"}),e.jsxs("label",{htmlFor:"medical-file",className:"cursor-pointer",children:[e.jsx($s,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Upload medical document"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Supports: Images (JPG, PNG, GIF), PDF, DOC, DOCX, TXT"})]})]})]})]}),a.medical_records[o].medical_file&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Uploaded File"}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[ta(a.medical_records[o].medical_file),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:a.medical_records[o].medical_file.name}),e.jsx("p",{className:"text-xs text-gray-500",children:je(a.medical_records[o].medical_file.size)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>a.medical_records[o].medical_file&&Ae(a.medical_records[o].medical_file),className:"text-blue-500 hover:text-blue-700",title:"Preview file",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>{B(o,"medical_file",null);const t=[..._];t[o]=null,F(t)},className:"text-red-500 hover:text-red-700",children:e.jsx($,{className:"h-4 w-4"})})]})]})]}),_[o]&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(n,{children:"File Preview"}),e.jsxs("div",{className:"relative",children:[_[o]==="document-file"?e.jsx("div",{className:"flex h-64 w-full items-center justify-center rounded-lg border bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(P,{className:"mx-auto h-16 w-16 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm font-medium text-gray-900",children:"Document file - Preview not available"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Supported formats: PDF, DOC, DOCX, JPG, JPEG, PNG, TXT"})]})}):(Ms=_[o])!=null&&Ms.startsWith("data:image/")?e.jsx("img",{src:_[o],alt:"File preview",className:"max-h-64 w-full rounded-lg border object-contain"}):(Ds=_[o])!=null&&Ds.startsWith("data:application/pdf")?e.jsx("iframe",{src:_[o],className:"h-64 w-full rounded-lg border",title:"PDF Preview"}):e.jsx("div",{className:"h-64 w-full rounded-lg border bg-white p-4",children:e.jsx("pre",{className:"h-full w-full overflow-auto text-sm whitespace-pre-wrap text-gray-900",children:_[o]})}),e.jsx(x,{type:"button",variant:"outline",size:"sm",className:"absolute top-2 right-2",onClick:()=>{const t=[..._];t[o]=null,F(t)},children:e.jsx($,{className:"h-4 w-4"})})]})]}),((Ts=(As=c.medical_records)==null?void 0:As[0])==null?void 0:Ts.single_file)&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(n,{children:"Current Medical Record File"}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:c.medical_records[0].single_file.original_filename}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(Es=c.medical_records[0].single_file.extension)==null?void 0:Es.toUpperCase()," • Medical record"]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>ge(c.medical_records[0].single_file.file_path,c.medical_records[0].single_file.original_filename),className:"text-blue-500 hover:text-blue-700",title:"Preview file",children:e.jsx(z,{className:"h-4 w-4"})})})]})]}),(Rs=(Ls=c.medical_records)==null?void 0:Ls[0])!=null&&Rs.files&&c.medical_records[0].files.length>0||(Is=(Bs=c.medical_records)==null?void 0:Bs[0])!=null&&Is.original_filename&&c.medical_records[0].original_filename?e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(n,{children:"Current Medical Documents"}),e.jsx("div",{className:"space-y-2",children:c.medical_records[0].files&&c.medical_records[0].files.length>0?c.medical_records[0].files.map((t,d)=>{var b;return e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.original_filename}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(b=t.extension)==null?void 0:b.toUpperCase()," • Medical document"]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>ge(t.file_path,t.original_filename),className:"text-blue-500 hover:text-blue-700",title:"Preview file",children:e.jsx(z,{className:"h-4 w-4"})})})]},d)}):c.medical_records[0].original_filename.split(",").map((t,d)=>{var ce;const b=(ce=c.medical_records[0].file_path)==null?void 0:ce.split(",")[d];return e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t}),e.jsx("p",{className:"text-xs text-gray-500",children:"Medical document"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>ge(b||"",t),className:"text-blue-500 hover:text-blue-700",title:"Preview file",children:e.jsx(z,{className:"h-4 w-4"})})})]},d)})})]}):null,C&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(n,{children:"Current Medical File Preview"}),e.jsxs("div",{className:"relative",children:[C==="document-file"?e.jsx("div",{className:"flex h-64 w-full items-center justify-center rounded-lg border bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(P,{className:"mx-auto h-16 w-16 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm font-medium text-gray-900",children:"Document file - Preview not available"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Supported formats: PDF, DOC, DOCX, JPG, JPEG, PNG, TXT"})]})}):C.startsWith("/storage/")&&(C.includes(".jpg")||C.includes(".jpeg")||C.includes(".png"))?e.jsx("img",{src:C,alt:"Current medical file preview",className:"max-h-64 w-full rounded-lg border object-contain"}):C.startsWith("/storage/")&&C.includes(".pdf")?e.jsx("iframe",{src:C,className:"h-64 w-full rounded-lg border",title:"PDF Preview"}):e.jsx("div",{className:"h-64 w-full rounded-lg border bg-white p-4",children:e.jsx("pre",{className:"h-full w-full overflow-auto text-sm whitespace-pre-wrap text-gray-900",children:C})}),e.jsx(x,{type:"button",variant:"outline",size:"sm",className:"absolute top-2 right-2",onClick:()=>D(null),children:e.jsx($,{className:"h-4 w-4"})})]})]})]})]})]})]});case 5:return e.jsxs(V,{children:[e.jsx(O,{children:e.jsxs(W,{className:"flex items-center gap-2",children:["Physical Characteristics",a.height&&a.weight&&e.jsxs(ee,{variant:"secondary",children:[a.height,"cm / ",a.weight,"kg"]})]})}),e.jsxs(J,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"height",children:["Height (cm) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{type:"number",id:"height",name:"height",min:"100",max:"250",value:a.height,onChange:v,placeholder:"170"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"weight",children:["Weight (kg) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{type:"number",id:"weight",name:"weight",min:"30",max:"300",value:a.weight,onChange:v,placeholder:"70"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"build",children:["Build ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{id:"build",name:"build",value:a.build,onChange:v,placeholder:"e.g., Slim, Medium, Heavy"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"complexion",children:["Complexion ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{id:"complexion",name:"complexion",value:a.complexion,onChange:v,placeholder:"e.g., Fair, Dark, Medium"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"hair_color",children:["Hair Color ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{id:"hair_color",name:"hair_color",value:a.hair_color,onChange:v,placeholder:"e.g., Black, Brown, Gray"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"eye_color",children:["Eye Color ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{id:"eye_color",name:"eye_color",value:a.eye_color,onChange:v,placeholder:"e.g., Brown, Black, Blue"})]})]}),e.jsx(_e,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-4 text-lg font-medium",children:"Identification Marks"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"identification_marks",children:["Identification Marks ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{id:"identification_marks",name:"identification_marks",value:a.identification_marks,onChange:v,placeholder:"e.g., Scar, Tattoo, Birthmark"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"mark_location",children:["Mark Location ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{id:"mark_location",name:"mark_location",value:a.mark_location,onChange:v,placeholder:"e.g., Left arm, Right cheek"})]}),e.jsxs("div",{className:"col-span-2 space-y-2",children:[e.jsx(n,{htmlFor:"pc_remark",children:"Physical Characteristics Remarks"}),e.jsx(U,{id:"pc_remark",name:"pc_remark",value:a.pc_remark,onChange:v,rows:3,placeholder:"Enter any additional physical characteristic remarks..."})]})]})]})]})]});case 6:return e.jsxs(V,{children:[e.jsx(O,{children:e.jsx(W,{children:"Review & Update"})}),e.jsx(J,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Personal Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",a.fname," ",a.lname]}),a.alias&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Alias:"})," ",a.alias]}),a.age&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Age:"})," ",a.age," years"]}),a.gender&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Gender:"})," ",a.gender]}),a.civil_status&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Civil Status:"})," ",a.civil_status]}),(()=>{const t=Vs(),d=[t.barangay,t.cityMunicipality,t.province].filter(Boolean);return d.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Address:"})," ",d.join(", ")]})})()]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Court Orders (",a.court_orders.length,")"]}),e.jsx("div",{className:"space-y-3",children:a.court_orders.map((t,d)=>e.jsxs("div",{className:"rounded-lg border p-3",children:[e.jsx("div",{className:"mb-2 flex items-center gap-2",children:e.jsxs("span",{className:"font-medium",children:["Court Order ",d+1]})}),e.jsxs("div",{className:"space-y-1 text-sm",children:[t.order_type&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Order Type:"})," ",t.order_type]}),t.order_date&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Order Date:"})," ",t.order_date]}),t.received_date&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Received Date:"})," ",t.received_date]}),t.cod_remarks&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Remarks:"})," ",t.cod_remarks]})]})]},d))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Cases (",a.cases.length,")"]}),e.jsx("div",{className:"space-y-3",children:a.cases.map((t,d)=>e.jsxs("div",{className:"rounded-lg border p-3",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",children:["Case ",d+1]}),e.jsx(ee,{variant:Le(t.case_status),children:t.case_status}),e.jsx(ee,{variant:Ee(t.security_classification),children:t.security_classification})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[t.case_number&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Case Number:"})," ",t.case_number]}),t.crime_committed&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Crime:"})," ",t.crime_committed]}),t.date_committed&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date:"})," ",t.date_committed]})]})]},d))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Medical Records (",a.medical_records.length,")"]}),e.jsx("div",{className:"space-y-3",children:a.medical_records.map((t,d)=>e.jsxs("div",{className:"rounded-lg border p-3",children:[e.jsx("div",{className:"mb-2 flex items-center gap-2",children:e.jsxs("span",{className:"font-medium",children:["Medical Record ",d+1]})}),e.jsxs("div",{className:"space-y-1 text-sm",children:[t.date&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date:"})," ",t.date]}),t.complaint&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Complaint:"})," ",t.complaint]}),t.findings&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Findings:"})," ",t.findings]}),t.prognosis&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Prognosis:"})," ",t.prognosis]}),t.prescription&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Prescription:"})," ",t.prescription]})]})]},d))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Physical Characteristics"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[a.height&&a.weight&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Measurements:"})," ",a.height,"cm, ",a.weight,"kg"]}),a.build&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Build:"})," ",a.build]}),a.complexion&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Complexion:"})," ",a.complexion]}),a.hair_color&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Hair Color:"})," ",a.hair_color]}),a.eye_color&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Eye Color:"})," ",a.eye_color]}),a.identification_marks&&a.mark_location&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Marks:"})," ",a.identification_marks," (",a.mark_location,")"]})]})]})]})})]});default:return null}},Re=y/X.length*100;return e.jsxs(xa,{breadcrumbs:Ma,children:[e.jsx(ua,{title:"Update PDL Information"}),e.jsxs("div",{className:"mx-auto w-full space-y-6 p-5",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Update PDL Information"}),e.jsxs("p",{className:"mt-2 text-muted-foreground",children:["Step ",y," of ",X.length,": ",(rs=X[y-1])==null?void 0:rs.description]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[Math.round(Re),"% Complete"]})]}),e.jsx(Pa,{value:Re,className:"w-full"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:X.map(s=>e.jsxs(x,{variant:y===s.id?"default":y>s.id?"secondary":"outline",size:"sm",onClick:()=>da(s.id),className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-background text-xs",children:s.id}),s.title]},s.id))}),e.jsxs("form",{onSubmit:la,className:"space-y-6",children:[(Object.keys(Pe).length>0||pe)&&e.jsx("div",{"data-alert-container":!0,className:"relative",children:e.jsxs(fe,{variant:"destructive",children:[e.jsx("button",{type:"button","aria-label":"Close",onClick:s=>{const r=s.currentTarget.closest("[data-alert-container]")||void 0;r&&(r.style.display="none")},className:"absolute top-2 right-2 rounded p-1 text-lg leading-none hover:bg-muted",children:"×"}),e.jsx(ve,{children:"Unable to process request"}),e.jsx(ye,{children:pe?e.jsx("div",{className:"text-sm",children:pe}):e.jsx("ul",{className:"list-inside list-disc space-y-1",children:Object.values(Pe).map((s,r)=>e.jsx("li",{className:"text-sm",children:s},r))})})]})}),ke&&e.jsx("div",{"data-alert-container":!0,className:"relative",style:{animation:"fadeIn 0.3s ease-in-out"},children:e.jsxs(fe,{className:"border-green-200 bg-green-50 text-green-800",children:[e.jsx("button",{type:"button","aria-label":"Close",onClick:s=>{const r=s.currentTarget.closest("[data-alert-container]")||void 0;r&&(r.style.display="none")},className:"absolute top-2 right-2 rounded p-1 text-sm leading-none hover:bg-muted",children:"×"}),e.jsx(ve,{children:"Success"}),e.jsx(ye,{children:ke})]})}),oa(),e.jsxs("div",{className:"flex items-center justify-between border-t pt-6",children:[e.jsx("div",{className:"flex gap-2",children:y>1&&e.jsx(x,{type:"button",variant:"outline",onClick:na,children:"Previous"})}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{className:"text-red-500",children:"*"})," Required fields"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>{window.location.href=route("pdl-management.personal-information")},disabled:xe,children:"Cancel"}),y<X.length?e.jsx(x,{type:"button",onClick:ca,children:"Next"}):e.jsx(x,{type:"submit",disabled:xe,className:"min-w-[120px]",children:xe?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Updating..."]}):"Update PDL Record"})]})]})]})]})]})}export{ir as default};
