import{r as g,m as R,j as e,L as A}from"./app-DnCCZdQP.js";import{C as b,a as v,b as _,c as C}from"./card-C9X8j58u.js";import{B as I}from"./button-Bzh5YXD2.js";import{I as u}from"./input-CMVIeUot.js";import{L as x}from"./label-hjpTsbbL.js";import{S as U,a as M,b as k,c as V,d as q}from"./select-B7ubXH-Y.js";import{A as B}from"./app-layout-DFlDjcO4.js";import{F as y}from"./users-BLuOJmIv.js";import{C as H}from"./scale-kSXqTHaD.js";import{D as J}from"./download-CJ-9aM7j.js";import"./index-Bwy5C-G7.js";import"./index-BUKMWMlH.js";import"./index-CmBb7qlo.js";import"./index-BBKAsmee.js";import"./index-andYFLom.js";import"./user-DPLirZ3g.js";import"./eye-DtGDJvfS.js";import"./circle-alert-tHfdt3Eq.js";const G=[{title:"Reports",href:"/report"},{title:"Certificate of Detention",href:"/report/certificate-of-detention"}];function me({pdls:j}){const[t,D]=g.useState(null),[n,S]=g.useState(""),{data:c,setData:m,post:w,processing:$,errors:r}=R({pdl_id:"",issue_date:"",officer_name:"",officer_position:""}),T=s=>{const i=j.find(a=>a.id.toString()===s);D(i||null),m("pdl_id",s)},L=s=>{S(s),m("issue_date",s)},P=s=>{s.preventDefault(),w(route("reports.certificate-of-detention.generate"))},E=()=>{const s=new URLSearchParams;s.append("pdl_id",c.pdl_id),s.append("issue_date",c.issue_date),s.append("officer_name",c.officer_name),s.append("officer_position",c.officer_position),window.location.href=route("reports.certificate-of-detention.generate")+"?"+s.toString()},N=()=>{if(!(t!=null&&t.date_committed)||!n)return"";const s=new Date(t.date_committed),a=new Date(n).getTime()-s.getTime(),l=Math.ceil(a/(1e3*60*60*24)),d=Math.floor(l/365),f=Math.floor(l%365/30),p=l%30;let o="";return d>0&&(o+=`${d} year${d>1?"s":""}`),f>0&&(o&&(o+=", "),o+=`${f} month${f>1?"s":""}`),p>0&&(o&&(o+=", and "),o+=`${p} day${p>1?"s":""}`),o||"Less than 1 day"},F=()=>{var i;if(!((i=t==null?void 0:t.cases)!=null&&i.length))return"";const s=t.cases;if(s.length===1){const a=s[0];return`for ${a.crime_committed.toUpperCase()} docketed as ${a.case_number}`}else return s.map((a,l)=>l===s.length-1?`and for ${a.crime_committed.toUpperCase()} docketed as ${a.case_number}`:`for ${a.crime_committed.toUpperCase()} docketed as ${a.case_number}`).join(", ")},h=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",O=()=>{if(!n)return"";const s=new Date(n),i=s.getDate(),a=i===1?"st":i===2?"nd":i===3?"rd":"th",l=s.toLocaleDateString("en-US",{month:"long"}),d=s.getFullYear();return`${i}${a} day of ${l} ${d}`};return e.jsxs(B,{breadcrumbs:G,children:[e.jsx(A,{title:"Certificate of Detention"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"h-8 w-8 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Certificate of Detention"})]}),e.jsxs(b,{children:[e.jsx(v,{children:e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Generate Certificate of Detention"]})}),e.jsx(C,{children:e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"officer_name",className:"text-sm font-medium",children:"Officer Name"}),e.jsx(u,{id:"officer_name",type:"text",value:c.officer_name,onChange:s=>m("officer_name",s.target.value)}),r.officer_name&&e.jsx("p",{className:"text-sm text-red-500",children:r.officer_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"officer_position",className:"text-sm font-medium",children:"Officer Position"}),e.jsx(u,{id:"officer_position",type:"text",value:c.officer_position,onChange:s=>m("officer_position",s.target.value)}),r.officer_position&&e.jsx("p",{className:"text-sm text-red-500",children:r.officer_position})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(x,{htmlFor:"pdl_id",className:"text-sm font-medium",children:["Select PDL ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(U,{onValueChange:T,required:!0,children:[e.jsx(M,{children:e.jsx(k,{placeholder:"Choose a PDL..."})}),e.jsx(V,{children:j.map(s=>e.jsx(q,{value:s.id.toString(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.cases.length," case",s.cases.length!==1?"s":""," â€¢ Earliest: ",h(s.date_committed)]})]})},s.id))})]}),r.pdl_id&&e.jsx("p",{className:"text-sm text-red-500",children:r.pdl_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(x,{htmlFor:"issue_date",className:"text-sm font-medium",children:["Issue Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(u,{id:"issue_date",type:"date",value:n,onChange:s=>L(s.target.value),className:"pl-10",required:!0})]}),r.issue_date&&e.jsx("p",{className:"text-sm text-red-500",children:r.issue_date})]})]}),t&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Selected PDL Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",t.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Total Cases:"})," ",t.cases.length]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Earliest Date Committed:"})," ",h(t.date_committed)]}),n&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Detention Period:"})," ",N()]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("span",{className:"font-medium text-blue-900",children:"Cases:"}),e.jsx("div",{className:"mt-2 space-y-2",children:t.cases.map((s,i)=>e.jsxs("div",{className:"text-sm bg-white p-2 rounded border",children:[e.jsxs("div",{className:"font-medium",children:["Case ",i+1,": ",s.case_number]}),e.jsxs("div",{children:["Crime: ",s.crime_committed]}),e.jsxs("div",{children:["Date Committed: ",h(s.date_committed)]}),e.jsxs("div",{children:["Status: ",s.case_status]})]},s.case_number))})]})]}),r.error&&e.jsx("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:e.jsx("p",{className:"text-red-700",children:r.error})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(I,{onClick:E,disabled:$||!t||!n,variant:"outline",size:"sm",type:"button",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Export PDF"]})})]})})]}),t&&n&&e.jsxs(b,{children:[e.jsx(v,{children:e.jsx(_,{className:"text-lg",children:"Certificate Preview"})}),e.jsx(C,{children:e.jsxs("div",{className:"bg-white border-2 border-gray-200 p-8 rounded-lg",children:[e.jsx("div",{className:"header mb-6",children:e.jsx("div",{className:"logo-section flex items-center justify-between",children:e.jsxs("div",{className:"header-text text-center flex-1 mx-4",children:[e.jsx("div",{className:"republic text-sm font-bold mb-1",children:"Republic of the Philippines"}),e.jsx("div",{className:"province text-sm font-bold mb-1",children:"Province of South Cotabato"}),e.jsx("div",{className:"office text-base font-bold mb-1",children:"OFFICE OF THE PROVINCIAL GOVERNOR"}),e.jsx("div",{className:"unit text-sm font-bold mb-1",children:"Provincial Jail Management Unit"}),e.jsx("div",{className:"location text-sm mb-2",children:"Koronadal City"}),e.jsx("div",{className:"separator border-t border-gray-400 mb-2"}),e.jsx("div",{className:"contact text-xs",children:"Tel #: (083) 228-2445; Email Address: socot.scrdcjail@gmail.com"})]})})}),e.jsx("div",{className:"title text-center mb-6",children:e.jsx("div",{className:"text-lg font-bold uppercase",children:"Certificate of Detention"})}),e.jsx("div",{className:"salutation font-bold underline uppercase mb-4",children:"To Whom It May Concern:"}),e.jsxs("div",{className:"content space-y-3 text-sm leading-relaxed",children:[e.jsxs("p",{className:"text-justify",children:["THIS IS TO CERTIFY that ",e.jsx("span",{className:"highlight uppercase font-bold",children:t.name}),", was committed in this institution on ",e.jsx("span",{className:"highlight font-bold",children:h(t.date_committed)}),", per Commitment Order issued by the ",e.jsx("span",{className:"highlight font-bold",children:"Regional Court Branch 26, Surallah, South Cotabato"})," ",F(),"."]}),e.jsxs("p",{className:"text-justify",children:["It is further certified that said accused was detained for ",e.jsx("span",{className:"highlight font-bold",children:N()})," as to date."]}),e.jsx("p",{className:"text-justify",children:"This certification is issued upon the request of the above-named person for whatever legal purpose it may serve him best."}),e.jsxs("p",{className:"text-justify",children:["Issued this ",e.jsx("span",{className:"highlight font-bold",children:O()}),", ",e.jsx("span",{className:"highlight font-bold",children:"City of Koronadal"}),"."]})]}),e.jsxs("div",{className:"signature-section text-right mt-8",children:[e.jsx("div",{className:"signature-name font-bold uppercase",children:c.officer_name||"JUAN R. LANZADERAS, JR., MPA"}),e.jsx("div",{className:"signature-title text-sm",children:c.officer_position||"Provincial Warden"})]})]})})]})]})]})}export{me as default};
