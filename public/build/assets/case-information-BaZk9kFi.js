import{j as e,m as N,K as S,r as I,L as w,S as M}from"./app-DPTt91av.js";import{D as L}from"./data-table-CTdGZz4Y.js";import{C as k,a as T,b as F,c as K}from"./card-ilNMwNHy.js";import{B as h,I as m}from"./index-DJxly5yP.js";import{L as t}from"./label-CImv6V1y.js";import{D as q,e as A,a as E,b as O,c as P,d as B,f as V,g as H,A as $}from"./app-layout-E5qRpekv.js";import{D as R,a as U,b as z,d as G,c as D}from"./dropdown-menu-pMZ-ad4K.js";import{B as J}from"./badge-Cabq_5mI.js";import{E as Q}from"./ellipsis-CVCoF239.js";import{f as W}from"./format-CpNbv1J2.js";import{A as p,a as g,b as C}from"./alert-Q6kSK62o.js";import{S as f,a as v,b as _,c as y,d as c}from"./select-BHFFiriT.js";import{T as X}from"./textarea-CDRjmwpO.js";import"./table-DovXvqui.js";import"./utils-D7JdpEim.js";import"./users-C0TLK2Z9.js";import"./index-DmqNbwow.js";import"./index-DKSvpoYG.js";import"./index-BBbilLj6.js";import"./index-DD6NDiHT.js";const Y=[{accessorKey:"case_number",header:"Case Number"},{accessorKey:"crime_committed",header:"Crime Committed"},{accessorKey:"date_committed",header:"Date Committed",cell:({row:r})=>W(new Date(r.original.date_committed),"MMM dd, yyyy")},{accessorKey:"time_committed",header:"Time Committed"},{accessorKey:"case_status",header:"Status",cell:({row:r})=>e.jsx(J,{variant:r.original.case_status==="open"?"default":"destructive",children:r.original.case_status.toUpperCase()})},{id:"pdl",header:"PDL",cell:({row:r})=>{const a=r.original.pdl;return a?`${a.fname} ${a.lname}`:`ID: ${r.original.pdl_id}`}},{accessorKey:"security_classification",header:"Security Classification"},{id:"actions",header:"Actions",cell:({row:r})=>{const a=r.original;return e.jsxs(R,{children:[e.jsx(U,{asChild:!0,children:e.jsxs(h,{variant:"ghost",size:"icon",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Q,{className:"h-4 w-4"})]})}),e.jsxs(z,{align:"end",children:[e.jsx(G,{children:"Actions"}),e.jsx(D,{asChild:!0}),e.jsx(D,{onClick:()=>console.log("Delete case",a.case_id),className:"text-red-500",children:"Delete"})]})]})}}];function Z({pdls:r}){const{data:a,setData:i,post:n,processing:o,errors:l,reset:u}=N({case_number:"",crime_committed:"",date_committed:"",time_committed:"",case_status:"open",case_remarks:"",security_classification:"medium",pdl_id:""}),x=s=>{s.preventDefault(),n(route("case-information.store"),{preserveScroll:!0,onSuccess:()=>u()})},{props:d}=S(),b=d.success;return e.jsxs(q,{children:[e.jsx(A,{asChild:!0,children:e.jsx(h,{variant:"outline",children:"Create Case"})}),e.jsxs(E,{className:"sm:max-w-3xl",children:[e.jsxs(O,{children:[e.jsx(P,{children:"Create Case Information"}),e.jsx(B,{children:"Fill in the details for the new case."})]}),Object.keys(l).length>0&&e.jsxs(p,{variant:"destructive",className:"mt-4 mb-4",children:[e.jsx(g,{children:"Unable to process request"}),e.jsx(C,{children:e.jsx("ul",{className:"list-inside list-disc text-sm",children:Object.values(l).map((s,j)=>e.jsx("li",{children:s},j))})})]}),b&&e.jsxs(p,{variant:"default",className:"mb-4",children:[e.jsx(g,{children:"Success"}),e.jsx(C,{children:b})]}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[Object.keys(l).length>0&&e.jsxs(p,{variant:"destructive",children:[e.jsx(g,{children:"Error"}),e.jsx(C,{children:e.jsx("ul",{className:"list-inside list-disc",children:Object.values(l).map((s,j)=>e.jsx("li",{children:s},j))})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"case_number",children:"Case Number"}),e.jsx(m,{id:"case_number",value:a.case_number,onChange:s=>i("case_number",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"crime_committed",children:"Crime Committed"}),e.jsx(m,{id:"crime_committed",value:a.crime_committed,onChange:s=>i("crime_committed",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"date_committed",children:"Date Committed"}),e.jsx(m,{type:"date",value:a.date_committed,onChange:s=>i("date_committed",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"time_committed",children:"Time Committed"}),e.jsx(m,{type:"time",value:a.time_committed,onChange:s=>i("time_committed",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"case_status",children:"Case Status"}),e.jsxs(f,{value:a.case_status,onValueChange:s=>i("case_status",s),required:!0,children:[e.jsx(v,{children:e.jsx(_,{placeholder:"Select status"})}),e.jsxs(y,{children:[e.jsx(c,{value:"open",children:"Open"}),e.jsx(c,{value:"closed",children:"Closed"}),e.jsx(c,{value:"pending",children:"Pending"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"security_classification",children:"Security Classification"}),e.jsxs(f,{value:a.security_classification,onValueChange:s=>i("security_classification",s),required:!0,children:[e.jsx(v,{children:e.jsx(_,{placeholder:"Select classification"})}),e.jsxs(y,{children:[e.jsx(c,{value:"low",children:"Low"}),e.jsx(c,{value:"medium",children:"Medium"}),e.jsx(c,{value:"high",children:"High"}),e.jsx(c,{value:"maximum",children:"Maximum"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"PDL (Person Deprived of Liberty)"}),e.jsxs(f,{value:a.pdl_id,onValueChange:s=>i("pdl_id",s),required:!0,children:[e.jsx(v,{children:e.jsx(_,{placeholder:"Select a PDL"})}),e.jsx(y,{children:r.map(s=>e.jsxs(c,{value:s.id.toString(),children:[s.fname," ",s.lname," (ID: ",s.id,")"]},s.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"case_remarks",children:"Remarks"}),e.jsx(X,{id:"case_remarks",value:a.case_remarks,onChange:s=>i("case_remarks",s.target.value),rows:3})]}),e.jsxs(V,{children:[e.jsx(H,{asChild:!0,children:e.jsx(h,{variant:"outline",children:"Cancel"})}),e.jsx(h,{type:"submit",disabled:o,children:o?"Creating...":"Create Case"})]})]})]})]})}const ee=[{title:"Case Information Management",href:"/case-information"}];function _e(){const{props:r}=S(),{cases:a,pdls:i,filters:n}=r,[o,l]=I.useState((n==null?void 0:n.search)||""),u=()=>{M.get("/case-information",{search:o},{preserveState:!0,replace:!0})},x=d=>{d.key==="Enter"&&u()};return e.jsxs($,{breadcrumbs:ee,children:[e.jsx(w,{title:"Case Information Management"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Case Information Management"}),e.jsxs(k,{children:[e.jsx(T,{children:e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Case Information List"}),e.jsx(Z,{pdls:i})]})})}),e.jsxs(K,{children:[e.jsxs("div",{className:"mb-4 flex items-center space-x-4",children:[e.jsx(t,{htmlFor:"search",className:"text-sm font-medium",children:"Search Cases"}),e.jsx(m,{id:"search",placeholder:"Search by case number, crime, PDL name, etc.",className:"w-64 md:w-96",value:o,onChange:d=>l(d.target.value),onKeyDown:x}),e.jsx(h,{variant:"outline",onClick:u,children:"Search"})]}),e.jsx(L,{data:a,columns:Y})]})]})]})]})}export{_e as default};
