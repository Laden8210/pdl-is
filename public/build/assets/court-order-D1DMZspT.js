import{j as e,m as b,K as _,r as D,L as f,S as N}from"./app-CzpI4ox_.js";import{D as S}from"./data-table-rX_kU61d.js";import{C as O,a as M,b as w,c as k}from"./card-DCXSBpDZ.js";import{I as d}from"./index-BitkHseM.js";import{L as c}from"./label-BL2ktVww.js";import{B as o}from"./button-7HdFF23N.js";import{D as T,a as L,E as K,b as A,c as F,d as y}from"./dropdown-menu-Dhp7spAV.js";import{B as I}from"./badge-mSzPfafc.js";import{f as v}from"./format-CBpsKyOP.js";import{A as p,a as j,b as g}from"./alert-B9xDvDOq.js";import{D as q,e as B,a as E,b as P,c as R,d as $,f as z,g as H,A as V}from"./app-layout-DKJQ3ODg.js";import{S as U,a as G,b as J,c as Q,d as W}from"./select-0t9ti-xy.js";import{T as X}from"./textarea-v71_yW7A.js";import"./table-CgbdoMfa.js";import"./index-D469PI8o.js";import"./index-CqLSiyF-.js";import"./user-BhDnkJWX.js";const Y=[{accessorKey:"court_order_number",header:"Court Order Number"},{accessorKey:"order_type",header:"Order Type",cell:({row:s})=>e.jsx(I,{variant:"secondary",className:"capitalize",children:s.original.order_type})},{accessorKey:"order_date",header:"Order Date",cell:({row:s})=>v(new Date(s.original.order_date),"MMM dd, yyyy")},{accessorKey:"received_date",header:"Received Date",cell:({row:s})=>v(new Date(s.original.received_date),"MMM dd, yyyy")},{accessorKey:"document_type",header:"Document Type"},{accessorKey:"court_branch",header:"Court Branch"},{id:"pdl",header:"PDL",cell:({row:s})=>{const a=s.original.pdl;return a?`${a.fname} ${a.lname}`:`ID: ${s.original.pdl_id}`}},{accessorKey:"remarks",header:"Remarks",cell:({row:s})=>s.original.remarks||e.jsx("span",{className:"text-muted-foreground",children:"N/A"})},{id:"actions",header:"Actions",cell:({row:s})=>{const a=s.original;return e.jsxs(T,{children:[e.jsx(L,{asChild:!0,children:e.jsxs(o,{variant:"ghost",size:"icon",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(K,{className:"h-4 w-4"})]})}),e.jsxs(A,{align:"end",children:[e.jsx(F,{children:"Actions"}),e.jsx(y,{asChild:!0}),e.jsx(y,{onClick:()=>console.log("Delete order",a.court_order_id),className:"text-red-500",children:"Delete"})]})]})}}];function Z({pdls:s}){const{data:a,setData:t,post:m,processing:i,errors:l,reset:u}=b({court_order_number:"",order_type:"",order_date:"",received_date:"",document_type:"",court_branch:"",pdl_id:"",remarks:""}),{props:h}=_(),n=h.success,C=r=>{r.preventDefault(),m(route("court-orders.store"),{preserveScroll:!0,onSuccess:()=>u()})};return e.jsxs(q,{children:[e.jsx(B,{asChild:!0,children:e.jsx(o,{variant:"outline",children:"Create Court Order"})}),e.jsxs(E,{className:"sm:max-w-3xl",children:[e.jsxs(P,{children:[e.jsx(R,{children:"Create Court Order"}),e.jsx($,{children:"Fill in the details for the new court order."})]}),Object.keys(l).length>0&&e.jsxs(p,{variant:"destructive",className:"mt-4 mb-4",children:[e.jsx(j,{children:"Unable to process request"}),e.jsx(g,{children:e.jsx("ul",{className:"list-inside list-disc text-sm",children:Object.values(l).map((r,x)=>e.jsx("li",{children:r},x))})})]}),n&&e.jsxs(p,{variant:"default",className:"mb-4",children:[e.jsx(j,{children:"Success"}),e.jsx(g,{children:n})]}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[Object.keys(l).length>0&&e.jsxs(p,{variant:"destructive",children:[e.jsx(j,{children:"Error"}),e.jsx(g,{children:e.jsx("ul",{className:"list-inside list-disc",children:Object.values(l).map((r,x)=>e.jsx("li",{children:r},x))})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"court_order_number",children:"Court Order Number"}),e.jsx(d,{id:"court_order_number",value:a.court_order_number,onChange:r=>t("court_order_number",r.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"order_type",children:"Order Type"}),e.jsx(d,{id:"order_type",value:a.order_type,onChange:r=>t("order_type",r.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Order Date"}),e.jsx(d,{type:"date",value:a.order_date,onChange:r=>t("order_date",r.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Received Date"}),e.jsx(d,{type:"date",value:a.received_date,onChange:r=>t("received_date",r.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"document_type",children:"Document Type"}),e.jsx(d,{id:"document_type",placeholder:"e.g., PDF, IMS",value:a.document_type,onChange:r=>t("document_type",r.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"court_branch",children:"Court Branch"}),e.jsx(d,{id:"court_branch",value:a.court_branch,onChange:r=>t("court_branch",r.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"PDL (Person Deprived of Liberty)"}),e.jsxs(U,{value:a.pdl_id,onValueChange:r=>t("pdl_id",r),required:!0,children:[e.jsx(G,{children:e.jsx(J,{placeholder:"Select a PDL"})}),e.jsx(Q,{children:s.map(r=>e.jsxs(W,{value:r.id.toString(),children:[r.fname," ",r.lname," (ID: ",r.id,")"]},r.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"remarks",children:"Remarks"}),e.jsx(X,{id:"remarks",value:a.remarks,onChange:r=>t("remarks",r.target.value),rows:3})]}),e.jsxs(z,{children:[e.jsx(H,{asChild:!0,children:e.jsx(o,{variant:"outline",children:"Cancel"})}),e.jsx(o,{type:"submit",disabled:i,children:i?"Creating...":"Create Order"})]})]})]})]})}const ee=[{title:"Court Order Management",href:"/court-order"}];function ye(){const{props:s}=_(),{courtOrders:a,pdls:t,filters:m}=s,[i,l]=D.useState(m.search||""),u=()=>{N.get(route("pdl-management.court-order"),{search:i},{preserveState:!0,replace:!0})},h=n=>{n.key==="Enter"&&u()};return e.jsxs(V,{breadcrumbs:ee,children:[e.jsx(f,{title:"Court Order Management"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Court Order Management"}),e.jsxs(O,{children:[e.jsx(M,{children:e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Court Order List"}),e.jsx(Z,{pdls:t})]})})}),e.jsxs(k,{children:[e.jsxs("div",{className:"mb-4 flex items-center space-x-4",children:[e.jsx(c,{htmlFor:"search",className:"text-sm font-medium",children:"Search Orders"}),e.jsx(d,{id:"search",placeholder:"Search by order number, type, PDL name, etc.",className:"w-64 md:w-96",value:i,onChange:n=>l(n.target.value),onKeyDown:h}),e.jsx(o,{variant:"outline",onClick:u,children:"Search"})]}),e.jsx(S,{data:a,columns:Y})]})]})]})]})}export{ye as default};
