import{m as A,K as S,j as e,S as O,r as D,L as k}from"./app-DnCCZdQP.js";import{D as M,i as F,a as L,b as T,c as V,d as I,g as K,h as U,A as B}from"./app-layout-DFlDjcO4.js";import{C as E,a as H,b as q,c as G}from"./card-C9X8j58u.js";import{B as x}from"./button-Bzh5YXD2.js";import{A as g,b as v,a as C}from"./alert-BdGcwtQT.js";import{I as y}from"./input-CMVIeUot.js";import{L as t}from"./label-hjpTsbbL.js";import{S as r,a as d,b as o,c as h,d as i}from"./select-B7ubXH-Y.js";import{T as w}from"./textarea-B-_ww_NI.js";import{D as z}from"./data-table-C4HpmKCc.js";import{B as b}from"./badge-DVQEiFH_.js";import"./index-BUKMWMlH.js";import"./users-BLuOJmIv.js";import"./user-DPLirZ3g.js";import"./scale-kSXqTHaD.js";import"./eye-DtGDJvfS.js";import"./circle-alert-tHfdt3Eq.js";import"./index-Bwy5C-G7.js";import"./index-CmBb7qlo.js";import"./index-BBKAsmee.js";import"./index-andYFLom.js";import"./table-B7vGkIzC.js";function R(){const{data:s,setData:a,post:c,processing:j,errors:u,reset:n}=A({cell_name:"",capacity:"",gender:"male",cell_type:"isolation",description:"",status:"active",classification:"medium"}),{props:_}=S(),f=_.success,p=l=>{const m=l.target.name;a(m,l.target.value)},N=l=>{l.preventDefault(),c(route("cell.create"),{preserveScroll:!0,onSuccess:()=>n()})};return e.jsxs(M,{children:[e.jsx(F,{asChild:!0,children:e.jsx(x,{variant:"outline",children:"Create Cell"})}),e.jsxs(L,{className:"sm:max-w-2xl",children:[e.jsxs(T,{children:[e.jsx(V,{children:"Create Cell"}),e.jsx(I,{children:"Fill in the details to register a new cell."})]}),e.jsxs("form",{onSubmit:N,className:"mx-auto w-full space-y-4",children:[Object.keys(u).length>0&&e.jsxs(g,{variant:"destructive",className:"mt-4 mb-4",children:[e.jsx(v,{children:"Unable to process request"}),e.jsx(C,{children:e.jsx("ul",{className:"list-inside list-disc text-sm",children:Object.values(u).map((l,m)=>e.jsx("li",{children:l},m))})})]}),f&&e.jsxs(g,{variant:"default",className:"mb-4",children:[e.jsx(v,{children:"Success"}),e.jsx(C,{children:f})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"cell_name",children:"Cell Name"}),e.jsx(y,{id:"cell_name",name:"cell_name",value:s.cell_name,onChange:p})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"capacity",children:"Capacity"}),e.jsx(y,{id:"capacity",name:"capacity",type:"number",value:s.capacity,onChange:p})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Gender"}),e.jsxs(r,{value:s.gender,onValueChange:l=>a("gender",l),children:[e.jsx(d,{children:e.jsx(o,{placeholder:"Select gender"})}),e.jsxs(h,{children:[e.jsx(i,{value:"male",children:"Male"}),e.jsx(i,{value:"female",children:"Female"})]})]})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Status"}),e.jsxs(r,{value:s.status,onValueChange:l=>a("status",l),children:[e.jsx(d,{children:e.jsx(o,{placeholder:"Select status"})}),e.jsxs(h,{children:[e.jsx(i,{value:"active",children:"Active"}),e.jsx(i,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx(t,{htmlFor:"cell_type",children:"Cell Type"}),e.jsxs(r,{value:s.cell_type,onValueChange:l=>a("cell_type",l),children:[e.jsx(d,{children:e.jsx(o,{placeholder:"Select cell type"})}),e.jsxs(h,{children:[e.jsx(i,{value:"isolation",children:"Isolation"}),e.jsx(i,{value:"female",children:"Female"}),e.jsx(i,{value:"male",children:"Male"}),e.jsx(i,{value:"trustee",children:"Trustee"}),e.jsx(i,{value:"kitchen boys",children:"Kitchen Boys"})]})]})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx(t,{htmlFor:"classification",children:"Classification"}),e.jsxs(r,{value:s.classification,onValueChange:l=>a("classification",l),children:[e.jsx(d,{children:e.jsx(o,{placeholder:"Select classification"})}),e.jsxs(h,{children:[e.jsx(i,{value:"maximum",children:"Maximum"}),e.jsx(i,{value:"high",children:"High"}),e.jsx(i,{value:"medium",children:"Medium"}),e.jsx(i,{value:"low",children:"Low"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(t,{htmlFor:"description",children:"Description"}),e.jsx(w,{id:"description",name:"description",value:s.description,onChange:l=>a("description",l.target.value),rows:3,placeholder:"Enter description"})]})]}),e.jsxs(K,{children:[e.jsx(x,{type:"submit",disabled:j,children:"Create"}),e.jsx(U,{asChild:!0,children:e.jsx(x,{variant:"outline",type:"button",children:"Cancel"})})]})]})]})]})}function J({cell:s}){const{data:a,setData:c,post:j,processing:u,errors:n,reset:_}=A({cell_id:s.cell_id,cell_name:s.cell_name,capacity:s.capacity.toString(),gender:s.gender,description:s.description??"",status:s.status,cell_type:s.cell_type??"isolation",classification:s.classification??"medium"}),{props:f}=S(),p=f.success,N=l=>{l.preventDefault(),j(route("cell.update"),{preserveScroll:!0,onSuccess:()=>_()})};return e.jsxs(M,{children:[e.jsx(F,{asChild:!0,children:e.jsx(x,{variant:"outline",size:"sm",children:"Edit"})}),e.jsxs(L,{className:"sm:max-w-2xl",children:[e.jsxs(T,{children:[e.jsx(V,{children:"Update Cell"}),e.jsx(I,{children:"Modify the cell information and save changes."})]}),Object.keys(n).length>0&&e.jsxs(g,{variant:"destructive",className:"mb-4",children:[e.jsx(v,{children:"Unable to process request"}),e.jsx(C,{children:Object.values(n).map((l,m)=>e.jsx("ul",{className:"list-inside list-disc text-sm",children:e.jsx("li",{children:l})},m))})]}),p&&e.jsxs(g,{variant:"default",className:"mb-4",children:[e.jsx(v,{children:"Success"}),e.jsx(C,{children:p})]}),e.jsxs("form",{onSubmit:N,className:"mx-auto w-full space-y-4",children:[Object.keys(n).length>0&&e.jsxs(g,{variant:"destructive",className:"mt-4 mb-4",children:[e.jsx(v,{children:"Unable to process request"}),e.jsx(C,{children:e.jsx("ul",{className:"list-inside list-disc text-sm",children:Object.values(n).map((l,m)=>e.jsx("li",{children:l},m))})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"cell_name",children:"Cell Name"}),e.jsx(y,{id:"cell_name",name:"cell_name",value:a.cell_name,onChange:l=>c("cell_name",l.target.value)})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"capacity",children:"Capacity"}),e.jsx(y,{id:"capacity",name:"capacity",type:"number",value:a.capacity,onChange:l=>c("capacity",l.target.value)})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Gender"}),e.jsxs(r,{value:a.gender,onValueChange:l=>c("gender",l),children:[e.jsx(d,{children:e.jsx(o,{placeholder:"Select gender"})}),e.jsxs(h,{children:[e.jsx(i,{value:"male",children:"Male"}),e.jsx(i,{value:"female",children:"Female"})]})]})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Status"}),e.jsxs(r,{value:a.status,onValueChange:l=>c("status",l),children:[e.jsx(d,{children:e.jsx(o,{placeholder:"Select status"})}),e.jsxs(h,{children:[e.jsx(i,{value:"active",children:"Active"}),e.jsx(i,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx(t,{htmlFor:"description",children:"Description"}),e.jsxs(r,{value:a.cell_type,onValueChange:l=>c("cell_type",l),children:[e.jsx(d,{children:e.jsx(o,{placeholder:"Select cell type"})}),e.jsxs(h,{children:[e.jsx(i,{value:"isolation",children:"Isolation"}),e.jsx(i,{value:"female",children:"Female"}),e.jsx(i,{value:"male",children:"Male"}),e.jsx(i,{value:"trustee",children:"Trustee"}),e.jsx(i,{value:"kitchen boys",children:"Kitchen Boys"})]})]})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx(t,{htmlFor:"classification",children:"Classification"}),e.jsxs(r,{value:a.classification,onValueChange:l=>c("classification",l),children:[e.jsx(d,{children:e.jsx(o,{placeholder:"Select classification"})}),e.jsxs(h,{children:[e.jsx(i,{value:"maximum",children:"Maximum"}),e.jsx(i,{value:"high",children:"High"}),e.jsx(i,{value:"medium",children:"Medium"}),e.jsx(i,{value:"low",children:"Low"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(t,{htmlFor:"description",children:"Description"}),e.jsx(w,{id:"description",name:"description",value:a.description,onChange:l=>c("description",l.target.value),rows:3,placeholder:"Enter description"})]})]}),e.jsxs(K,{children:[e.jsx(x,{type:"submit",disabled:u,children:"Update"}),e.jsx(U,{asChild:!0,children:e.jsx(x,{variant:"outline",type:"button",children:"Cancel"})})]})]})]})]})}function P({cell:s}){const a=()=>{O.get("/admin/pdl-management/cell-activity-log",{cell_id:s.cell_id})};return e.jsx(x,{variant:"outline",size:"sm",onClick:a,children:"View Cell Log"})}const Q=[{accessorKey:"cell_name",header:"Cell Name"},{accessorKey:"description",header:"Description",cell:({row:s})=>s.original.description||e.jsx("span",{className:"text-muted-foreground",children:"N/A"})},{accessorKey:"gender",header:"Gender",cell:({row:s})=>{var a,c;return e.jsx(b,{variant:s.original.gender==="male"?"default":"secondary",children:((a=s.original.gender)==null?void 0:a.charAt(0).toUpperCase())+((c=s.original.gender)==null?void 0:c.slice(1))||"N/A"})}},{accessorKey:"capacity",header:"Capacity"},{id:"available",header:"Available",cell:({row:s})=>Math.max(0,(s.original.capacity??0)-(s.original.assignments_count??0))},{accessorKey:"exceed_capacity",header:"Exceed Capacity",cell:({row:s})=>Math.max(0,(s.original.assignments_count??0)-(s.original.capacity??0))},{id:"occupied",header:"Occupied",cell:({row:s})=>s.original.assignments_count??0},{id:"Classification",header:"Classification",cell:({row:s})=>{var a,c;return e.jsx(b,{variant:s.original.classification==="high"?"default":"secondary",children:((a=s.original.classification)==null?void 0:a.charAt(0).toUpperCase())+((c=s.original.classification)==null?void 0:c.slice(1))||"N/A"})}},{accessorKey:"status",header:"Status",cell:({row:s})=>{var a,c;return e.jsx(b,{variant:s.original.status==="active"?"default":"destructive",children:((a=s.original.status)==null?void 0:a.charAt(0).toUpperCase())+((c=s.original.status)==null?void 0:c.slice(1))||"N/A"})}},{accessorKey:"cell_type",header:"Cell Type",cell:({row:s})=>e.jsx(b,{variant:s.original.cell_type,children:s.original.cell_type?s.original.cell_type.replace(/_/g," ").charAt(0).toUpperCase()+s.original.cell_type.replace(/_/g," ").slice(1).toLowerCase():e.jsx("span",{className:"text-muted-foreground",children:"N/A"})})},{accessorKey:"created_at",header:"Created At",cell:({row:s})=>s.original.created_at?new Date(s.original.created_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):e.jsx("span",{className:"text-muted-foreground",children:"N/A"})},{id:"actions",header:"Actions",cell:({row:s})=>{const a=s.original;return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(J,{cell:{...a,description:a.description??""}}),e.jsx(P,{cell:a})]})}}],W=[{title:"Cell Management",href:"/cell-management"}];function ve(){const{props:s}=S(),{cells:a}=s,[c,j]=D.useState(""),u=D.useMemo(()=>c?a.filter(n=>n.cell_name.toLowerCase().includes(c.toLowerCase())):a,[a,c]);return e.jsxs(B,{breadcrumbs:W,children:[e.jsx(k,{title:"Cell Management"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Cell Management"}),e.jsxs(E,{children:[e.jsx(H,{children:e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Cell List"}),e.jsx(R,{})]})})}),e.jsxs(G,{children:[e.jsxs("div",{className:"mb-4 flex items-center space-x-4",children:[e.jsx(t,{htmlFor:"search",className:"text-sm font-medium",children:"Search Cells"}),e.jsx(y,{id:"search",placeholder:"Search by cell name",className:"w-64",value:c,onChange:n=>j(n.target.value)})]}),e.jsx(z,{data:u,columns:Q})]})]})]})]})}export{ve as default};
