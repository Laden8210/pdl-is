import{K as A,m as T,j as e,L as S}from"./app-Cw60ViYM.js";import{A as N,b as v,a as D}from"./alert-o4LoJfEd.js";import{c as L,B as x}from"./button-CmvSvEjs.js";import{D as F,i as I,a as P,b as R,c as G,d as Y,g as E,h as H}from"./app-layout-DcwmIHce.js";import{I as M}from"./input-Cov4X3e_.js";import{L as C}from"./label-DXzrxJOZ.js";import{C as g}from"./scale-C_Y39GyJ.js";import{n as O,d as U,f as _}from"./format-B3rlCQGj.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],q=L("CalendarDays",$);function z(s,r,i){const[t,d]=O(i==null?void 0:i.in,s,r),l=k(t,d),c=Math.abs(U(t,d));t.setDate(t.getDate()-l*c);const o=+(k(t,d)===-l),m=l*(c-o);return m===0?0:m}function k(s,r){const i=s.getFullYear()-r.getFullYear()||s.getMonth()-r.getMonth()||s.getDate()-r.getDate()||s.getHours()-r.getHours()||s.getMinutes()-r.getMinutes()||s.getSeconds()-r.getSeconds()||s.getMilliseconds()-r.getMilliseconds();return i<0?-1:i>0?1:i}function se({pdl:s}){const{props:r}=A(),i=r.success,{data:t,setData:d,post:l,processing:c,errors:o,reset:m}=T({admission_date:s!=null&&s.admission_date?_(new Date(s.admission_date),"yyyy-MM-dd"):"",release_date:s!=null&&s.release_date?_(new Date(s.release_date),"yyyy-MM-dd"):""}),w=a=>{a.preventDefault(),l(route("admin.custody.update",s.id),{preserveScroll:!0,onSuccess:()=>{m()}})},n=(()=>{if(!t.admission_date)return null;const a=new Date(t.admission_date),h=t.release_date?new Date(t.release_date):new Date,u=z(h,a),j=Math.floor(u/365),f=u%365,p=Math.floor(f/30),b=f%30;return{totalDays:u,years:j,months:p,days:b,formatted:`${j} years ${p} months ${b} days`,isReleased:!!t.release_date}})(),y=a=>a>=1&&a<=2?20:a>=3&&a<=5?23:a>=6&&a<=10?25:a>=11?30:0;return e.jsxs(F,{children:[e.jsx(S,{title:"Custody Management"}),e.jsx(I,{asChild:!0,children:e.jsxs(x,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"Manage Custody"]})}),e.jsx(P,{className:"sm:max-w-[600px]",children:e.jsxs("form",{id:"custody-form",onSubmit:w,children:[e.jsxs(R,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"Custody Management for ",s.fname," ",s.lname]}),e.jsx(Y,{children:"Set admission and release dates to track custody period and calculate time allowances."})]}),Object.keys(o).length>0&&e.jsxs(N,{variant:"destructive",className:"mb-4 mt-4",children:[e.jsx(v,{children:"Unable to process request"}),e.jsx(D,{children:Object.values(o).map((a,h)=>e.jsx("ul",{className:"list-inside list-disc text-sm",children:e.jsx("li",{children:String(a)})},h))})]}),i&&e.jsxs(N,{variant:"default",className:"mb-4 border-green-200 bg-green-50 text-green-800",children:[e.jsx(v,{children:"Success"}),e.jsx(D,{children:i})]}),n&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-md border border-blue-200 mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Custody Period"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-blue-700",children:[e.jsx("strong",{children:"Total Days:"})," ",n.totalDays," days"]}),e.jsxs("p",{className:"text-blue-700",children:[e.jsx("strong",{children:"Period:"})," ",n.formatted]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-blue-700",children:[e.jsx("strong",{children:"Status:"})," ",n.isReleased?"Released":"Currently in custody"]}),e.jsxs("p",{className:"text-blue-700",children:[e.jsx("strong",{children:"GCTA Default:"})," ",y(n.years)," days/month"]})]})]})]}),e.jsxs("div",{className:"grid gap-4 py-2",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(C,{htmlFor:"admission_date",children:"Admission Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(g,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(M,{id:"admission_date",name:"admission_date",type:"date",value:t.admission_date,onChange:a=>d("admission_date",a.target.value),className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(C,{htmlFor:"release_date",children:"Release Date (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(g,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(M,{id:"release_date",name:"release_date",type:"date",value:t.release_date,onChange:a=>d("release_date",a.target.value),className:"pl-10"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Leave empty if PDL is still in custody"})]})]}),n&&n.years>0&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200 mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-800 mb-2",children:"Time Allowance Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"GCTA Eligibility:"})," ",n.years>=1?"Yes":"No"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Default GCTA:"})," ",y(n.years)," days/month"]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"TASTM Eligibility:"})," Yes"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Default TASTM:"})," 15 days/year"]})]})]})]}),e.jsxs(E,{children:[e.jsx(H,{asChild:!0,children:e.jsx(x,{variant:"secondary",children:"Cancel"})}),e.jsx(x,{type:"submit",form:"custody-form",className:"bg-blue-500 hover:bg-blue-600",disabled:c,children:c?"Updating...":"Update Custody Dates"})]})]})})]})}export{se as C};
