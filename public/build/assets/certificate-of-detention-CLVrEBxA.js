import{r as N,m as O,j as e,L as R}from"./app-BoTlE5aI.js";import{C as g,a as b,b as v,c as _}from"./card-CZFfk_eq.js";import{B as A}from"./button-Bj5pH61S.js";import{I as h}from"./input-Ciq5s3C_.js";import{L as o}from"./label-BRAb8jl0.js";import{S as F,a as E,b as M,c as $,d as U}from"./select-CQX8Lk_R.js";import{A as V}from"./app-layout-BJZfQwuR.js";import{F as C}from"./users-Dvtkh9mR.js";import{C as q}from"./scale-BNjvP8Fo.js";import{D as B}from"./download-DUOvWUUZ.js";import"./index-BnHx_bQJ.js";import"./index-D9HIOdVr.js";import"./index-CZybQv5I.js";import"./index-DiKW2_E-.js";import"./index-C7sckkKe.js";import"./user-CJ7gsqVA.js";import"./eye-B19QzQqd.js";const H=[{title:"Reports",href:"/report"},{title:"Certificate of Detention",href:"/report/certificate-of-detention"}];function ce({pdls:p}){const[t,y]=N.useState(null),[n,D]=N.useState(""),{data:i,setData:c,post:S,processing:w,errors:a}=O({pdl_id:"",issue_date:"",officer_name:"",officer_position:""}),P=s=>{const j=p.find(d=>d.id.toString()===s);y(j||null),c("pdl_id",s)},L=s=>{D(s),c("issue_date",s)},I=s=>{s.preventDefault(),S(route("reports.certificate-of-detention.generate"))},T=()=>{const s=new URLSearchParams;s.append("pdl_id",i.pdl_id),s.append("issue_date",i.issue_date),s.append("officer_name",i.officer_name),s.append("officer_position",i.officer_position),window.location.href=route("reports.certificate-of-detention.generate")+"?"+s.toString()},u=()=>{if(!(t!=null&&t.date_committed)||!n)return"";const s=new Date(t.date_committed),d=new Date(n).getTime()-s.getTime(),l=Math.ceil(d/(1e3*60*60*24)),m=Math.floor(l/365),x=Math.floor(l%365/30),f=l%30;let r="";return m>0&&(r+=`${m} year${m>1?"s":""}`),x>0&&(r&&(r+=", "),r+=`${x} month${x>1?"s":""}`),f>0&&(r&&(r+=", and "),r+=`${f} day${f>1?"s":""}`),r||"Less than 1 day"};return e.jsxs(V,{breadcrumbs:H,children:[e.jsx(R,{title:"Certificate of Detention"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"h-8 w-8 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Certificate of Detention"})]}),e.jsxs(g,{children:[e.jsx(b,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Generate Certificate of Detention"]})}),e.jsx(_,{children:e.jsxs("form",{onSubmit:I,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"officer_name",className:"text-sm font-medium",children:"Officer Name"}),e.jsx(h,{id:"officer_name",type:"text",value:i.officer_name,onChange:s=>c("officer_name",s.target.value)}),a.officer_name&&e.jsx("p",{className:"text-sm text-red-500",children:a.officer_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"officer_position",className:"text-sm font-medium",children:"Officer Position"}),e.jsx(h,{id:"officer_position",type:"text",value:i.officer_position,onChange:s=>c("officer_position",s.target.value)}),a.officer_position&&e.jsx("p",{className:"text-sm text-red-500",children:a.officer_position})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"pdl_id",className:"text-sm font-medium",children:["Select PDL ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(F,{onValueChange:P,required:!0,children:[e.jsx(E,{children:e.jsx(M,{placeholder:"Choose a PDL..."})}),e.jsx($,{children:p.map(s=>e.jsx(U,{value:s.id.toString(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.case_number," - ",s.crime_committed]})]})},s.id))})]}),a.pdl_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.pdl_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"issue_date",className:"text-sm font-medium",children:["Issue Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(h,{id:"issue_date",type:"date",value:n,onChange:s=>L(s.target.value),className:"pl-10",required:!0})]}),a.issue_date&&e.jsx("p",{className:"text-sm text-red-500",children:a.issue_date})]})]}),t&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Selected PDL Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",t.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Case Number:"})," ",t.case_number]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Crime Committed:"})," ",t.crime_committed]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date Committed:"})," ",t.date_committed?new Date(t.date_committed).toLocaleDateString():"N/A"]}),n&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("span",{className:"font-medium",children:"Detention Period:"})," ",u()]})]})]}),a.error&&e.jsx("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:e.jsx("p",{className:"text-red-700",children:a.error})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(A,{onClick:()=>T(),disabled:w||!t||!n,variant:"outline",size:"sm",type:"button",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Export PDF"]})})]})})]}),t&&n&&e.jsxs(g,{children:[e.jsx(b,{children:e.jsx(v,{className:"text-lg",children:"Certificate Preview"})}),e.jsx(_,{children:e.jsxs("div",{className:"bg-white border-2 border-gray-200 p-8 rounded-lg",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-sm font-bold mb-1",children:"Republic of the Philippines"}),e.jsx("div",{className:"text-sm font-bold mb-1",children:"Province of South Cotabato"}),e.jsx("div",{className:"text-base font-bold mb-1",children:"OFFICE OF THE PROVINCIAL GOVERNOR"}),e.jsx("div",{className:"text-sm font-bold mb-1",children:"Provincial Jail Management Unit"}),e.jsx("div",{className:"text-sm mb-2",children:"Koronadal City"}),e.jsx("div",{className:"border-t border-gray-400 mb-2"}),e.jsx("div",{className:"text-xs",children:"Tel #: (083) 228-2445; Email Address: socot.scrdcjail@gmail.com"})]}),e.jsx("div",{className:"text-center mb-6",children:e.jsx("div",{className:"text-lg font-bold uppercase",children:"Certificate of Detention"})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"font-bold underline uppercase mb-4",children:"To Whom It May Concern:"}),e.jsxs("div",{className:"space-y-3 text-sm leading-relaxed",children:[e.jsxs("p",{className:"text-justify",children:["THIS IS TO CERTIFY that ",e.jsx("strong",{className:"uppercase",children:t.name}),", was committed in this institution on ",e.jsx("strong",{children:t.date_committed?new Date(t.date_committed).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}),", per Commitment Order issued by the Regional Court Branch 26, Surallah, South Cotabato for the charge of ",e.jsx("strong",{className:"uppercase",children:t.crime_committed})," docketed as ",e.jsx("strong",{children:t.case_number}),"."]}),e.jsxs("p",{className:"text-justify",children:["It is further certified that said accused was detained for ",e.jsx("strong",{children:u()})," as to date."]}),e.jsx("p",{className:"text-justify",children:"This certification is issued upon the request of the above-named person for whatever legal purpose it may serve him best."}),e.jsxs("p",{className:"text-justify",children:["Issued this ",e.jsx("strong",{children:new Date(n).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"})}),",                                         City of Koronadal."]})]})]}),e.jsxs("div",{className:"text-right mt-8",children:[e.jsx("div",{className:"font-bold uppercase",children:i.officer_name??"JUAN R. LANZADERAS, JR., MPA"}),e.jsx("div",{className:"text-sm",children:i.officer_position??"Provincial Warden"})]})]})})]})]})]})}export{ce as default};
