import{r,j as e,S as f,K as y,L as b}from"./app-DVX7GaSC.js";import{A as D}from"./app-layout-CNbu6e02.js";import{B as d}from"./button-D5ogiF7w.js";import{I as S}from"./index-Cp8WyjPi.js";import{B as j}from"./badge-CaP2kD5R.js";import{C as w}from"./card-BaextrJi.js";import{D as k,e as R,a as C,b as q,c as L,d as M,f as V}from"./dialog-D_IBfY_Y.js";import{L as i}from"./label-xi9BGqyF.js";import{T as F}from"./textarea-yYvnZFaM.js";import{f as m}from"./format-CBpsKyOP.js";function I({verification:s,onUpdate:c}){const[l,n]=r.useState(""),[t,a]=r.useState(""),[g,x]=r.useState(!1),[u,h]=r.useState(!1),o=`${s.pdl.fname} ${s.pdl.lname}`,p=s.personnel?`${s.personnel.fname} ${s.personnel.lname}`:"Unknown Personnel",N=()=>{h(!0),f.patch(`/admin/verification/${s.verification_id}/update`,{feedback:l,status:t},{preserveScroll:!0,onSuccess:()=>{c(),x(!1),n(""),a("")},onFinish:()=>h(!1)})};return e.jsx("li",{children:e.jsxs(w,{className:"p-4 h-full flex flex-col",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:o}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Requested by: ",p]})]}),e.jsx(j,{variant:s.status==="approved"?"default":s.status==="rejected"?"destructive":"secondary",children:s.status})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Reason:"})," ",s.reason]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Submitted:"})," ",m(new Date(s.created_at),"MMM dd, yyyy")]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs(k,{open:g,onOpenChange:x,children:[e.jsx(R,{asChild:!0,children:e.jsx(d,{variant:"outline",size:"sm",children:"Review Request"})}),e.jsxs(C,{className:"sm:max-w-xl",children:[e.jsxs(q,{children:[e.jsx(L,{children:"Verification Request Details"}),e.jsxs(M,{children:["Review verification request for ",e.jsx("strong",{children:o})]})]}),e.jsxs("div",{className:"grid gap-4 py-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"PDL Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Full Name:"})," ",o]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Birthdate:"})," ",s.pdl.birthdate?m(new Date(s.pdl.birthdate),"MMM dd, yyyy"):"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Location:"})," ",[s.pdl.brgy,s.pdl.city,s.pdl.province].filter(Boolean).join(", ")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"})," ",e.jsx(j,{children:s.pdl.status||"N/A"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Verification Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Requested by:"})," ",p]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Requested on:"})," ",m(new Date(s.created_at),"MMM dd, yyyy")]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Reason:"})," ",s.reason]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:`feedback-${s.verification_id}`,className:"text-sm font-medium",children:"Your Feedback"}),e.jsx(F,{id:`feedback-${s.verification_id}`,value:l,onChange:v=>n(v.target.value),placeholder:"Enter your feedback or comments...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Update Status"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{variant:t==="approved"?"default":"outline",onClick:()=>a("approved"),children:"Approve"}),e.jsx(d,{variant:t==="rejected"?"destructive":"outline",onClick:()=>a("rejected"),children:"Reject"})]})]})]}),e.jsx(V,{children:e.jsx(d,{type:"button",onClick:N,disabled:u||!t||t==="rejected"&&!l.trim(),children:u?"Submitting...":"Submit Review"})})]})]})})]})})}const $=[{title:"Dashboard",href:"/dashboard"},{title:"Document Verification",href:"/admin/verification"}];function H(){const{verifications:s,filters:c}=y().props,[l,n]=r.useState(c.search||""),t=()=>{f.get("/admin/verification",{search:l},{preserveState:!0})};return e.jsxs(D,{breadcrumbs:$,children:[e.jsx(b,{title:"Document Verification"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Document Verification Requests"}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{id:"search",placeholder:"Search by PDL name or reason...",className:"w-full sm:w-64",value:l,onChange:a=>n(a.target.value),onKeyDown:a=>a.key==="Enter"&&t()}),e.jsx(d,{variant:"outline",onClick:t,children:"Search"})]})})]}),s.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx("p",{className:"text-lg",children:"No verification requests found"}),e.jsx("p",{className:"mt-2",children:"All verification requests will appear here"})]})}):e.jsx("ul",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.map(a=>e.jsx(I,{verification:a,onUpdate:t},a.verification_id))})]})]})}export{H as default};
