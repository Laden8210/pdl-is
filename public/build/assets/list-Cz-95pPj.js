import{K as E,r as d,j as e,S as q,L as V}from"./app-BPxrKEyb.js";import{D as z,i as H,a as K,b as G,c as W,d as Y,A as J}from"./app-layout-B7fNkZnx.js";import{B as l}from"./button-CEMgu7CE.js";import{I as Q}from"./input-CvRLkRAD.js";import{A as X,a as m,b as x,c as u}from"./accordion-CjrmIv4l.js";import{A as L,b as T,a as P}from"./alert-Dy7BgFLC.js";import{B as v}from"./badge-CwiTgdPp.js";import{C as Z}from"./card-MY-iCpFz.js";import{L as y}from"./label-BHAojcQv.js";import{T as I}from"./textarea-C2McMECy.js";import{f as n}from"./format-B3rlCQGj.js";import"./index-Bwm_JLZs.js";import"./users-HviPfwPA.js";import"./user-DBhr3jVO.js";import"./scale-CeClP0FS.js";import"./eye-DJMTalI9.js";import"./circle-alert-BcedVOno.js";import"./index-D55dR1IO.js";function ee({verification:a,onUpdate:h,updateRoute:o="admin.verification.update"}){var k,M,A,R;const{flash:p,errors:b}=E().props,[i,t]=d.useState(""),[c,j]=d.useState(""),[B,f]=d.useState(!1),[_,g]=d.useState(!1),[$,w]=d.useState(!1),[F,D]=d.useState(!1),[S,C]=d.useState(""),N=`${a.pdl.fname} ${a.pdl.lname}`,O=a.personnel?`${a.personnel.fname} ${a.personnel.lname}`:"Unknown Personnel",U=()=>{g(!0),q.patch(route(o,a.verification_id),{feedback:i,status:c},{preserveScroll:!0,onSuccess:()=>{h(),t(""),j(""),f(!1),g(!1),C("Verification status updated successfully!"),w(!0),setTimeout(()=>{w(!1)},5e3)},onError:s=>{g(!1);const r=Object.values(s).join(", ");C(r),D(!0),setTimeout(()=>{D(!1)},5e3)}})};return e.jsx("li",{children:e.jsxs(Z,{className:"flex h-full flex-col p-4",children:[$&&e.jsxs(L,{variant:"default",className:"mb-4",children:[e.jsx(T,{children:"Success"}),e.jsx(P,{children:S})]}),F&&e.jsxs(L,{variant:"destructive",className:"mb-4",children:[e.jsx(T,{children:"Error"}),e.jsx(P,{children:S})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:N}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Requested by: ",O]})]}),e.jsx(v,{variant:a.status==="approved"?"default":a.status==="rejected"?"destructive":"secondary",children:a.status})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Reason:"})," ",a.reason]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Submitted:"})," ",n(new Date(a.created_at),"MMM dd, yyyy")]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs(z,{open:B,onOpenChange:f,children:[e.jsx(H,{asChild:!0,children:e.jsx(l,{variant:"outline",size:"sm",children:"Review Request"})}),e.jsxs(K,{className:"max-h-[80vh] overflow-y-auto sm:max-w-2xl",children:[e.jsxs(G,{children:[e.jsx(W,{children:"Verification Request Details"}),e.jsxs(Y,{children:["Review verification request for ",e.jsx("strong",{children:N})," ",e.jsx("br",{}),e.jsx("br",{}),"Submitted on: ",e.jsx("strong",{children:n(new Date(a.created_at),"MMM dd, yyyy, hh:mm a")})]})]}),e.jsxs("div",{className:"grid gap-4 py-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"PDL Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Full Name:"})," ",N]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Birthdate:"})," ",a.pdl.birthdate?n(new Date(a.pdl.birthdate),"MMM dd, yyyy"):"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Location:"})," ",[a.pdl.brgy,a.pdl.city,a.pdl.province].filter(Boolean).join(", ")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Ethnic Group:"})," ",a.pdl.ethnic_group]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Civil Status:"})," ",a.pdl.civil_status]})]})]}),e.jsxs(X,{type:"multiple",className:"w-full",children:[e.jsxs(m,{value:"physical",children:[e.jsx(x,{className:"text-sm font-medium",children:"Physical Characteristics"}),e.jsx(u,{className:"grid grid-cols-2 gap-2 p-2 text-sm",children:(k=a.pdl.physical_characteristics)!=null&&k.length?a.pdl.physical_characteristics.map((s,r)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Height:"})," ",s.height," cm"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Weight:"})," ",s.weight," kg"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Build:"})," ",s.build]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Complexion:"})," ",s.complexion]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Hair Color:"})," ",s.hair_color]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Eye Color:"})," ",s.eye_color]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"ID Marks:"})," ",s.identification_marks]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Mark Location:"})," ",s.mark_location]})]},r)):e.jsx("div",{className:"text-muted-foreground",children:"No physical characteristics recorded"})})]}),e.jsxs(m,{value:"court",children:[e.jsx(x,{className:"text-sm font-medium",children:"Court Orders"}),e.jsx(u,{className:"space-y-2 p-2",children:(M=a.pdl.court_orders)!=null&&M.length?a.pdl.court_orders.map((s,r)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"})," ",s.order_type]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Order Date:"})," ",n(new Date(s.order_date),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Received:"})," ",n(new Date(s.received_date),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Court Branch:"})," ",s.court.branch_code," -"," ",s.court.branch," - ",s.court.station," - ",s.court.court_type," -"," ",s.court.location]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Document Type:"})," ",s.document_type]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Document:"}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>window.open(`/storage/${s.document_path}`,"_blank"),children:"Preview"})]}),s.remarks&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Remarks:"})," ",s.remarks]})]},r)):e.jsx("div",{className:"text-muted-foreground",children:"No court orders recorded"})})]}),e.jsxs(m,{value:"medical",children:[e.jsx(x,{className:"text-sm font-medium",children:"Medical Records"}),e.jsx(u,{className:"space-y-2 p-2",children:(A=a.pdl.medical_records)!=null&&A.length?a.pdl.medical_records.map((s,r)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date:"})," ",n(new Date(s.date),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Complaint:"})," ",s.complaint]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Findings:"})," ",s.findings]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Prognosis:"})," ",s.prognosis]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Laboratory:"})," ",s.laboratory]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Prescription:"})," ",s.prescription]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Document:"}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>window.open(`/storage/${s.file_path}`,"_blank"),children:"Preview"})]})]},r)):e.jsx("div",{className:"text-muted-foreground",children:"No medical records recorded"})})]}),e.jsxs(m,{value:"cases",children:[e.jsx(x,{className:"text-sm font-medium",children:"Case Information"}),e.jsx(u,{className:"space-y-2 p-2",children:(R=a.pdl.cases)!=null&&R.length?a.pdl.cases.map((s,r)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Case #:"})," ",s.case_number]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"})," ",e.jsx(v,{variant:s.case_status==="open"?"destructive":s.case_status==="closed"?"secondary":"default",children:s.case_status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Crime:"})," ",s.crime_committed]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date Committed:"})," ",n(new Date(s.date_committed),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Time Committed:"})," ",s.time_committed]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Security:"})," ",e.jsx(v,{variant:s.security_classification==="low"?"secondary":s.security_classification==="medium"?"default":(s.security_classification==="high","destructive"),children:s.security_classification})]}),s.case_remarks&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Remarks:"})," ",s.case_remarks]})]},r)):e.jsx("div",{className:"text-muted-foreground",children:"No case information recorded"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:`feedback-${a.verification_id}`,className:"text-sm font-medium",children:"Your Feedback"}),e.jsx(I,{id:`feedback-${a.verification_id}`,value:i,onChange:s=>t(s.target.value),placeholder:"Enter your feedback or comments...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Update Status"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:c==="approved"?"default":"outline",onClick:()=>j("approved"),children:"Approve"}),e.jsx(l,{variant:c==="rejected"?"destructive":"outline",onClick:()=>j("rejected"),children:"Reject"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(l,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(l,{onClick:U,disabled:_||!c||c==="rejected"&&!i.trim(),children:_?"Submitting...":"Submit"})]})]})]})})]})})}const se=[{title:"Dashboard",href:"/dashboard"},{title:"PDL Transfer Requests",href:"/admin/verification"}];function ve(){const{verifications:a,filters:h,userRole:o}=E().props;console.log(a);const[p,b]=d.useState(h.search||""),i=()=>{const t=o==="admin"?"/admin/verification":"/record-officer/verification";q.get(t,{search:p},{preserveState:!0})};return e.jsxs(J,{breadcrumbs:se,children:[e.jsx(V,{title:"PDL Transfer Requests"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"PDL Transfer Requests"}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{id:"search",placeholder:"Search by PDL name or reason...",className:"w-full sm:w-64",value:p,onChange:t=>b(t.target.value),onKeyDown:t=>t.key==="Enter"&&i()}),e.jsx(l,{variant:"outline",onClick:i,children:"Search"})]})})]}),a.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx("p",{className:"text-lg",children:"No verification requests found"}),e.jsx("p",{className:"mt-2",children:"All verification requests will appear here"})]})}):e.jsx("ul",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(t=>e.jsx(ee,{verification:t,onUpdate:i,updateRoute:o==="admin"?"admin.verification.update":"record-officer.verification.update"},t.verification_id))})]})]})}export{ve as default};
