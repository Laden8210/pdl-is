import{r as v,m as y,K as x,j as e,L as D,$ as T}from"./app-DcCWX9mk.js";import{D as C,e as w,a as N,b as A,c as L,d as P,f as $,A as I}from"./app-layout-CwuzIVoQ.js";import{C as _,a as M,b as S,c as B}from"./card-QNSo3ZOw.js";import{T as E,a as O,b as h,c as r,d as k,e as a}from"./table-CgMGOAID.js";import{B as t}from"./index-Cjjgm7p9.js";import{L as F}from"./label-Cwa1UCo1.js";import{T as H}from"./textarea-KTea9Vqs.js";import{A as R,a as V,b as q}from"./alert-CuSR_Jww.js";import{V as G}from"./view-pdl-information-Cajiu2gE.js";import{f as z}from"./format-CpNbv1J2.js";import"./utils-CRZLC5Gr.js";import"./users-C5OIh5tf.js";import"./badge-DDkQ-Sjn.js";import"./accordion-DkYmkr0A.js";import"./eye-Bac0spqN.js";function K({pdl:i}){const[n,s]=v.useState(!1),{data:l,setData:j,post:f,processing:c,errors:d,reset:u}=y({reason:"",pdl_id:i.id}),{props:g}=x(),m=g.success,p=()=>{f(route("pdl-management.transfer",i.id),{preserveScroll:!0,onSuccess:()=>{u(),setTimeout(()=>s(!1),2e3)}})};return e.jsxs(C,{open:n,onOpenChange:s,children:[e.jsx(w,{asChild:!0,children:e.jsx(t,{variant:"ghost",children:"Transfer PDL"})}),e.jsxs(N,{className:"sm:max-w-md",children:[e.jsxs(A,{children:[e.jsx(L,{children:"Confirm PDL Transfer"}),e.jsxs(P,{children:["Transfer ",i.full_name," to another facility"]})]}),e.jsxs("div",{className:"space-y-4 py-2",children:[m&&e.jsxs(R,{variant:"success",className:"mb-4",children:[e.jsx(V,{children:"Success"}),e.jsx(q,{children:m})]}),Object.keys(d).length>0&&e.jsx("div",{className:"rounded-md bg-red-100 p-3 text-red-700",children:e.jsx("ul",{className:"list-disc pl-5",children:Object.values(d).map((o,b)=>e.jsx("li",{children:o},b))})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"reason",children:"Transfer Reason *"}),e.jsx(H,{id:"reason",value:l.reason,onChange:o=>j("reason",o.target.value),placeholder:"Explain the reason for transfer...",rows:3,required:!0})]}),e.jsx("div",{className:"mt-2 rounded bg-yellow-50 p-4",children:e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsx("span",{className:"font-bold",children:"Final Confirmation:"})," This action will immediately initiate the transfer process. Are you sure you want to transfer this PDL?"]})})]}),e.jsxs($,{children:[e.jsx(t,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(t,{type:"button",onClick:p,disabled:c||!l.reason.trim(),className:"bg-red-600 hover:bg-red-700 disabled:opacity-50",children:c?"Processing...":"Confirm Transfer"})]})]})]})}const U=[{title:"PDL Management",href:"/pdl-management"}];function ce(){const{props:i}=x(),{pdls:n}=i;return console.log("PDLs:",n),console.log("PDLs:",n.map(s=>({id:s.id,status:s.verifications.length>0?s.verifications[0].status:"No Verification",reviewed_at:s.verifications.length>0?s.verifications[0].reviewed_at:null,reviewed_by:s.verifications.length>0?s.verifications[0].reviewed_by:null}))),e.jsxs(I,{breadcrumbs:U,children:[e.jsx(D,{title:"Personal Information"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Personal Information"}),e.jsxs(_,{children:[e.jsx(M,{children:e.jsx(S,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Personal Information List"}),e.jsx(T,{href:"/law-enforcement/pdl-management/personal-information/create",className:"flex items-center gap-2 rounded-sm bg-blue-500 px-4 py-2 text-sm text-white hover:bg-blue-600",children:"Add PDL Information"})]})})}),e.jsx(B,{children:e.jsxs(E,{children:[e.jsx(O,{children:e.jsxs(h,{children:[e.jsx(r,{children:"ID"}),e.jsx(r,{children:"Full Name"}),e.jsx(r,{children:"Alias"}),e.jsx(r,{children:"Gender"}),e.jsx(r,{children:"Ethnic Group"}),e.jsx(r,{children:"Civil Status"}),e.jsx(r,{children:"Date of Birth"}),e.jsx(r,{children:"Age"}),e.jsx(r,{children:"Address"}),e.jsx(r,{children:"Added By"}),e.jsx(r,{children:"Transfer Request"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(k,{children:n.map(s=>e.jsxs(h,{children:[e.jsx(a,{children:s.id}),e.jsx(a,{children:`${s.fname} ${s.lname}`}),e.jsx(a,{children:s.alias??"-"}),e.jsx(a,{children:s.gender??"-"}),e.jsx(a,{children:s.ethnic_group??"-"}),e.jsx(a,{children:s.civil_status??"-"}),e.jsx(a,{children:z(new Date(s.birthdate),"MMMM dd, yyyy")}),e.jsx(a,{children:s.age}),e.jsx(a,{children:`${s.brgy??""}, ${s.city??""}, ${s.province??""}`}),e.jsx(a,{children:s.personnel?`${s.personnel.fname} ${s.personnel.lname}`:"â€”"}),e.jsx(a,{children:s.verifications.length>0?s.verifications[0].status.charAt(0).toUpperCase()+s.verifications[0].status.slice(1):"No Verification"}),e.jsx(a,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{pdl:s}),e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>{window.location.href=`/law-enforcement/pdl-management/personal-information/${s.id}`},children:"Edit"}),e.jsx(K,{pdl:s})]})})]},s.id))})]})})]})]})]})}export{ce as default};
