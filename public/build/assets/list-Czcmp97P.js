import{r as c,j as e,S as C,K as S,L as R}from"./app-CJ7vQp5P.js";import{D as A,f as L,a as B,b as T,c as q,d as F,A as V}from"./app-layout-BSADAU8c.js";import{B as n}from"./button-JuNy8yTN.js";import{I as $}from"./input-CoADrEhP.js";import{B as m}from"./badge-Od7wF_tz.js";import{C as O}from"./card-Bk1DPVIi.js";import{L as f}from"./label-BdEYq_MD.js";import{T as P}from"./textarea-lbMZACOl.js";import{A as E,a as x,b as u,c as h}from"./accordion-D-T8XIBG.js";import{f as l}from"./format-CpNbv1J2.js";import"./index-DVLwPzk4.js";import"./users-DI3xSBB3.js";import"./user-KkcFiOwu.js";import"./scale-DNT5gMvW.js";import"./eye-BZq_hsp3.js";function U({verification:a,onUpdate:p}){var y,b,_,D;const[i,o]=c.useState(""),[t,d]=c.useState(""),[k,j]=c.useState(!1),[N,v]=c.useState(!1),g=`${a.pdl.fname} ${a.pdl.lname}`,w=a.personnel?`${a.personnel.fname} ${a.personnel.lname}`:"Unknown Personnel",M=()=>{v(!0),C.patch(`/admin/verification/${a.verification_id}/update`,{feedback:i,status:t},{preserveScroll:!0,onSuccess:()=>{p(),j(!1),o(""),d("")},onFinish:()=>v(!1)})};return e.jsx("li",{children:e.jsxs(O,{className:"p-4 h-full flex flex-col",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:g}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Requested by: ",w]})]}),e.jsx(m,{variant:a.status==="approved"?"default":a.status==="rejected"?"destructive":"secondary",children:a.status})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Reason:"})," ",a.reason]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Submitted:"})," ",l(new Date(a.created_at),"MMM dd, yyyy")]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs(A,{open:k,onOpenChange:j,children:[e.jsx(L,{asChild:!0,children:e.jsx(n,{variant:"outline",size:"sm",children:"Review Request"})}),e.jsxs(B,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(T,{children:[e.jsx(q,{children:"Verification Request Details"}),e.jsxs(F,{children:["Review verification request for ",e.jsx("strong",{children:g})," ",e.jsx("br",{}),e.jsx("br",{}),"Submitted on: ",e.jsx("strong",{children:l(new Date(a.created_at),"MMM dd, yyyy, hh:mm a")})]})]}),e.jsxs("div",{className:"grid gap-4 py-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"PDL Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Full Name:"})," ",g]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Birthdate:"})," ",a.pdl.birthdate?l(new Date(a.pdl.birthdate),"MMM dd, yyyy"):"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Location:"})," ",[a.pdl.brgy,a.pdl.city,a.pdl.province].filter(Boolean).join(", ")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"})," ",e.jsx(m,{children:a.pdl.status||"N/A"})]})]})]}),e.jsxs(E,{type:"multiple",className:"w-full",children:[e.jsxs(x,{value:"physical",children:[e.jsx(u,{className:"text-sm font-medium",children:"Physical Characteristics"}),e.jsx(h,{className:"grid grid-cols-2 gap-2 text-sm p-2",children:(y=a.pdl.physical_characteristics)!=null&&y.length?a.pdl.physical_characteristics.map((s,r)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Height:"})," ",s.height," cm"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Weight:"})," ",s.weight," kg"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Build:"})," ",s.build]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Complexion:"})," ",s.complexion]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Hair Color:"})," ",s.hair_color]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Eye Color:"})," ",s.eye_color]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"ID Marks:"})," ",s.identification_marks]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Mark Location:"})," ",s.mark_location]})]},r)):e.jsx("div",{className:"text-muted-foreground",children:"No physical characteristics recorded"})})]}),e.jsxs(x,{value:"court",children:[e.jsx(u,{className:"text-sm font-medium",children:"Court Orders"}),e.jsx(h,{className:"space-y-2 p-2",children:(b=a.pdl.court_orders)!=null&&b.length?a.pdl.court_orders.map((s,r)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Order #:"})," ",s.court_order_number]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"})," ",s.order_type]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Order Date:"})," ",l(new Date(s.order_date),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Received:"})," ",l(new Date(s.received_date),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Court Branch:"})," ",s.court_branch]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Document Type:"})," ",s.document_type]}),s.remarks&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Remarks:"})," ",s.remarks]})]},r)):e.jsx("div",{className:"text-muted-foreground",children:"No court orders recorded"})})]}),e.jsxs(x,{value:"medical",children:[e.jsx(u,{className:"text-sm font-medium",children:"Medical Records"}),e.jsx(h,{className:"space-y-2 p-2",children:(_=a.pdl.medical_records)!=null&&_.length?a.pdl.medical_records.map((s,r)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date:"})," ",l(new Date(s.date),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Complaint:"})," ",s.complaint]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Findings:"})," ",s.findings]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Prognosis:"})," ",s.prognosis]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Laboratory:"})," ",s.laboratory]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Prescription:"})," ",s.prescription]})]},r)):e.jsx("div",{className:"text-muted-foreground",children:"No medical records recorded"})})]}),e.jsxs(x,{value:"cases",children:[e.jsx(u,{className:"text-sm font-medium",children:"Case Information"}),e.jsx(h,{className:"space-y-2 p-2",children:(D=a.pdl.cases)!=null&&D.length?a.pdl.cases.map((s,r)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Case #:"})," ",s.case_number]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"})," ",e.jsx(m,{variant:s.case_status==="open"?"destructive":s.case_status==="closed"?"secondary":"default",children:s.case_status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Crime:"})," ",s.crime_committed]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date Committed:"})," ",l(new Date(s.date_committed),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Time Committed:"})," ",s.time_committed]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Security:"})," ",e.jsx(m,{variant:s.security_classification==="low"?"secondary":s.security_classification==="medium"?"default":(s.security_classification==="high","destructive"),children:s.security_classification})]}),s.case_remarks&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Remarks:"})," ",s.case_remarks]})]},r)):e.jsx("div",{className:"text-muted-foreground",children:"No case information recorded"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:`feedback-${a.verification_id}`,className:"text-sm font-medium",children:"Your Feedback"}),e.jsx(P,{id:`feedback-${a.verification_id}`,value:i,onChange:s=>o(s.target.value),placeholder:"Enter your feedback or comments...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Update Status"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:t==="approved"?"default":"outline",onClick:()=>d("approved"),children:"Approve"}),e.jsx(n,{variant:t==="rejected"?"destructive":"outline",onClick:()=>d("rejected"),children:"Reject"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(n,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(n,{onClick:M,disabled:N||!t||t==="rejected"&&!i.trim(),children:N?"Submitting...":"Submit"})]})]})]})})]})})}const H=[{title:"Dashboard",href:"/dashboard"},{title:"Document Verification",href:"/admin/verification"}];function re(){const{verifications:a,filters:p}=S().props,[i,o]=c.useState(p.search||""),t=()=>{C.get("/admin/verification",{search:i},{preserveState:!0})};return e.jsxs(V,{breadcrumbs:H,children:[e.jsx(R,{title:"Document Verification"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Document Verification Requests"}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{id:"search",placeholder:"Search by PDL name or reason...",className:"w-full sm:w-64",value:i,onChange:d=>o(d.target.value),onKeyDown:d=>d.key==="Enter"&&t()}),e.jsx(n,{variant:"outline",onClick:t,children:"Search"})]})})]}),a.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx("p",{className:"text-lg",children:"No verification requests found"}),e.jsx("p",{className:"mt-2",children:"All verification requests will appear here"})]})}):e.jsx("ul",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(d=>e.jsx(U,{verification:d,onUpdate:t},d.verification_id))})]})]})}export{re as default};
