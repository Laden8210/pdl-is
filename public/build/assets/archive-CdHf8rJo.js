import{m as M,r as A,j as e,L as B}from"./app-CJ7vQp5P.js";import{B as p}from"./button-JuNy8yTN.js";import{C as h,a as o,b as x,c as m,d as y}from"./card-Bk1DPVIi.js";import{C,I as _}from"./input-CoADrEhP.js";import{L as d}from"./label-BdEYq_MD.js";import{T as D}from"./textarea-lbMZACOl.js";import{S as b,a as P,b as S,c as w,d as L}from"./select-BbZpZNvE.js";import{A as c,a as n}from"./alert-DvxkmZw_.js";import{A as J,e as O}from"./app-layout-BSADAU8c.js";import{T as U}from"./triangle-alert-DTPyMyG_.js";import{U as V}from"./user-KkcFiOwu.js";import{C as F}from"./scale-DNT5gMvW.js";import{U as q}from"./upload-jXUdj26m.js";import"./index-DVLwPzk4.js";import"./index-BgOt399W.js";import"./users-DI3xSBB3.js";import"./eye-BZq_hsp3.js";function he({pdl:s,archiveStatusOptions:f,existingCaseNumbers:T}){var g;const{data:i,setData:t,post:u,processing:l,errors:r}=M({archive_status:s.archive_status||"",archive_reason:s.archive_reason||"",archive_case_number:s.archive_case_number||"",archive_court_order:null,archive_notes:s.archive_notes||"",admission_date:s.admission_date?s.admission_date.split("T")[0]:"",release_date:s.release_date?s.release_date.split("T")[0]:""}),[$,G]=A.useState(!1),[H,E]=A.useState(!1),R=()=>{u(route("pdl.archive",s.id),{onSuccess:()=>{G(!1)}})},k=()=>{u(route("pdl.custody-dates",s.id),{onSuccess:()=>{E(!1)}})},I=()=>{u(route("pdl.unarchive",s.id))},j=s.archived_at!==null;return e.jsxs(J,{children:[e.jsx(B,{title:`Archive PDL - ${s.fname} ${s.lname}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"PDL Archive Management"}),e.jsxs("p",{className:"text-muted-foreground",children:["Manage archiving and custody dates for ",s.fname," ",s.lname]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:j?e.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[e.jsx(C,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Archived"})]}):e.jsxs("div",{className:"flex items-center space-x-2 text-orange-600",children:[e.jsx(U,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Active"})]})})]}),e.jsxs(h,{children:[e.jsx(o,{children:e.jsx(x,{children:"PDL Information"})}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-medium",children:"Name:"}),e.jsxs("span",{children:[s.fname," ",s.lname]}),s.alias&&e.jsxs("span",{className:"text-muted-foreground",children:["(",s.alias,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Age:"}),e.jsx("span",{children:s.age||"N/A"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Gender:"}),e.jsx("span",{children:s.gender||"N/A"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Location:"}),e.jsxs("span",{children:[s.brgy,", ",s.city,", ",s.province]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Cases:"}),e.jsx("span",{children:((g=s.cases)==null?void 0:g.length)||0})]}),j&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Archived:"}),e.jsx("span",{children:new Date(s.archived_at).toLocaleDateString()})]})]})]})})]}),j&&e.jsxs(h,{children:[e.jsx(o,{children:e.jsx(x,{children:"Archive Information"})}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Archive Status:"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm",children:f[s.archive_status]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Archive Date:"}),e.jsx("span",{children:new Date(s.archived_at).toLocaleString()})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Reason:"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.archive_reason})]}),s.archive_notes&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Notes:"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.archive_notes})]})]})]})})]}),e.jsxs(h,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"Custody Dates"}),e.jsx(y,{children:"Manage admission and release dates for this PDL"})]}),e.jsxs(m,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"admission_date",children:"Admission Date"}),e.jsx(_,{id:"admission_date",type:"date",value:i.admission_date,onChange:a=>t("admission_date",a.target.value)}),r.admission_date&&e.jsx(c,{children:e.jsx(n,{children:r.admission_date})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"release_date",children:"Release Date"}),e.jsx(_,{id:"release_date",type:"date",value:i.release_date,onChange:a=>t("release_date",a.target.value)}),r.release_date&&e.jsx(c,{children:e.jsx(n,{children:r.release_date})})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(p,{onClick:k,disabled:l,children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),l?"Updating...":"Update Custody Dates"]})})]})]}),e.jsxs(h,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"Archive Actions"}),e.jsx(y,{children:"Archive or unarchive this PDL record"})]}),e.jsx(m,{children:j?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(c,{children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx(n,{children:"This PDL record is currently archived. You can unarchive it if needed."})]}),e.jsxs(p,{onClick:I,disabled:l,variant:"outline",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),l?"Unarchiving...":"Unarchive PDL"]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"archive_status",children:"Archive Status *"}),e.jsxs(b,{value:i.archive_status,onValueChange:a=>t("archive_status",a),children:[e.jsx(P,{children:e.jsx(S,{placeholder:"Select archive status"})}),e.jsx(w,{children:Object.entries(f).map(([a,v])=>e.jsx(L,{value:a,children:v},a))})]}),r.archive_status&&e.jsx(c,{children:e.jsx(n,{children:r.archive_status})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"archive_case_number",children:"Case Number *"}),e.jsxs(b,{value:i.archive_case_number,onValueChange:a=>t("archive_case_number",a),children:[e.jsx(P,{children:e.jsx(S,{placeholder:"Select case number"})}),e.jsx(w,{children:T.map(a=>e.jsx(L,{value:a,children:a},a))})]}),r.archive_case_number&&e.jsx(c,{children:e.jsx(n,{children:r.archive_case_number})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"archive_court_order",children:"Court Order Document *"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{id:"archive_court_order",type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:a=>{var N;const v=(N=a.target.files)==null?void 0:N[0];v&&t("archive_court_order",v)},className:"flex-1"}),e.jsx(q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Upload PDF, JPG, JPEG, or PNG file (max 10MB)"}),r.archive_court_order&&e.jsx(c,{children:e.jsx(n,{children:r.archive_court_order})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"archive_reason",children:"Reason for Archiving *"}),e.jsx(D,{id:"archive_reason",placeholder:"Enter the reason for archiving this PDL record...",value:i.archive_reason,onChange:a=>t("archive_reason",a.target.value),rows:3}),r.archive_reason&&e.jsx(c,{children:e.jsx(n,{children:r.archive_reason})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"archive_notes",children:"Additional Notes (Optional)"}),e.jsx(D,{id:"archive_notes",placeholder:"Enter any additional notes...",value:i.archive_notes,onChange:a=>t("archive_notes",a.target.value),rows:2}),r.archive_notes&&e.jsx(c,{children:e.jsx(n,{children:r.archive_notes})})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(p,{onClick:R,disabled:l||!i.archive_status||!i.archive_reason||!i.archive_case_number||!i.archive_court_order,children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),l?"Archiving...":"Archive PDL"]})})]})})]}),e.jsxs(h,{children:[e.jsx(o,{children:e.jsx(x,{children:"Archive Requirements"})}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Archive Status:"})," Select the appropriate status from the dropdown"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Case Number:"})," Must match an existing case number for this PDL"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Court Order:"})," Upload PDF, JPG, JPEG, or PNG document (required)"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Reason for Archiving:"})," Provide a detailed reason for archiving this record"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Date and Time:"})," Automatically generated by the system upon archiving"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Additional Notes:"})," Optional field for any additional remarks"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Custody Dates:"})," Set admission and release dates for proper record keeping"]})]})})]})]})]})}export{he as default};
