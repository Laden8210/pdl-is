import{K as X,r as g,m as f,j as e,L as Z}from"./app-CJ7vQp5P.js";import{B as u}from"./button-JuNy8yTN.js";import{C as ee,a as se,b as re,c as ae}from"./card-Bk1DPVIi.js";import{T as de,a as ce,b as $,c as t,d as te,e as l}from"./table-BJRyvAzJ.js";import{A as le,D as S,a as E,b as A,c as O,d as T}from"./app-layout-BSADAU8c.js";import{C as I,a as j,I as o}from"./input-CoADrEhP.js";import{L as d}from"./label-BdEYq_MD.js";import{T as w}from"./textarea-lbMZACOl.js";import{S as ne,a as ie,b as oe,c as he,d as h}from"./select-BbZpZNvE.js";import{A as n,a as i}from"./alert-DvxkmZw_.js";import{V as me}from"./view-pdl-information-BasG73r_.js";import{g as xe}from"./dateUtils-Iw3XMDmk.js";import{S as ue}from"./square-pen-CWvtiuhO.js";import{U as je}from"./upload-jXUdj26m.js";import{f as pe}from"./format-CpNbv1J2.js";import"./index-DVLwPzk4.js";import"./users-DI3xSBB3.js";import"./user-KkcFiOwu.js";import"./scale-DNT5gMvW.js";import"./eye-BZq_hsp3.js";import"./index-BgOt399W.js";import"./badge-Od7wF_tz.js";import"./accordion-D-T8XIBG.js";const _e=[{title:"PDL Management",href:"/pdl-management"}];function $e(){var U;const{props:F}=X(),{verifications:v,flash:c}=F;console.log("Verifications:",v);const{auth:N,errors:r}=F,R=((U=N==null?void 0:N.user)==null?void 0:U.position)==="admin",[a,ve]=g.useState(null),[H,b]=g.useState(!1),[G,C]=g.useState(!1),[J,D]=g.useState(!1),{data:k,setData:y,post:Q,processing:L}=f({admission_date:"",release_date:""}),{data:p,setData:x,post:Y,processing:P}=f({court_order_number:"",order_type:"",order_date:"",received_date:"",remarks:"",document_type:"",court_branch:""}),{data:m,setData:_,post:q,processing:B}=f({archive_status:"",archive_reason:"",archive_case_number:"",archive_court_order:null,archive_notes:""}),z=()=>{a&&Q(route("pdl.custody-dates",a.id),{onSuccess:()=>{b(!1),y({admission_date:"",release_date:""})},onError:s=>{console.error("Custody dates update errors:",s)}})},K=()=>{a&&Y(route("pdl.court-order-update",a.id),{onSuccess:()=>{C(!1),x({court_order_number:"",order_type:"",order_date:"",received_date:"",remarks:"",document_type:"",court_branch:""})},onError:s=>{console.error("Court order update errors:",s)}})},W=()=>{a&&q(route("pdl.archive",a.id),{onSuccess:()=>{D(!1),_({archive_status:"",archive_reason:"",archive_case_number:"",archive_court_order:null,archive_notes:""})},onError:s=>{console.error("Archive errors:",s)}})};return console.log("Is Admin:",R),e.jsxs(le,{breadcrumbs:_e,children:[e.jsx(Z,{title:"Personal Information"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Personal Information"}),e.jsxs(ee,{children:[e.jsx(se,{children:e.jsx(re,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{children:"Personal Information List"})})})}),e.jsx(ae,{children:e.jsxs(de,{children:[e.jsx(ce,{children:e.jsxs($,{children:[e.jsx(t,{children:"ID"}),e.jsx(t,{children:"Full Name"}),e.jsx(t,{children:"Alias"}),e.jsx(t,{children:"Gender"}),e.jsx(t,{children:"Ethnic Group"}),e.jsx(t,{children:"Civil Status"}),e.jsx(t,{children:"Date of Birth"}),e.jsx(t,{children:"Age"}),e.jsx(t,{children:"Address"}),e.jsx(t,{children:"Added By"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(te,{children:v==null?void 0:v.map(s=>s.pdl&&e.jsxs($,{children:[e.jsx(l,{children:s.pdl.id}),e.jsx(l,{children:`${s.pdl.fname} ${s.pdl.lname}`}),e.jsx(l,{children:s.pdl.alias??"-"}),e.jsx(l,{children:s.pdl.gender??"-"}),e.jsx(l,{children:s.pdl.ethnic_group??"-"}),e.jsx(l,{children:s.pdl.civil_status??"-"}),e.jsx(l,{children:pe(new Date(s.pdl.birthdate),"MMMM dd, yyyy")}),e.jsx(l,{children:xe(s.pdl.birthdate)}),e.jsx(l,{children:`${s.pdl.brgy??""}, ${s.pdl.city??""}, ${s.pdl.province??""}`}),e.jsx(l,{children:s.pdl.personnel?`${s.pdl.personnel.fname} ${s.pdl.personnel.lname}`:"â€”"}),e.jsxs(l,{className:"space-x-1",children:[e.jsx(me,{pdl:s.pdl}),!R&&e.jsxs(u,{variant:"ghost",size:"sm",onClick:()=>{window.location.href=`/record-officer/pdl-management/personal-information/${s.pdl.id}`},children:[e.jsx(ue,{className:"h-4 w-4 mr-1"}),"Edit"]})]})]},s.pdl.id))})]})})]}),e.jsx(S,{open:H,onOpenChange:b,children:e.jsxs(E,{children:[e.jsxs(A,{children:[e.jsx(O,{children:"Manage Custody Dates"}),e.jsxs(T,{children:["Update admission and release dates for ",a==null?void 0:a.fname," ",a==null?void 0:a.lname]})]}),e.jsxs("div",{className:"space-y-4",children:[(c==null?void 0:c.success)&&e.jsxs(n,{className:"border-green-200 bg-green-50",children:[e.jsx(I,{className:"h-4 w-4 text-green-600"}),e.jsx(i,{className:"text-green-800",children:c.success})]}),(r==null?void 0:r.admission_date)&&e.jsxs(n,{className:"border-red-200 bg-red-50",children:[e.jsx(j,{className:"h-4 w-4 text-red-600"}),e.jsx(i,{className:"text-red-800",children:r.admission_date})]}),(r==null?void 0:r.release_date)&&e.jsxs(n,{className:"border-red-200 bg-red-50",children:[e.jsx(j,{className:"h-4 w-4 text-red-600"}),e.jsx(i,{className:"text-red-800",children:r.release_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"admission_date",children:"Admission Date"}),e.jsx(o,{id:"admission_date",type:"date",value:k.admission_date,onChange:s=>y("admission_date",s.target.value),className:r!=null&&r.admission_date?"border-red-500":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"release_date",children:"Release Date"}),e.jsx(o,{id:"release_date",type:"date",value:k.release_date,onChange:s=>y("release_date",s.target.value),className:r!=null&&r.release_date?"border-red-500":""})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(u,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsx(u,{onClick:z,disabled:L,children:L?"Updating...":"Update Dates"})]})]})]})}),e.jsx(S,{open:G,onOpenChange:C,children:e.jsxs(E,{children:[e.jsxs(A,{children:[e.jsx(O,{children:"Update Court Order"}),e.jsxs(T,{children:["Update court order information for ",a==null?void 0:a.fname," ",a==null?void 0:a.lname]})]}),e.jsxs("div",{className:"space-y-4",children:[(c==null?void 0:c.success)&&e.jsxs(n,{className:"border-green-200 bg-green-50",children:[e.jsx(I,{className:"h-4 w-4 text-green-600"}),e.jsx(i,{className:"text-green-800",children:c.success})]}),(r==null?void 0:r.court_order_number)&&e.jsxs(n,{className:"border-red-200 bg-red-50",children:[e.jsx(j,{className:"h-4 w-4 text-red-600"}),e.jsx(i,{className:"text-red-800",children:r.court_order_number})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"court_order_number",children:"Court Order Number"}),e.jsx(o,{id:"court_order_number",value:p.court_order_number,onChange:s=>x("court_order_number",s.target.value),className:r!=null&&r.court_order_number?"border-red-500":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"order_type",children:"Order Type"}),e.jsx(o,{id:"order_type",value:p.order_type,onChange:s=>x("order_type",s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"order_date",children:"Order Date"}),e.jsx(o,{id:"order_date",type:"date",value:p.order_date,onChange:s=>x("order_date",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"received_date",children:"Received Date"}),e.jsx(o,{id:"received_date",type:"date",value:p.received_date,onChange:s=>x("received_date",s.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"court_branch",children:"Court Branch"}),e.jsx(o,{id:"court_branch",value:p.court_branch,onChange:s=>x("court_branch",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"remarks",children:"Remarks"}),e.jsx(w,{id:"remarks",value:p.remarks,onChange:s=>x("remarks",s.target.value),rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(u,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),e.jsx(u,{onClick:K,disabled:P,children:P?"Updating...":"Update Court Order"})]})]})]})}),e.jsx(S,{open:J,onOpenChange:D,children:e.jsxs(E,{className:"max-w-2xl",children:[e.jsxs(A,{children:[e.jsx(O,{children:"Archive PDL"}),e.jsxs(T,{children:["Archive ",a==null?void 0:a.fname," ",a==null?void 0:a.lname," with court order information"]})]}),e.jsxs("div",{className:"space-y-4",children:[(c==null?void 0:c.success)&&e.jsxs(n,{className:"border-green-200 bg-green-50",children:[e.jsx(I,{className:"h-4 w-4 text-green-600"}),e.jsx(i,{className:"text-green-800",children:c.success})]}),(r==null?void 0:r.archive_status)&&e.jsxs(n,{className:"border-red-200 bg-red-50",children:[e.jsx(j,{className:"h-4 w-4 text-red-600"}),e.jsx(i,{className:"text-red-800",children:r.archive_status})]}),(r==null?void 0:r.archive_reason)&&e.jsxs(n,{className:"border-red-200 bg-red-50",children:[e.jsx(j,{className:"h-4 w-4 text-red-600"}),e.jsx(i,{className:"text-red-800",children:r.archive_reason})]}),(r==null?void 0:r.archive_case_number)&&e.jsxs(n,{className:"border-red-200 bg-red-50",children:[e.jsx(j,{className:"h-4 w-4 text-red-600"}),e.jsx(i,{className:"text-red-800",children:r.archive_case_number})]}),(r==null?void 0:r.archive_court_order)&&e.jsxs(n,{className:"border-red-200 bg-red-50",children:[e.jsx(j,{className:"h-4 w-4 text-red-600"}),e.jsx(i,{className:"text-red-800",children:r.archive_court_order})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"archive_status",children:"Archive Status *"}),e.jsxs(ne,{value:m.archive_status,onValueChange:s=>_("archive_status",s),children:[e.jsx(ie,{className:r!=null&&r.archive_status?"border-red-500":"",children:e.jsx(oe,{placeholder:"Select archive status"})}),e.jsxs(he,{children:[e.jsx(h,{value:"BONDED",children:"BONDED"}),e.jsx(h,{value:"SERVED_SENTENCE",children:"SERVED SENTENCE"}),e.jsx(h,{value:"PROV_DISMISSED",children:"PROV. DISMISSED"}),e.jsx(h,{value:"DISMISSED",children:"DISMISSED"}),e.jsx(h,{value:"TRANSFER_TO_OTHER_FACILITY",children:"TRANSFER TO OTHER FACILITY"}),e.jsx(h,{value:"DAPECOL",children:"DAPECOL"}),e.jsx(h,{value:"PROBATION",children:"PROBATION"}),e.jsx(h,{value:"DECEASED",children:"DECEASED"}),e.jsx(h,{value:"ACQUITTED",children:"ACQUITTED"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"archive_case_number",children:"Case Number *"}),e.jsx(o,{id:"archive_case_number",value:m.archive_case_number,onChange:s=>_("archive_case_number",s.target.value),placeholder:"Enter case number",className:r!=null&&r.archive_case_number?"border-red-500":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"archive_court_order",children:"Court Order Document *"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"archive_court_order",type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:s=>{var V;const M=(V=s.target.files)==null?void 0:V[0];M&&_("archive_court_order",M)},className:`flex-1 ${r!=null&&r.archive_court_order?"border-red-500":""}`}),e.jsx(je,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Upload PDF, JPG, JPEG, or PNG file (max 10MB)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"archive_reason",children:"Reason for Archiving *"}),e.jsx(w,{id:"archive_reason",placeholder:"Enter the reason for archiving this PDL record...",value:m.archive_reason,onChange:s=>_("archive_reason",s.target.value),rows:3,className:r!=null&&r.archive_reason?"border-red-500":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"archive_notes",children:"Additional Notes (Optional)"}),e.jsx(w,{id:"archive_notes",placeholder:"Enter any additional notes...",value:m.archive_notes,onChange:s=>_("archive_notes",s.target.value),rows:2})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(u,{variant:"outline",onClick:()=>D(!1),children:"Cancel"}),e.jsx(u,{onClick:W,disabled:B||!m.archive_status||!m.archive_reason||!m.archive_case_number||!m.archive_court_order,children:B?"Archiving...":"Archive PDL"})]})]})]})})]})]})}export{$e as default};
