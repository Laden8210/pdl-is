import{j as e,K as b,m as y,r as f,L as C,S as L}from"./app-uc6TJGc3.js";import{D as w,e as S,a as D,b as F,c as U,d as A,f as k,g as q,A as _}from"./app-layout-Bd0CnOES.js";import{D as R}from"./data-table-B5Ns2e-9.js";import{c as M,B as m}from"./button-DL_-RBt4.js";import{I as d}from"./index-Ccm-RLGB.js";import{L as l}from"./label-DPFnUvdW.js";import{A as p,a as v,b as N}from"./alert-CNO0x5GU.js";import{S as T,a as E,b as K,c as O,d as j}from"./select-9bBlCJrZ.js";import"./user-bziGaaEG.js";import"./table-XCOjqIEw.js";import"./index-CtmwyAQp.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],V=M("Archive",I);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],P=M("Pencil",z);function $({page:s,totalPages:c,onPageChange:o}){if(c<=1)return null;const i=Array.from({length:c},(a,t)=>t+1);return e.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 mt-4",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>o(s-1),disabled:s===1,children:"Previous"}),i.map(a=>e.jsx(m,{variant:a===s?"default":"outline",size:"sm",onClick:()=>o(a),children:a},a)),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>o(s+1),disabled:s===c,children:"Next"})]})}function B({user:s}){const{props:c}=b(),o=c.success,{delete:i,processing:a,errors:t}=y({}),h=u=>{u.preventDefault(),i(route("user-management.destroy",s.id),{preserveScroll:!0,onSuccess:()=>{}})};return e.jsxs(w,{children:[e.jsx(S,{asChild:!0,children:e.jsxs(m,{onSelect:u=>u.preventDefault(),className:" hover:bg-red-400",variant:"outline",children:[e.jsx(V,{}),"Archive"]})}),e.jsx(D,{className:"sm:max-w-[425px]",children:e.jsxs("form",{id:"delete-user-form",onSubmit:h,children:[e.jsxs(F,{children:[e.jsx(U,{children:"Delete User"}),e.jsxs(A,{children:["Are you sure you want to archive ",s.fname," ",s.lname,"?"]})]}),Object.keys(t).length>0&&e.jsxs(p,{variant:"destructive",className:"mt-4 mb-4",children:[e.jsx(v,{children:"Unable to process request"}),e.jsx(N,{children:Object.values(t).map((u,x)=>e.jsx("ul",{className:"list-inside list-disc text-sm",children:e.jsx("li",{children:u})},x))})]}),o&&e.jsxs(p,{variant:"default",className:"mb-4",children:[e.jsx(v,{children:"Success"}),e.jsx(N,{children:o})]}),e.jsx("div",{className:"py-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"This action cannot be undone. This will permanently delete the user account."})}),e.jsxs(k,{children:[e.jsx(q,{asChild:!0,children:e.jsx(m,{variant:"secondary",children:"Cancel"})}),e.jsx(m,{type:"submit",form:"delete-user-form",variant:"destructive",disabled:a,children:a?"Deleting...":"Delete User"})]})]})})]})}function H({user:s}){const c=f.useRef(null),{props:o}=b(),i=o.success,{data:a,setData:t,put:h,processing:u,errors:x}=y({firstName:s.fname,middleName:s.mname||"",lastName:s.lname,contactNumber:s.contactnum,avatar:null,username:s.username,password:"",position:s.position,agency:s.agency});f.useEffect(()=>{t({firstName:s.fname,middleName:s.mname||"",lastName:s.lname,contactNumber:s.contactnum,avatar:null,username:s.username,password:"",position:s.position,agency:s.agency})},[s]);const n=r=>{r.preventDefault(),h(route("user-management.update",s.id),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{t("password","")}})};return e.jsxs(w,{children:[e.jsx(C,{title:"Edit User"}),e.jsx(S,{asChild:!0,children:e.jsxs(m,{variant:"outline",className:"text-start",children:[e.jsx(P,{}),"Edit"]})}),e.jsx(D,{className:"sm:max-w-3xl",children:e.jsxs("form",{id:"edit-user-form",onSubmit:n,children:[e.jsxs(F,{children:[e.jsx(U,{children:"Edit User"}),e.jsx(A,{children:"Update the user details below."})]}),Object.keys(x).length>0&&e.jsxs(p,{variant:"destructive",className:"mt-4 mb-4",children:[e.jsx(v,{children:"Unable to process request"}),e.jsx(N,{children:Object.values(x).map((r,g)=>e.jsx("ul",{className:"list-inside list-disc text-sm",children:e.jsx("li",{children:r})},g))})]}),i&&e.jsxs(p,{variant:"default",className:"mb-4",children:[e.jsx(v,{children:"Success"}),e.jsx(N,{children:i})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 py-2",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx(l,{htmlFor:"firstName",children:"First Name"}),e.jsx(d,{id:"firstName",name:"firstName",value:a.firstName,onChange:r=>t("firstName",r.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"middleName",children:"Middle Name"}),e.jsx(d,{id:"middleName",name:"middleName",value:a.middleName,onChange:r=>t("middleName",r.target.value)})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{htmlFor:"lastName",children:"Last Name"}),e.jsx(d,{id:"lastName",name:"lastName",value:a.lastName,onChange:r=>t("lastName",r.target.value),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{htmlFor:"contactNumber",children:"Contact Number"}),e.jsx(d,{id:"contactNumber",name:"contactNumber",value:a.contactNumber,onChange:r=>t("contactNumber",r.target.value),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{htmlFor:"avatar",children:"Avatar"}),e.jsxs("div",{className:"flex items-center gap-4",children:[s.avatar&&e.jsx("img",{src:`/storage/${s.avatar}`,alt:"Current avatar",className:"h-12 w-12 rounded-full object-cover"}),e.jsx(d,{id:"avatar",name:"avatar",type:"file",ref:c,onChange:r=>{var g;return t("avatar",((g=r.target.files)==null?void 0:g[0])??null)},accept:"image/*"})]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{htmlFor:"username",children:"Username"}),e.jsx(d,{id:"username",name:"username",value:a.username,onChange:r=>t("username",r.target.value),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{htmlFor:"password",children:"Password (leave blank to keep current)"}),e.jsx(d,{id:"password",name:"password",type:"password",value:a.password,onChange:r=>t("password",r.target.value),placeholder:"Leave blank to keep current password"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{htmlFor:"userType",children:"User Type"}),e.jsxs(T,{value:a.position,onValueChange:r=>t("position",r),required:!0,children:[e.jsx(E,{children:e.jsx(K,{placeholder:"Select user type"})}),e.jsxs(O,{children:[e.jsx(j,{value:"law-enforcement",children:"Law Enforcement"}),e.jsx(j,{value:"admin",children:"Administrator"}),e.jsx(j,{value:"record-officer",children:"Records Officer"})]})]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{htmlFor:"agency",children:"Agency"}),e.jsx(d,{id:"agency",name:"agency",value:a.agency,onChange:r=>t("agency",r.target.value),required:!0})]})]}),e.jsxs(k,{children:[e.jsx(q,{asChild:!0,children:e.jsx(m,{variant:"secondary",children:"Cancel"})}),e.jsx(m,{type:"submit",form:"edit-user-form",className:"bg-blue-500 hover:bg-blue-600",disabled:u,children:u?"Updating...":"Update User"})]})]})})]})}const G=[{accessorKey:"fname",header:"First Name"},{accessorKey:"mname",header:"Middle Name",cell:({row:s})=>s.getValue("mname")||e.jsx("span",{className:"text-muted-foreground",children:"N/A"})},{accessorKey:"lname",header:"Last Name"},{accessorKey:"contactnum",header:"Contact No."},{accessorKey:"avatar",header:"Avatar",cell:({row:s})=>{const c=s.getValue("avatar");return c?e.jsx("img",{src:`/storage/${c}`,alt:"Avatar",className:"h-8 w-8 rounded-full object-cover"}):e.jsx("span",{className:"text-muted-foreground",children:"N/A"})}},{accessorKey:"username",header:"Username"},{accessorKey:"position",header:"Position"},{accessorKey:"agency",header:"Agency"},{id:"actions",header:"Actions",cell:({row:s})=>{const c=s.original;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{user:c}),e.jsx(B,{user:c})]})}}];function J(){const s=f.useRef(null),{props:c}=b(),o=c.success,{data:i,setData:a,post:t,processing:h,errors:u}=y({firstName:"",middleName:"",lastName:"",contactNumber:"",avatar:null,username:"",password:"",position:"",agency:""}),x=n=>{n.preventDefault(),t(route("user-management.store"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{}})};return e.jsxs(w,{children:[e.jsx(C,{title:"Create User"}),e.jsx(S,{asChild:!0,children:e.jsx(m,{variant:"outline",children:"Add User"})}),e.jsx(D,{className:"sm:max-w-3xl",children:e.jsxs("form",{id:"create-user-form",onSubmit:x,children:[e.jsxs(F,{children:[e.jsx(U,{children:"Create User"}),e.jsx(A,{children:"Fill in the details to create a new user."})]}),Object.keys(u).length>0&&e.jsxs(p,{variant:"destructive",className:"mb-4 mt-4",children:[e.jsx(v,{children:"Unable to process request"}),e.jsx(N,{children:Object.values(u).map((n,r)=>e.jsx("ul",{className:"list-inside list-disc text-sm",children:e.jsx("li",{children:n})},r))})]}),o&&e.jsxs(p,{variant:"default",className:"mb-4",children:[e.jsx(v,{children:"Success"}),e.jsx(N,{children:o})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 py-2",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx(l,{htmlFor:"firstName",children:"First Name"}),e.jsx(d,{id:"firstName",name:"firstName",value:i.firstName,onChange:n=>a("firstName",n.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"middleName",children:"Middle Name"}),e.jsx(d,{id:"middleName",name:"middleName",value:i.middleName,onChange:n=>a("middleName",n.target.value)})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{htmlFor:"lastName",children:"Last Name"}),e.jsx(d,{id:"lastName",name:"lastName",value:i.lastName,onChange:n=>a("lastName",n.target.value),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{htmlFor:"contactNumber",children:"Contact Number"}),e.jsx(d,{id:"contactNumber",name:"contactNumber",value:i.contactNumber,onChange:n=>a("contactNumber",n.target.value),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{htmlFor:"avatar",children:"Avatar"}),e.jsx(d,{id:"avatar",name:"avatar",type:"file",ref:s,onChange:n=>{var r;return a("avatar",((r=n.target.files)==null?void 0:r[0])??null)},accept:"image/*"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{htmlFor:"username",children:"Username"}),e.jsx(d,{id:"username",name:"username",value:i.username,onChange:n=>a("username",n.target.value),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{htmlFor:"password",children:"Password"}),e.jsx(d,{id:"password",name:"password",type:"password",value:i.password,onChange:n=>a("password",n.target.value),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{htmlFor:"userType",children:"User Type"}),e.jsxs(T,{value:i.position,onValueChange:n=>a("position",n),required:!0,children:[e.jsx(E,{children:e.jsx(K,{placeholder:"Select user type"})}),e.jsxs(O,{children:[e.jsx(j,{value:"law-enforcement",children:"Law Enforcement"}),e.jsx(j,{value:"admin",children:"Administrator"}),e.jsx(j,{value:"record-officer",children:"Records Officer"})]})]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{htmlFor:"agency",children:"Agency"}),e.jsx(d,{id:"agency",name:"agency",value:i.agency,onChange:n=>a("agency",n.target.value),required:!0})]})]}),e.jsxs(k,{children:[e.jsx(q,{asChild:!0,children:e.jsx(m,{variant:"secondary",children:"Cancel"})}),e.jsx(m,{type:"submit",form:"create-user-form",className:"bg-blue-500 hover:bg-blue-600",disabled:h,children:h?"Creating...":"Create User"})]})]})})]})}const Q=[{title:"Dashboard",href:"/dashboard"}];function ce(){const{users:s,filters:c}=b().props,[o,i]=f.useState(c.search||""),a=()=>{L.get("/admin/user-management",{search:o},{preserveState:!0})};return e.jsxs(_,{breadcrumbs:Q,children:[e.jsx(C,{title:"User Management"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your users and their permissions."})]}),e.jsx(J,{})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(l,{htmlFor:"search",className:"text-sm font-medium",children:"Search Users"}),e.jsx(d,{id:"search",placeholder:"Search by name or username",className:"w-64",value:o,onChange:t=>i(t.target.value),onKeyDown:t=>t.key==="Enter"&&a()}),e.jsx(m,{variant:"outline",onClick:a,children:"Search"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(R,{columns:G,data:s.data}),e.jsx($,{page:s.current_page,totalPages:s.last_page,onPageChange:t=>L.get("/admin/user-management",{search:c.search,page:t},{preserveState:!0})})]})]})]})}export{ce as default};
