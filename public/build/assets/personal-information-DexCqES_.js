import{r as T,m as N,K as g,j as e,L as w,$ as A}from"./app-CcM30sAC.js";import{D as L,e as P,a as $,b as _,c as I,d as E,f as M,A as S}from"./app-layout-K72RpabK.js";import{C as B,a as O,b as k,c as F}from"./card-DsmJmjsu.js";import{T as H,a as R,b as p,c as r,d as V,e as i}from"./table-CMhCOYVO.js";import{B as o}from"./button-nw6-iZy9.js";import{A as l,b as d,a as m}from"./alert-CzczWuzi.js";import{L as q}from"./label-BXwUcAO4.js";import{T as G}from"./textarea-BL1DW8-i.js";import{V as U}from"./view-pdl-information-D-fPhuUH.js";import{f as z}from"./format-B3rlCQGj.js";import"./input-DJk89yj0.js";import"./index-8Ri7KS3l.js";import"./users-DrCRUVNL.js";import"./user-D8VfSULE.js";import"./scale-BF71mymd.js";import"./eye-gBfh2ZBe.js";import"./accordion-ChcvJMeN.js";import"./badge-C0fBl2_7.js";import"./select-CyzOf48a.js";import"./index-C4dF5JtL.js";import"./index-B8tX437M.js";import"./index-DBC4w0gw.js";import"./square-pen-Q4FQFoAO.js";import"./file-x-DhAc2eSX.js";import"./radio-group-NOs1kaQU.js";import"./plus-DmWEAzi9.js";function K({pdl:n}){const[a,s]=T.useState(!1),{data:t,setData:v,post:b,processing:h,errors:x,reset:y}=N({reason:"",pdl_id:n.id}),{props:j}=g(),f=j.success,u=j.error,C=()=>{b(route("pdl-management.transfer",n.id),{preserveScroll:!0,onSuccess:()=>{y(),setTimeout(()=>s(!1),2e3)}})};return e.jsxs(L,{open:a,onOpenChange:s,children:[e.jsx(P,{asChild:!0,children:e.jsx(o,{variant:"ghost",children:"Transfer PDL"})}),e.jsxs($,{className:"sm:max-w-md",children:[e.jsxs(_,{children:[e.jsx(I,{children:"Confirm PDL Transfer"}),e.jsxs(E,{children:["Transfer ",n.full_name," to another facility"]})]}),e.jsxs("div",{className:"space-y-4 py-2",children:[f&&e.jsxs(l,{variant:"success",className:"mb-4",children:[e.jsx(d,{children:"Success"}),e.jsx(m,{children:f})]}),u&&e.jsxs(l,{variant:"destructive",children:[e.jsx(d,{children:"Error"}),e.jsx(m,{children:u})]}),Object.keys(x).length>0&&e.jsxs(l,{variant:"destructive",children:[e.jsx(d,{children:"Error"}),e.jsx(m,{children:e.jsx("ul",{className:"list-inside list-disc",children:Object.values(x).map((c,D)=>e.jsx("li",{children:c},D))})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"reason",children:"Transfer Reason *"}),e.jsx(G,{id:"reason",value:t.reason,onChange:c=>v("reason",c.target.value),placeholder:"Explain the reason for transfer...",rows:3,required:!0})]}),e.jsx("div",{className:"mt-2 rounded bg-yellow-50 p-4",children:e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsx("span",{className:"font-bold",children:"Final Confirmation:"})," This action will immediately initiate the transfer process. Are you sure you want to transfer this PDL?"]})})]}),e.jsxs(M,{children:[e.jsx(o,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(o,{type:"button",onClick:C,disabled:h||!t.reason.trim(),className:"bg-red-600 hover:bg-red-700 disabled:opacity-50",children:h?"Processing...":"Confirm Transfer"})]})]})]})}const J=[{title:"PDL Management",href:"/pdl-management"}];function ye(){const{props:n}=g(),{pdls:a}=n;return console.log("PDLs:",a),console.log("PDLs:",a.map(s=>({id:s.id,status:s.verifications.length>0?s.verifications[0].status:"No Verification",reviewed_at:s.verifications.length>0?s.verifications[0].reviewed_at:null,reviewed_by:s.verifications.length>0?s.verifications[0].reviewed_by:null}))),e.jsxs(S,{breadcrumbs:J,children:[e.jsx(w,{title:"Personal Information"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Personal Information"}),e.jsxs(B,{children:[e.jsx(O,{children:e.jsx(k,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Personal Information List"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(A,{href:"/pdl-management/personal-information/create",className:"flex items-center gap-2 rounded-sm bg-blue-500 px-4 py-2 text-sm text-white hover:bg-blue-600",children:"Add PDL Information"})})]})})}),e.jsx(F,{children:e.jsxs(H,{children:[e.jsx(R,{children:e.jsxs(p,{children:[e.jsx(r,{children:"ID"}),e.jsx(r,{children:"Full Name"}),e.jsx(r,{children:"Alias"}),e.jsx(r,{children:"Gender"}),e.jsx(r,{children:"Ethnic Group"}),e.jsx(r,{children:"Civil Status"}),e.jsx(r,{children:"Date of Birth"}),e.jsx(r,{children:"Age"}),e.jsx(r,{children:"Address"}),e.jsx(r,{children:"Added By"}),e.jsx(r,{children:"Transfer Request"}),e.jsx(r,{children:"Archive Status"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(V,{children:a.map(s=>e.jsxs(p,{children:[e.jsx(i,{children:s.id}),e.jsx(i,{children:`${(s==null?void 0:s.fname)||""}  ${s==null?void 0:s.mname} ${(s==null?void 0:s.lname)||""}`.trim().split(" ").filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" ")}),e.jsx(i,{children:s.alias??"-"}),e.jsx(i,{children:s.gender??"-"}),e.jsx(i,{children:s.ethnic_group??"-"}),e.jsx(i,{children:s.civil_status??"-"}),e.jsx(i,{children:z(new Date(s.birthdate),"MMMM dd, yyyy")}),e.jsx(i,{children:s.age}),e.jsx(i,{children:`${s.brgy??""}, ${s.city??""}, ${s.province??""}`}),e.jsx(i,{children:s.personnel?`${s.personnel.fname} ${s.personnel.lname}`:"â€”"}),e.jsx(i,{children:s.verifications.length>0?s.verifications[0].status.charAt(0).toUpperCase()+s.verifications[0].status.slice(1):"No Verification"}),e.jsx(i,{children:s.archived_at?e.jsx("span",{className:"inline-flex items-center rounded-full bg-red-100 px-2 py-1 text-xs font-medium text-red-800",children:"Archived"}):e.jsx("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2 py-1 text-xs font-medium text-green-800",children:"Active"})}),e.jsx(i,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(U,{pdl:s}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>{window.location.href=`/law-enforcement/pdl-management/personal-information/${s.id}`},children:"Edit"}),e.jsx(K,{pdl:s})]})})]},s.id))})]})})]})]})]})}export{ye as default};
