import{m as j,j as e,S as g,K as E,r as I,L as A}from"./app-h39Q3lKv.js";import{D as K}from"./data-table-CY3YlUrM.js";import{C as O,a as k,b as U,c as V}from"./card-DaSgLxtN.js";import{B as c,I as x}from"./index-B_s-eLau.js";import{L as n}from"./label-CUqt2UZy.js";import{D as v,e as y,a as f,b as C,c as D,d as b,f as N,g as S,A as $}from"./app-layout-CyYYVqVf.js";import{A as w,a as F,b as M}from"./alert-CqZiU6-D.js";import{S as L,a as R,b as q,c as _,d as P}from"./select-B_H9GGQQ.js";import{T as d}from"./textarea-CUebMqhN.js";import{D as B,a as H,b as z,d as G,c as u}from"./dropdown-menu-B0XNXfdn.js";import{E as J}from"./ellipsis-DjSqgCzC.js";import{f as Q}from"./format-CpNbv1J2.js";import"./table-DgICpwiw.js";import"./utils-Bk2_xLts.js";import"./users-DcIAZgrS.js";import"./index-CgCOVt_n.js";import"./index-DQdbU8Y-.js";import"./index-B_ehX6FD.js";import"./index-BP8KT5V_.js";function W({pdls:r=[]}){const{data:i,setData:l,post:t,processing:o,errors:h,reset:m}=j({pdl_id:"",complaint:"",date:new Date().toISOString().split("T")[0],prognosis:"",laboratory:"",prescription:"",findings:""}),p=s=>{s.preventDefault(),t(route("medical-records.store"),{preserveScroll:!0,onSuccess:()=>m()})};return e.jsxs(v,{children:[e.jsx(y,{asChild:!0,children:e.jsx(c,{variant:"outline",children:"Create Record"})}),e.jsxs(f,{className:"sm:max-w-3xl",children:[e.jsxs(C,{children:[e.jsx(D,{children:"Create Medical Record"}),e.jsx(b,{children:"Fill in the medical details"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[Object.keys(h).length>0&&e.jsxs(w,{variant:"destructive",children:[e.jsx(F,{children:"Error"}),e.jsx(M,{children:e.jsx("ul",{className:"list-inside list-disc",children:Object.values(h).map((s,a)=>e.jsx("li",{children:s},a))})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"PDL (Person Deprived of Liberty)"}),e.jsxs(L,{value:i.pdl_id,onValueChange:s=>l("pdl_id",s),required:!0,children:[e.jsx(R,{children:e.jsx(q,{placeholder:"Select a PDL"})}),e.jsx(_,{children:r.map(s=>e.jsxs(P,{value:s.id.toString(),children:[s.fname," ",s.lname," (ID: ",s.id,")"]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"date",children:"Date"}),e.jsx(x,{type:"date",id:"date",value:i.date,onChange:s=>l("date",s.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"complaint",children:"Complaint"}),e.jsx(d,{id:"complaint",value:i.complaint,onChange:s=>l("complaint",s.target.value),required:!0,rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"findings",children:"Findings"}),e.jsx(d,{id:"findings",value:i.findings,onChange:s=>l("findings",s.target.value),required:!0,rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"prognosis",children:"Prognosis"}),e.jsx(d,{id:"prognosis",value:i.prognosis,onChange:s=>l("prognosis",s.target.value),required:!0,rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"laboratory",children:"Laboratory Results"}),e.jsx(d,{id:"laboratory",value:i.laboratory,onChange:s=>l("laboratory",s.target.value),required:!0,rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"prescription",children:"Prescription"}),e.jsx(d,{id:"prescription",value:i.prescription,onChange:s=>l("prescription",s.target.value),required:!0,rows:3})]}),e.jsxs(N,{children:[e.jsx(S,{asChild:!0,children:e.jsx(c,{variant:"outline",children:"Cancel"})}),e.jsx(c,{type:"submit",disabled:o,children:o?"Creating...":"Create Record"})]})]})]})]})}function X({record:r,pdls:i}){const{data:l,setData:t,put:o,processing:h,errors:m,reset:p}=j({pdl_id:r.pdl_id.toString(),complaint:r.complaint,date:r.date.split("T")[0],progonosis:r.progonosis,laboratory:r.laboratory,prescription:r.prescription,findings:r.findings}),s=a=>{a.preventDefault(),o(route("medical-records.update",r.medical_record_id),{preserveScroll:!0,onSuccess:()=>p()})};return e.jsxs(v,{children:[e.jsx(y,{asChild:!0,children:e.jsx(c,{variant:"ghost",className:"w-full justify-start",children:"Edit"})}),e.jsxs(f,{className:"sm:max-w-3xl",children:[e.jsxs(C,{children:[e.jsx(D,{children:"Edit Medical Record"}),e.jsx(b,{children:"Update the medical details"})]}),e.jsxs("form",{onSubmit:s,className:"space-y-4",children:[Object.keys(m).length>0&&e.jsxs(w,{variant:"destructive",children:[e.jsx(F,{children:"Error"}),e.jsx(M,{children:e.jsx("ul",{className:"list-inside list-disc",children:Object.values(m).map((a,T)=>e.jsx("li",{children:a},T))})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"PDL (Person Deprived of Liberty)"}),e.jsxs(L,{value:l.pdl_id,onValueChange:a=>t("pdl_id",a),required:!0,children:[e.jsx(R,{children:e.jsx(q,{placeholder:"Select a PDL"})}),e.jsx(_,{children:i.map(a=>e.jsxs(P,{value:a.id.toString(),children:[a.fname," ",a.lname," (ID: ",a.id,")"]},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"date",children:"Date"}),e.jsx(x,{type:"date",id:"date",value:l.date,onChange:a=>t("date",a.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"complaint",children:"Complaint"}),e.jsx(d,{id:"complaint",value:l.complaint,onChange:a=>t("complaint",a.target.value),required:!0,rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"findings",children:"Findings"}),e.jsx(d,{id:"findings",value:l.findings,onChange:a=>t("findings",a.target.value),required:!0,rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"progonosis",children:"Progonosis"}),e.jsx(d,{id:"progonosis",value:l.progonosis,onChange:a=>t("progonosis",a.target.value),required:!0,rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"laboratory",children:"Laboratory Results"}),e.jsx(d,{id:"laboratory",value:l.laboratory,onChange:a=>t("laboratory",a.target.value),required:!0,rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"prescription",children:"Prescription"}),e.jsx(d,{id:"prescription",value:l.prescription,onChange:a=>t("prescription",a.target.value),required:!0,rows:3})]}),e.jsxs(N,{children:[e.jsx(S,{asChild:!0,children:e.jsx(c,{variant:"outline",children:"Cancel"})}),e.jsx(c,{type:"submit",disabled:h,children:h?"Updating...":"Update Record"})]})]})]})]})}const Y=[{accessorKey:"date",header:"Date",cell:({row:r})=>Q(new Date(r.original.date),"MMM dd, yyyy")},{id:"pdl",header:"PDL",cell:({row:r})=>{const i=r.original.pdl;return i?`${i.fname} ${i.lname}`:`ID: ${r.original.pdl_id}`}},{accessorKey:"complaint",header:"Complaint",cell:({row:r})=>e.jsx("div",{className:"max-w-[200px] truncate",children:r.original.complaint})},{accessorKey:"findings",header:"Findings",cell:({row:r})=>e.jsx("div",{className:"max-w-[200px] truncate",children:r.original.findings})},{accessorKey:"prognosis",header:"Prognosis",cell:({row:r})=>e.jsx("div",{className:"max-w-[200px] truncate",children:r.original.prognosis})},{id:"actions",header:"Actions",cell:({row:r})=>{const i=r.original;return e.jsxs(B,{children:[e.jsx(H,{asChild:!0,children:e.jsxs(c,{variant:"ghost",size:"icon",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(J,{className:"h-4 w-4"})]})}),e.jsxs(z,{align:"end",children:[e.jsx(G,{children:"Actions"}),e.jsx(u,{asChild:!0,children:e.jsx(X,{record:i,pdls:[]})}),e.jsx(u,{onClick:()=>g.delete(route("medical-records.destroy",i.medical_record_id)),className:"text-red-500",children:"Delete"})]})]})}}],Z=[{title:"Medical Records",href:"/medical-records"}];function ye(){const{props:r}=E(),{records:i,pdls:l,filters:t}=r,[o,h]=I.useState((t==null?void 0:t.search)||""),m=()=>{g.get("/medical-records",{search:o},{preserveState:!0,replace:!0})},p=s=>{s.key==="Enter"&&m()};return e.jsxs($,{breadcrumbs:Z,children:[e.jsx(A,{title:"Medical Records Management"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Medical Records"}),e.jsxs(O,{children:[e.jsx(k,{children:e.jsx(U,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Medical Records"}),e.jsx(W,{pdls:l})]})})}),e.jsxs(V,{children:[e.jsxs("div",{className:"mb-4 flex items-center space-x-4",children:[e.jsx(n,{htmlFor:"search",className:"text-sm font-medium",children:"Search Records"}),e.jsx(x,{id:"search",placeholder:"Search by complaint, PDL name, findings, etc.",className:"w-64 md:w-96",value:o,onChange:s=>h(s.target.value),onKeyDown:p}),e.jsx(c,{variant:"outline",onClick:m,children:"Search"})]}),e.jsx(K,{data:i??[],columns:Y})]})]})]})]})}export{ye as default};
