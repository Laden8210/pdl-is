import{r as j,m as T,j as e,L as R}from"./app-D7sJuwJc.js";import{C as p,a as N,b as g,c as b}from"./card-DLWDwqHf.js";import{B as A}from"./button-u9ZiHX7C.js";import{I as E}from"./input-BS_xsQ9S.js";import{L as v}from"./label-Br4WJ6FG.js";import{S as O,a as F,b as M,c as $,d as U}from"./select-BBZMYkik.js";import{A as V}from"./app-layout-l1YM3YbX.js";import{F as C}from"./users-BxYB4q2L.js";import{C as q}from"./scale-DVrI9DmE.js";import{D as B}from"./download-BKqJGcMM.js";import"./index-LOQAaJzy.js";import"./index-BHiRKjcJ.js";import"./user-CmeQLBVE.js";import"./eye-B8lowLFn.js";const H=[{title:"Reports",href:"/report"},{title:"Certificate of Detention",href:"/report/certificate-of-detention"}];function ie({pdls:m}){const[t,D]=j.useState(null),[i,y]=j.useState(""),{data:x,setData:h,post:S,processing:_,errors:r}=T({pdl_id:"",issue_date:""}),w=s=>{const f=m.find(n=>n.id.toString()===s);D(f||null),h("pdl_id",s)},L=s=>{y(s),h("issue_date",s)},P=s=>{s.preventDefault(),S(route("reports.certificate-of-detention.generate"))},I=()=>{const s=new URLSearchParams;s.append("pdl_id",x.pdl_id),s.append("issue_date",x.issue_date),window.location.href=route("reports.certificate-of-detention.generate")+"?"+s.toString()},u=()=>{if(!(t!=null&&t.date_committed)||!i)return"";const s=new Date(t.date_committed),n=new Date(i).getTime()-s.getTime(),d=Math.ceil(n/(1e3*60*60*24)),c=Math.floor(d/365),l=Math.floor(d%365/30),o=d%30;let a="";return c>0&&(a+=`${c} year${c>1?"s":""}`),l>0&&(a&&(a+=", "),a+=`${l} month${l>1?"s":""}`),o>0&&(a&&(a+=", and "),a+=`${o} day${o>1?"s":""}`),a||"Less than 1 day"};return e.jsxs(V,{breadcrumbs:H,children:[e.jsx(R,{title:"Certificate of Detention"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"h-8 w-8 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Certificate of Detention"})]}),e.jsxs(p,{children:[e.jsx(N,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Generate Certificate of Detention"]})}),e.jsx(b,{children:e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{htmlFor:"pdl_id",className:"text-sm font-medium",children:["Select PDL ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(O,{onValueChange:w,required:!0,children:[e.jsx(F,{children:e.jsx(M,{placeholder:"Choose a PDL..."})}),e.jsx($,{children:m.map(s=>e.jsx(U,{value:s.id.toString(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.case_number," - ",s.crime_committed]})]})},s.id))})]}),r.pdl_id&&e.jsx("p",{className:"text-sm text-red-500",children:r.pdl_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{htmlFor:"issue_date",className:"text-sm font-medium",children:["Issue Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(E,{id:"issue_date",type:"date",value:i,onChange:s=>L(s.target.value),className:"pl-10",required:!0})]}),r.issue_date&&e.jsx("p",{className:"text-sm text-red-500",children:r.issue_date})]})]}),t&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Selected PDL Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",t.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Case Number:"})," ",t.case_number]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Crime Committed:"})," ",t.crime_committed]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date Committed:"})," ",t.date_committed?new Date(t.date_committed).toLocaleDateString():"N/A"]}),i&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("span",{className:"font-medium",children:"Detention Period:"})," ",u()]})]})]}),r.error&&e.jsx("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:e.jsx("p",{className:"text-red-700",children:r.error})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(A,{onClick:()=>I(),disabled:_||!t||!i,variant:"outline",size:"sm",type:"button",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Export PDF"]})})]})})]}),t&&i&&e.jsxs(p,{children:[e.jsx(N,{children:e.jsx(g,{className:"text-lg",children:"Certificate Preview"})}),e.jsx(b,{children:e.jsxs("div",{className:"bg-white border-2 border-gray-200 p-8 rounded-lg",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-sm font-bold mb-1",children:"Republic of the Philippines"}),e.jsx("div",{className:"text-sm font-bold mb-1",children:"Province of South Cotabato"}),e.jsx("div",{className:"text-base font-bold mb-1",children:"OFFICE OF THE PROVINCIAL GOVERNOR"}),e.jsx("div",{className:"text-sm font-bold mb-1",children:"Provincial Jail Management Unit"}),e.jsx("div",{className:"text-sm mb-2",children:"Koronadal City"}),e.jsx("div",{className:"border-t border-gray-400 mb-2"}),e.jsx("div",{className:"text-xs",children:"Tel #: (083) 228-2445; Email Address: socot.scrdcjail@gmail.com"})]}),e.jsx("div",{className:"text-center mb-6",children:e.jsx("div",{className:"text-lg font-bold uppercase",children:"Certificate of Detention"})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"font-bold underline uppercase mb-4",children:"To Whom It May Concern:"}),e.jsxs("div",{className:"space-y-3 text-sm leading-relaxed",children:[e.jsxs("p",{className:"text-justify",children:["THIS IS TO CERTIFY that ",e.jsx("strong",{className:"uppercase",children:t.name}),", was committed in this institution on ",e.jsx("strong",{children:t.date_committed?new Date(t.date_committed).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}),", per Commitment Order issued by the Regional Court Branch 26, Surallah, South Cotabato for the charge of ",e.jsx("strong",{className:"uppercase",children:t.crime_committed})," docketed as ",e.jsx("strong",{children:t.case_number}),"."]}),e.jsxs("p",{className:"text-justify",children:["It is further certified that said accused was detained for ",e.jsx("strong",{children:u()})," as to date."]}),e.jsx("p",{className:"text-justify",children:"This certification is issued upon the request of the above-named person for whatever legal purpose it may serve him best."}),e.jsxs("p",{className:"text-justify",children:["Issued this ",e.jsx("strong",{children:new Date(i).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"})}),",                                         City of Koronadal."]})]})]}),e.jsxs("div",{className:"text-right mt-8",children:[e.jsx("div",{className:"font-bold uppercase",children:"JUAN R. LANZADERAS, JR., MPA"}),e.jsx("div",{className:"text-sm",children:"Provincial Warden"})]})]})})]})]})]})}export{ie as default};
