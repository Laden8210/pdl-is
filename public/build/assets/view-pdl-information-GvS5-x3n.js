import{r as u,j as e,S as D}from"./app-DViah51f.js";import{D as f,e as y,a as _,b as C,c as S,d as A,C as v,f as M}from"./app-layout-CCA6Jim-.js";import{c as B,B as x}from"./button-1m7tU0fB.js";import{B as h}from"./badge-B5SOHfSi.js";import{A as O,a as l,b as o,c as m}from"./accordion-DplLEsAj.js";import{S as T,a as P,b as U,c as E,d as R}from"./select-CBdOQlGP.js";import{S as F}from"./square-pen-D87MMaQl.js";import{C as $}from"./input-B5md_aLw.js";import{F as V}from"./file-x-4AKjeYoR.js";import{E as z}from"./eye-DdWqV9kt.js";import{f as n}from"./format-B3rlCQGj.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],L=B("Skull",H),N=[{value:"open",label:"Open",icon:v,color:"destructive"},{value:"pending",label:"Pending",icon:v,color:"default"},{value:"convicted",label:"Convicted",icon:$,color:"secondary"},{value:"deceased",label:"Deceased",icon:L,color:"destructive"},{value:"case closed",label:"Case Closed",icon:V,color:"secondary"}];function q({caseInfo:a}){const[s,t]=u.useState(!1),[i,b]=u.useState(a.case_status),[j,p]=u.useState(!1),k=async()=>{var r;if(i===a.case_status){t(!1);return}p(!0);try{const d=await(await fetch(route("case-information.update-status",a.case_id),{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||""},body:JSON.stringify({case_status:i})})).json();d.success?(t(!1),D.reload()):console.error("Failed to update case status:",d.message)}catch(c){console.error("Error updating case status:",c)}finally{p(!1)}},g=r=>{const c=N.find(w=>w.value===r);if(!c)return null;const d=c.icon;return e.jsxs(h,{variant:c.color,className:"flex items-center gap-1",children:[e.jsx(d,{className:"h-3 w-3"}),c.label]})};return e.jsxs(f,{open:s,onOpenChange:t,children:[e.jsx(y,{asChild:!0,children:e.jsxs(x,{variant:"ghost",size:"sm",className:"h-6 px-2",children:[e.jsx(F,{className:"h-3 w-3 mr-1"}),"Update Status"]})}),e.jsxs(_,{className:"sm:max-w-[425px]",children:[e.jsxs(C,{children:[e.jsx(S,{children:"Update Case Status"}),e.jsxs(A,{children:["Update the status for case: ",e.jsx("span",{className:"font-medium",children:a.case_number}),e.jsx("br",{}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Crime: ",a.crime_committed]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Current Status"}),e.jsx("div",{className:"flex items-center gap-2",children:g(a.case_status)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"New Status"}),e.jsxs(T,{value:i,onValueChange:b,children:[e.jsx(P,{children:e.jsx(U,{placeholder:"Select new status"})}),e.jsx(E,{children:N.map(r=>{const c=r.icon;return e.jsx(R,{value:r.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{className:"h-4 w-4"}),r.label]})},r.value)})})]})]}),i!==a.case_status&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Preview"}),e.jsx("div",{className:"flex items-center gap-2",children:g(i)})]})]}),e.jsxs(M,{children:[e.jsx(x,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsx(x,{onClick:k,disabled:j||i===a.case_status,children:j?"Updating...":"Update Status"})]})]})]})}function ae({pdl:a}){return console.log(a),e.jsxs(f,{children:[e.jsx(y,{asChild:!0,children:e.jsxs(x,{variant:"ghost",size:"sm",children:[e.jsx(z,{className:"h-4 w-4"})," View"]})}),e.jsxs(_,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(C,{children:e.jsx(S,{children:"PDL Information"})}),e.jsxs("div",{className:"grid gap-4 py-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Full Name:"})," ",`${a.fname} ${a.lname}`]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Alias:"})," ",a.alias||"-"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Gender:"})," ",a.gender||"-"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Birthdate:"})," ",n(new Date(a.birthdate),"MMMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Age:"})," ",a.age]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Ethnic Group:"})," ",a.ethnic_group||"-"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Civil Status:"})," ",a.civil_status||"-"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Added By:"})," ",a.personnel?`${a.personnel.fname} ${a.personnel.lname}`:"-"]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Address:"})," ",`${a.brgy||""}, ${a.city||""}, ${a.province||""}`]})]})]}),e.jsxs(O,{type:"multiple",className:"w-full",children:[Array.isArray(a.physical_characteristics)&&a.physical_characteristics.length>0&&e.jsxs(l,{value:"physical",children:[e.jsx(o,{className:"text-sm font-medium",children:"Physical Characteristics"}),e.jsx(m,{className:"grid grid-cols-2 gap-4 p-2 text-sm",children:a.physical_characteristics.map((s,t)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Height:"})," ",s.height," cm"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Weight:"})," ",s.weight," kg"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Build:"})," ",s.build]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Complexion:"})," ",s.complexion]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Hair Color:"})," ",s.hair_color]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Eye Color:"})," ",s.eye_color]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"ID Marks:"})," ",s.identification_marks]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Mark Location:"})," ",s.mark_location]}),s.remark&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Remarks:"})," ",s.remark]})]},t))})]}),Array.isArray(a.court_orders)&&a.court_orders.length>0&&e.jsxs(l,{value:"court",children:[e.jsxs(o,{className:"text-sm font-medium",children:["Court Orders (",a.court_orders.length,")"]}),e.jsx(m,{className:"space-y-4 p-2",children:a.court_orders.map((s,t)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Order #:"})," ",s.court_order_number]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"})," ",s.order_type]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Order Date:"})," ",n(new Date(s.order_date),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Received Date:"})," ",n(new Date(s.received_date),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Court Branch:"})," ",s.court_branch]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Document Type:"})," ",s.document_type]}),s.remarks&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Remarks:"})," ",s.remarks]})]},t))})]}),Array.isArray(a.medical_records)&&a.medical_records.length>0&&e.jsxs(l,{value:"medical",children:[e.jsxs(o,{className:"text-sm font-medium",children:["Medical Records (",a.medical_records.length,")"]}),e.jsx(m,{className:"space-y-4 p-2",children:a.medical_records.map((s,t)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date:"})," ",n(new Date(s.date),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Complaint:"})," ",s.complaint]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Findings:"})," ",s.findings]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Prognosis:"})," ",s.prognosis]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Laboratory Results:"})," ",s.laboratory]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Prescription:"})," ",s.prescription]})]},t))})]}),Array.isArray(a.cases)&&a.cases.length>0&&e.jsxs(l,{value:"cases",children:[e.jsxs(o,{className:"text-sm font-medium",children:["Case Information (",a.cases.length,")"]}),e.jsx(m,{className:"space-y-4 p-2",children:a.cases.map((s,t)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm border rounded-lg p-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Case #:"})," ",s.case_number]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx(h,{variant:s.case_status==="open"?"destructive":s.case_status==="pending"?"default":s.case_status==="convicted"?"secondary":s.case_status==="deceased"?"destructive":"secondary",children:s.case_status}),e.jsx(q,{caseInfo:s})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Crime:"})," ",s.crime_committed]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date Committed:"})," ",n(new Date(s.date_committed),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Time Committed:"})," ",s.time_committed]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Security:"}),e.jsx(h,{variant:s.security_classification==="low"?"secondary":s.security_classification==="medium"?"default":(s.security_classification==="high","destructive"),children:s.security_classification})]}),s.case_remarks&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Remarks:"})," ",s.case_remarks]})]},t))})]})]})]})]})]})}export{ae as V};
