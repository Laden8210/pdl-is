import{K as w,m as L,j as e,L as M}from"./app-B_O9F4tw.js";import{B as o}from"./button-BiD3r4ZK.js";import{C as j,a as _,b as f,c as p}from"./card-DH5vEpEW.js";import{I as y}from"./input-Cch6FJY3.js";import{L as g}from"./label-CZmbwHrp.js";import{T as D,a as S,b as c,c as d,d as A,e as r}from"./table-D4KjtlNv.js";import{A as R}from"./app-layout-Be9EpAUR.js";import{f as i}from"./format-B3rlCQGj.js";import"./index-D-eL34-K.js";import"./index-D5DTq6I9.js";import"./users-DIrrmxra.js";import"./user-Dmxs8yN8.js";import"./scale-D2Wxh09W.js";import"./eye-CcSNQFx3.js";const T=[{title:"Reports",href:"/reports"},{title:"List of PDL",href:"/reports/pdl-list"}];function J(){const{props:u}=w(),{pdls:l,filters:h}=u,{data:a,setData:n,get:x}=L({start_date:h.start_date||"",end_date:h.end_date||""}),b=()=>{x(route("reports.pdl-list",{start_date:a.start_date,end_date:a.end_date}))},N=()=>{const s=new URLSearchParams;a.start_date&&s.append("start_date",a.start_date),a.end_date&&s.append("end_date",a.end_date),window.location.href=route("reports.pdl-list.export")+"?"+s.toString()},C=l.reduce((s,t)=>(s[t.pdl_id]||(s[t.pdl_id]={pdl_id:t.pdl_id,name:t.name,date_of_birth:t.date_of_birth,age:t.age,address:t.address,tribe:t.tribe,years:t.years,cases:[]}),s[t.pdl_id].cases.push({id:t.id,case_no:t.case_no,crime_committed:t.crime_committed,date_committed:t.date_committed,case_status:t.case_status,rtc:t.rtc}),s),{}),m=Object.values(C);return e.jsxs(R,{breadcrumbs:T,children:[e.jsx(M,{title:"List of PDL Reports"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold",children:"List of PDL Reports"})}),e.jsxs(j,{children:[e.jsx(_,{children:e.jsx(f,{children:"Filter Reports"})}),e.jsxs(p,{children:[e.jsxs("div",{className:"mb-4 grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"start_date",children:"Start Date"}),e.jsx(y,{id:"start_date",type:"date",value:a.start_date,onChange:s=>n("start_date",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"end_date",children:"End Date"}),e.jsx(y,{id:"end_date",type:"date",value:a.end_date,onChange:s=>n("end_date",s.target.value)})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(o,{onClick:b,variant:"default",children:"Apply Filter"}),e.jsx(o,{variant:"outline",onClick:()=>{n({start_date:"",end_date:""}),x(route("reports.pdl-list"))},children:"Clear"}),e.jsx(o,{onClick:N,variant:"secondary",children:"Export to List of PDL Report"})]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",l.length," records",a.start_date&&a.end_date&&` from ${i(new Date(a.start_date),"MMM dd, yyyy")} to ${i(new Date(a.end_date),"MMM dd, yyyy")}`]})})]})]}),e.jsxs(j,{children:[e.jsx(_,{children:e.jsx(f,{className:"text-center",children:e.jsx("div",{className:"flex items-center justify-center gap-4 mb-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold",children:"List of PDL Reports"}),e.jsx("div",{className:"text-sm text-gray-600",children:"South Cotabato Rehabilitation and Detention Center"})]})})})}),e.jsx(p,{children:e.jsxs(D,{children:[e.jsx(S,{children:e.jsxs(c,{children:[e.jsx(d,{children:"Name"}),e.jsx(d,{children:"Case No"}),e.jsx(d,{children:"Crime Committed"}),e.jsx(d,{children:"Date of Birth"}),e.jsx(d,{children:"Date Committed"}),e.jsx(d,{children:"Age"}),e.jsx(d,{children:"Address"}),e.jsx(d,{children:"Tribe"}),e.jsx(d,{children:"Years"}),e.jsx(d,{children:"Case Status"}),e.jsx(d,{children:"RTC"})]})}),e.jsx(A,{children:m.length>0?m.map(s=>e.jsx(e.Fragment,{children:s.cases.map((t,v)=>e.jsx(c,{children:v===0?e.jsxs(e.Fragment,{children:[e.jsx(r,{rowSpan:s.cases.length,className:"font-medium",children:s.name}),e.jsx(r,{children:t.case_no}),e.jsx(r,{children:t.crime_committed}),e.jsx(r,{rowSpan:s.cases.length,children:s.date_of_birth?i(new Date(s.date_of_birth),"MMM dd, yyyy"):"N/A"}),e.jsx(r,{children:t.date_committed?i(new Date(t.date_committed),"MMM dd, yyyy"):"N/A"}),e.jsx(r,{rowSpan:s.cases.length,children:s.age?Math.floor(s.age):"N/A"}),e.jsx(r,{rowSpan:s.cases.length,children:s.address||"N/A"}),e.jsx(r,{rowSpan:s.cases.length,children:s.tribe}),e.jsx(r,{rowSpan:s.cases.length,children:s.years?Math.floor(s.years):"N/A"}),e.jsx(r,{children:t.case_status}),e.jsx(r,{children:t.rtc})]}):e.jsxs(e.Fragment,{children:[e.jsx(r,{children:t.case_no}),e.jsx(r,{children:t.crime_committed}),e.jsx(r,{children:t.date_committed?i(new Date(t.date_committed),"MMM dd, yyyy"):"N/A"}),e.jsx(r,{children:t.case_status}),e.jsx(r,{children:t.rtc})]})},t.id))})):e.jsx(c,{children:e.jsx(r,{colSpan:11,className:"py-4 text-center",children:"No records found for the selected date range."})})})]})})]})]})]})}export{J as default};
