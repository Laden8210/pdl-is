import{K as N,r as S,m as F,j as e,L as $}from"./app-DPTt91av.js";import{I as M,B as C}from"./index-DJxly5yP.js";import{C as L,a as T,b as y,c as D}from"./card-ilNMwNHy.js";import{L as R}from"./label-CImv6V1y.js";import{T as I,a as Y,b as j,c as a,d as B,e as l}from"./table-DovXvqui.js";import{A as G}from"./app-layout-E5qRpekv.js";import{t as A,n as _,f as P}from"./format-CpNbv1J2.js";import"./utils-D7JdpEim.js";import"./users-C0TLK2Z9.js";function w(d,i){const r=+A(d)-+A(i);return r<0?-1:r>0?1:r}function k(d,i,r){const[c,n]=_(r==null?void 0:r.in,d,i);return c.getFullYear()-n.getFullYear()}function E(d,i,r){const[c,n]=_(r==null?void 0:r.in,d,i),o=w(c,n),h=Math.abs(k(c,n));c.setFullYear(1584),n.setFullYear(1584);const p=w(c,n)===-o,x=o*(h-+p);return x===0?0:x}const H=[{title:"Reports",href:"/reports"},{title:"List of PDL",href:"/reports/pdl-list"}];function z(d){return E(new Date,new Date(d))}function Z(){const{props:d}=N(),{verifications:i}=d,[r,c]=S.useState(""),{data:n,get:o}=F({start_date:"",end_date:""}),h=i.filter(s=>{var u,f,g,b;if(!r)return!0;const t=s.pdl;if(!t)return!1;const m=r.toLowerCase();return((u=t.fname)==null?void 0:u.toLowerCase().includes(m))||((f=t.lname)==null?void 0:f.toLowerCase().includes(m))||((g=t.alias)==null?void 0:g.toLowerCase().includes(m))||`${t.fname} ${t.lname}`.toLowerCase().includes(m)||((b=t.id)==null?void 0:b.toString().includes(r))}),p=s=>{const t=new URLSearchParams;s&&t.append("verification_id",s.toString()),window.open(route("reports.gcta-tastm.export")+"?"+t.toString(),"_blank")},x=()=>{o(route("reports.gcta-tastm",{start_date:n.start_date,end_date:n.end_date}))};return e.jsxs(G,{breadcrumbs:H,children:[e.jsx($,{title:"List of PDL Reports"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold",children:"List of GCTA and TASTM Reports"})}),e.jsxs(L,{children:[e.jsx(T,{children:e.jsx(y,{children:"Filter Reports"})}),e.jsx(D,{children:e.jsxs("div",{className:"mb-4 grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"search",children:"Search"}),e.jsx(M,{id:"search",type:"text",placeholder:"Search by name or ID...",value:r,onChange:s=>c(s.target.value)})]}),e.jsx("div",{className:"flex items-end gap-2 md:col-span-2",children:e.jsx(C,{onClick:x,className:"bg-blue-500 hover:bg-blue-600",children:"Apply Filter"})})]})})]}),e.jsxs(L,{children:[e.jsx(T,{children:e.jsx(y,{children:"PDL List"})}),e.jsx(D,{children:e.jsxs(I,{children:[e.jsx(Y,{children:e.jsxs(j,{children:[e.jsx(a,{children:"ID"}),e.jsx(a,{children:"Full Name"}),e.jsx(a,{children:"Alias"}),e.jsx(a,{children:"Gender"}),e.jsx(a,{children:"GCTA Days"}),e.jsx(a,{children:"TASTM Days"}),e.jsx(a,{children:"Date of Birth"}),e.jsx(a,{children:"Age"}),e.jsx(a,{children:"Address"}),e.jsx(a,{children:"Added By"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(B,{children:h.length>0?h.map(s=>s.pdl&&e.jsxs(j,{children:[e.jsx(l,{children:s.pdl.id}),e.jsx(l,{children:`${s.pdl.fname} ${s.pdl.lname}`}),e.jsx(l,{children:s.pdl.alias??"-"}),e.jsx(l,{children:s.pdl.gender??"-"}),e.jsx(l,{className:"font-medium",children:s.gcta_days}),e.jsx(l,{className:"font-medium",children:s.tastm_days}),e.jsx(l,{children:P(new Date(s.pdl.birthdate),"MMMM dd, yyyy")}),e.jsx(l,{children:z(s.pdl.birthdate)}),e.jsx(l,{children:`${s.pdl.brgy??""}, ${s.pdl.city??""}, ${s.pdl.province??""}`}),e.jsx(l,{children:s.pdl.personnel?`${s.pdl.personnel.fname} ${s.pdl.personnel.lname}`:"â€”"}),e.jsx(l,{className:"space-x-1",children:e.jsx(C,{size:"sm",variant:"outline",onClick:()=>p(s.verification_id),children:"View"})})]},s.pdl.id)):e.jsx(j,{children:e.jsx(l,{colSpan:11,className:"py-4 text-center",children:"No records found"})})})]})})]})]})]})}export{Z as default};
