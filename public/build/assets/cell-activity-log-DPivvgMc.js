import{j as e,K as x,r as _,L as y,S as s}from"./app-BPxrKEyb.js";import{D as v}from"./data-table-CnUSCmLf.js";import{B as l}from"./button-CEMgu7CE.js";import{C as j,a as u,b as C,c as L}from"./card-MY-iCpFz.js";import{I as b}from"./input-CvRLkRAD.js";import{L as A}from"./label-BHAojcQv.js";import{A as N}from"./app-layout-B7fNkZnx.js";import"./table-Da5D_Wo2.js";import"./index-D55dR1IO.js";import"./index-Bwm_JLZs.js";import"./users-HviPfwPA.js";import"./user-DBhr3jVO.js";import"./scale-CeClP0FS.js";import"./eye-DJMTalI9.js";import"./circle-alert-BcedVOno.js";const S=[{accessorKey:"assignment_id",header:"Assignment ID"},{accessorKey:"pdl_name",header:"PDL Name"},{accessorKey:"pdl_gender",header:"PDL Gender"},{accessorKey:"from_cell",header:"From Cell"},{accessorKey:"to_cell",header:"To Cell"},{accessorKey:"transferred_by",header:"Transferred By"},{accessorKey:"reason",header:"Reason",cell:({row:t})=>e.jsx("div",{className:"max-w-xs truncate",title:t.original.reason,children:t.original.reason})},{accessorKey:"transferred_at",header:"Transferred At",cell:({row:t})=>{const n=new Date(t.original.transferred_at);return e.jsxs("div",{children:[e.jsx("div",{children:n.toLocaleDateString()}),e.jsx("div",{className:"text-sm text-gray-500",children:n.toLocaleTimeString()})]})}}];function G(){const{props:t}=x(),{transferLogs:n,cell:r,filters:d,pagination:f,auth:h}=t,[i,p]=_.useState(d.search||"");console.log(n);const o=n.map(a=>({id:a.id,assignment_id:a.assignment_id,pdl_name:`${a.pdl.fname} ${a.pdl.lname}`,pdl_gender:a.pdl.gender,from_cell:a.from_cell.cell_name,to_cell:a.to_cell.cell_name,transferred_by:a.transferred_by?`${a.transferred_by.fname} ${a.transferred_by.lname}`:"Unknown User",reason:a.reason||"No reason provided",transferred_at:a.transferred_at})),m=()=>{const a=r?`/admin/pdl-management/cell-activity-log?cell_id=${r.cell_id}`:"/admin/pdl-management/cell-activity-log";s.get(a,{search:i})},g=[{title:"Cell Management",href:"/admin/cell-management"},{title:r?`Activity Log - ${r.cell_name}`:"Activity Log",href:r?`/admin/pdl-management/cell-activity-log?cell_id=${r.cell_id}`:"/admin/pdl-management/cell-activity-log"}],c=h.user.position;return console.log("User Role:",c),e.jsxs(N,{breadcrumbs:g,children:[e.jsx(y,{title:"Cell Transfer Activity Log"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:r?`Cell Transfer Activity Log - ${r.cell_name}`:"Cell Transfer Activity Log"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[r&&e.jsx(l,{variant:"outline",onClick:()=>s.get("/admin/cell-management"),children:"Back to Cell Management"}),c==="admin"&&e.jsx(l,{variant:"outline",onClick:()=>s.get("/admin/pdl-management/cell-assignment"),children:"Back to Assignments"}),c==="record-officer"&&e.jsx(l,{variant:"outline",onClick:()=>s.get("/record-officer/pdl-management/cell-assignment"),children:"Back to Assignments"})]})]}),e.jsxs(j,{children:[e.jsx(u,{children:e.jsx(C,{children:"Transfer History"})}),e.jsxs(L,{children:[e.jsxs("div",{className:"mb-4 flex items-center space-x-4",children:[e.jsx(A,{htmlFor:"search",className:"text-sm font-medium",children:"Search Activity Log"}),e.jsx(b,{id:"search",placeholder:"Search by PDL name, cell names, or personnel...",className:"w-64",value:i,onChange:a=>p(a.target.value),onKeyDown:a=>a.key==="Enter"&&m()}),e.jsx(l,{variant:"outline",onClick:m,children:"Search"})]}),e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Showing ",o.length," of ",f.total," transfer records",r&&` for ${r.cell_name}`]}),e.jsx(v,{columns:S,data:o})]})]})]})]})}export{G as default};
