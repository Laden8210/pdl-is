import{j as e,r as v,K as N,m as C,L as f,S as h}from"./app-JQtfCfPg.js";import{A as D}from"./app-layout-B0Gn0MXC.js";import{D as w}from"./data-table-BoSbwB-Y.js";import{B as d}from"./button-CXdwo3Li.js";import{I as l}from"./index-DIWcNEBr.js";import{L as i}from"./label-Cd_WsVtp.js";import{D as A,a as F,E as S,b as M,c as U,d as x}from"./dropdown-menu-Dc9g_-J4.js";import{A as j,a as p,b as g}from"./index-Bjwsctg9.js";import{D as K,a as L,b as k,c as q,d as E,e as I,f as T,g as z}from"./dialog-BLZS4Ddd.js";import"./table-CTxSrCGh.js";import"./index-CLeTPx6t.js";import"./index-DSP_IlQ9.js";function _({page:r,totalPages:t,onPageChange:c}){if(t<=1)return null;const n=Array.from({length:t},(a,o)=>o+1);return e.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 mt-4",children:[e.jsx(d,{variant:"outline",size:"sm",onClick:()=>c(r-1),disabled:r===1,children:"Previous"}),n.map(a=>e.jsx(d,{variant:a===r?"default":"outline",size:"sm",onClick:()=>c(a),children:a},a)),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>c(r+1),disabled:r===t,children:"Next"})]})}const O=[{accessorKey:"fname",header:"First Name"},{accessorKey:"mname",header:"Middle Name",cell:({row:r})=>r.getValue("mname")||e.jsx("span",{className:"text-muted-foreground",children:"N/A"})},{accessorKey:"lname",header:"Last Name"},{accessorKey:"contactnum",header:"Contact No."},{accessorKey:"avatar",header:"Avatar",cell:({row:r})=>{const t=r.getValue("avatar");return t?e.jsx("img",{src:`/storage/${t}`,alt:"Avatar",className:"h-8 w-8 rounded-full object-cover"}):e.jsx("span",{className:"text-muted-foreground",children:"N/A"})}},{accessorKey:"username",header:"Username"},{accessorKey:"position",header:"Position"},{accessorKey:"agency",header:"Agency"},{id:"actions",header:"Actions",cell:({row:r})=>{const t=r.original.id;return e.jsxs(A,{children:[e.jsx(F,{asChild:!0,children:e.jsxs(d,{variant:"ghost",size:"icon",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(S,{className:"h-4 w-4"})]})}),e.jsxs(M,{align:"end",children:[e.jsx(U,{children:"Actions"}),e.jsx(x,{onClick:()=>console.log("Edit",t),children:"Edit"}),e.jsx(x,{onClick:()=>console.log("Delete",t),children:"Delete"})]})]})}}];function P(){const r=v.useRef(null),{props:t}=N(),c=t.success,{data:n,setData:a,post:o,processing:b,errors:u}=C({firstName:"",middleName:"",lastName:"",contactNumber:"",avatar:null,username:"",password:"",position:"",agency:""}),y=s=>{s.preventDefault(),o(route("user-management.store"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{}})};return e.jsxs(K,{children:[e.jsx(f,{title:"Create User"}),e.jsx(L,{asChild:!0,children:e.jsx(d,{variant:"outline",children:"Add User"})}),e.jsx(k,{className:"sm:max-w-3xl",children:e.jsxs("form",{id:"create-user-form",onSubmit:y,children:[e.jsxs(q,{children:[e.jsx(E,{children:"Create User"}),e.jsx(I,{children:"Fill in the details to create a new user."})]}),Object.keys(u).length>0&&e.jsxs(j,{variant:"destructive",className:"mb-4 mt-4",children:[e.jsx(p,{children:"Unable to process request"}),e.jsx(g,{children:Object.values(u).map((s,m)=>e.jsx("ul",{className:"list-inside list-disc text-sm",children:e.jsx("li",{children:s})},m))})]}),c&&e.jsxs(j,{variant:"default",className:"mb-4",children:[e.jsx(p,{children:"Success"}),e.jsx(g,{children:c})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 py-2",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx(i,{htmlFor:"firstName",children:"First Name"}),e.jsx(l,{id:"firstName",name:"firstName",value:n.firstName,onChange:s=>a("firstName",s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"middleName",children:"Middle Name"}),e.jsx(l,{id:"middleName",name:"middleName",value:n.middleName,onChange:s=>a("middleName",s.target.value)})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(i,{htmlFor:"lastName",children:"Last Name"}),e.jsx(l,{id:"lastName",name:"lastName",value:n.lastName,onChange:s=>a("lastName",s.target.value),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(i,{htmlFor:"contactNumber",children:"Contact Number"}),e.jsx(l,{id:"contactNumber",name:"contactNumber",value:n.contactNumber,onChange:s=>a("contactNumber",s.target.value),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(i,{htmlFor:"avatar",children:"Avatar"}),e.jsx(l,{id:"avatar",name:"avatar",type:"file",ref:r,onChange:s=>{var m;return a("avatar",((m=s.target.files)==null?void 0:m[0])??null)},accept:"image/*"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(i,{htmlFor:"username",children:"Username"}),e.jsx(l,{id:"username",name:"username",value:n.username,onChange:s=>a("username",s.target.value),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(i,{htmlFor:"password",children:"Password"}),e.jsx(l,{id:"password",name:"password",type:"password",value:n.password,onChange:s=>a("password",s.target.value),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(i,{htmlFor:"position",children:"Position"}),e.jsx(l,{id:"position",name:"position",value:n.position,onChange:s=>a("position",s.target.value),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(i,{htmlFor:"agency",children:"Agency"}),e.jsx(l,{id:"agency",name:"agency",value:n.agency,onChange:s=>a("agency",s.target.value),required:!0})]})]}),e.jsxs(T,{children:[e.jsx(z,{asChild:!0,children:e.jsx(d,{variant:"secondary",children:"Cancel"})}),e.jsx(d,{type:"submit",form:"create-user-form",className:"bg-blue-500 hover:bg-blue-600",disabled:b,children:"Create User"})]})]})})]})}const R=[{title:"Dashboard",href:"/dashboard"}];function se(){const{users:r,filters:t}=N().props,[c,n]=v.useState(t.search||""),a=()=>{h.get("/admin/user-management",{search:c},{preserveState:!0})};return e.jsxs(D,{breadcrumbs:R,children:[e.jsx(f,{title:"User Management"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your users and their permissions."})]}),e.jsx(P,{})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(i,{htmlFor:"search",className:"text-sm font-medium",children:"Search Users"}),e.jsx(l,{id:"search",placeholder:"Search by name or username",className:"w-64",value:c,onChange:o=>n(o.target.value),onKeyDown:o=>o.key==="Enter"&&a()}),e.jsx(d,{variant:"outline",onClick:a,children:"Search"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(w,{columns:O,data:r.data}),e.jsx(_,{page:r.current_page,totalPages:r.last_page,onPageChange:o=>h.get("/admin/user-management",{search:t.search,page:o},{preserveState:!0})})]})]})]})}export{se as default};
