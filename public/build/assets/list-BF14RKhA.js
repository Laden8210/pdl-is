import{K as ae,r as d,m as k,j as e,L as ne}from"./app-bV5rmUq0.js";import{A as ie,D as _,a as T,b as L,c as R,d as S}from"./app-layout-BOEMzn-o.js";import{T as le,a as te,b as I,c as H}from"./tabs-Db_FhYI5.js";import{T as B,a as U,b as h,c as n,d as V,e as a}from"./table-OVJCMi64.js";import{B as m}from"./badge-CjeV36O2.js";import{C as ce,a as de,b as oe,c as he}from"./card-ddPS0xap.js";import{c as xe,B as l}from"./button-FpHCtBEj.js";import{I as me}from"./input-HNXWlf2F.js";import{A as z,a as $}from"./alert-B0JrO9qt.js";import{S as je,F as ve}from"./users-BJq_umgB.js";import{f as o}from"./format-B3rlCQGj.js";import{E as ue}from"./eye-DrwJXlWy.js";import"./index-Dx3vTjSQ.js";import"./user-CnlA_BFo.js";import"./scale-DyS0YXTY.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]],j=xe("ArchiveRestore",ge),Ne=[{title:"Dashboard",href:"/dashboard"},{title:"Archives",href:"/archives"}];function Ee({archivedUsers:P,userRole:F}){const{props:Y}=ae(),{flash:v,errors:u}=Y,[r,q]=d.useState(null),[W,p]=d.useState(!1),[G,g]=d.useState(!1),[t,y]=d.useState(null),[K,N]=d.useState(!1),[c,w]=d.useState(null),[i,Q]=d.useState(""),{post:J,processing:x}=k(),{post:X,processing:f}=k(),O=s=>{y(s),g(!0)},Z=()=>{t&&J(route("user-pdl-archive.unarchive",t.id),{onSuccess:()=>{g(!1),y(null)},onError:s=>{console.error("Unarchive errors:",s)}})},ee=s=>{q(s),p(!0)},se=s=>{w(s),N(!0)},re=()=>{c&&X(route("user-personnel-archive.restore",c.id),{onSuccess:()=>{N(!1),w(null)},onError:s=>{console.error("Restore personnel errors:",s)}})},C=P.pdls.filter(s=>{var b,M;return s.fname.toLowerCase().includes(i.toLowerCase())||s.lname.toLowerCase().includes(i.toLowerCase())||((b=s.alias)==null?void 0:b.toLowerCase().includes(i.toLowerCase()))||s.archive_status.toLowerCase().includes(i.toLowerCase())||((M=s.archive_case_number)==null?void 0:M.toLowerCase().includes(i.toLowerCase()))}),D=P.personnel.filter(s=>s.name.toLowerCase().includes(i.toLowerCase())||s.username.toLowerCase().includes(i.toLowerCase())||s.position.toLowerCase().includes(i.toLowerCase())||s.agency.toLowerCase().includes(i.toLowerCase())),E=s=>({RELEASE:"Release Order",BAIL:"Bail Order",SERVED_SENTENCE:"Served Sentence",PROBATION:"Probation Order",PAROLE:"Parole Order",TRANSFER:"Transfer Order",OTHER:"Other Court Order"})[s]||s,A=s=>({BONDED:"bg-green-100 text-green-800",SERVED_SENTENCE:"bg-blue-100 text-blue-800",PROV_DISMISSED:"bg-yellow-100 text-yellow-800",DISMISSED:"bg-gray-100 text-gray-800",TRANSFER_TO_OTHER_FACILITY:"bg-purple-100 text-purple-800",DAPECOL:"bg-orange-100 text-orange-800",PROBATION:"bg-indigo-100 text-indigo-800",DECEASED:"bg-red-100 text-red-800",ACQUITTED:"bg-green-100 text-green-800"})[s]||"bg-gray-100 text-gray-800";return e.jsxs(ie,{breadcrumbs:Ne,children:[e.jsx(ne,{title:"Archived Users"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[(v==null?void 0:v.success)&&e.jsx(z,{className:"border-green-200 bg-green-50",children:e.jsx($,{className:"text-green-800",children:v.success})}),(u==null?void 0:u.error)&&e.jsx(z,{className:"border-red-200 bg-red-50",children:e.jsx($,{className:"text-red-800",children:u.error})}),e.jsxs("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Archived Users Management"}),e.jsx("p",{className:"text-muted-foreground",children:"View and manage all archived PDLs and Personnel records"})]}),e.jsx("div",{className:"flex gap-2"})]}),e.jsxs(ce,{children:[e.jsx(de,{className:"border-b p-4",children:e.jsxs("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[e.jsx(oe,{className:"text-lg",children:"Archived Records"}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(je,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(me,{placeholder:"Search archives...",className:"pl-9",value:i,onChange:s=>Q(s.target.value)})]})]})}),e.jsx(he,{className:"p-0",children:e.jsxs(le,{defaultValue:"pdls",className:"w-full",children:[e.jsxs(te,{className:"w-full justify-start rounded-none border-b bg-transparent p-0",children:[e.jsxs(I,{value:"pdls",className:"relative h-12 rounded-none border-b-2 border-b-transparent data-[state=active]:border-b-primary data-[state=active]:bg-background data-[state=active]:shadow-none",children:["PDLs",e.jsx(m,{variant:"secondary",className:"ml-2",children:C.length})]}),F==="admin"&&e.jsxs(I,{value:"personnel",className:"relative h-12 rounded-none border-b-2 border-b-transparent data-[state=active]:border-b-primary data-[state=active]:bg-background data-[state=active]:shadow-none",children:["Personnel",e.jsx(m,{variant:"secondary",className:"ml-2",children:D.length})]})]}),e.jsx(H,{value:"pdls",className:"m-0",children:e.jsx("div",{className:"rounded-b-lg",children:e.jsxs(B,{children:[e.jsx(U,{children:e.jsxs(h,{children:[e.jsx(n,{className:"w-[100px]",children:"ID"}),e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Archive Status"}),e.jsx(n,{children:"Court Order Type"}),e.jsx(n,{children:"Case Number"}),e.jsx(n,{children:"Archived At"}),e.jsx(n,{className:"text-right",children:"Actions"})]})}),e.jsx(V,{children:C.length>0?C.map(s=>e.jsxs(h,{className:"hover:bg-muted/50",children:[e.jsx(a,{className:"font-medium",children:s.id}),e.jsxs(a,{children:[e.jsxs("div",{className:"font-medium",children:[s.fname," ",s.lname]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.alias&&`Alias: ${s.alias}`,s.age&&` • Age: ${s.age}`,s.gender&&` • ${s.gender}`]})]}),e.jsx(a,{children:e.jsx(m,{className:A(s.archive_status),children:s.archive_status})}),e.jsx(a,{children:e.jsx("div",{className:"text-sm",children:E(s.archive_court_order_type)})}),e.jsx(a,{children:e.jsx("div",{className:"text-sm font-mono",children:s.archive_case_number})}),e.jsx(a,{children:o(new Date(s.archived_at),"MMM dd, yyyy HH:mm")}),e.jsx(a,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs(l,{variant:"ghost",size:"sm",className:"h-8",onClick:()=>ee(s),children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),"View"]}),e.jsxs(l,{variant:"ghost",size:"sm",className:"h-8",onClick:()=>O(s),disabled:x,children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Restore"]})]})})]},`pdl-${s.id}`)):e.jsx(h,{children:e.jsx(a,{colSpan:7,className:"h-24 text-center",children:e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 h-12 w-12 rounded-full bg-muted flex items-center justify-center",children:e.jsx(j,{className:"h-6 w-6 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No archived PDLs found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"All PDL records are currently active"})]})})})})]})})}),e.jsx(H,{value:"personnel",className:"m-0",children:e.jsx("div",{className:"rounded-b-lg",children:e.jsxs(B,{children:[e.jsx(U,{children:e.jsxs(h,{children:[e.jsx(n,{className:"w-[100px]",children:"ID"}),e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Username"}),e.jsx(n,{children:"Position"}),e.jsx(n,{children:"Agency"}),e.jsx(n,{children:"Archived At"}),e.jsx(n,{className:"text-right",children:"Actions"})]})}),e.jsx(V,{children:D.length>0?D.map(s=>e.jsxs(h,{className:"hover:bg-muted/50",children:[e.jsx(a,{className:"font-medium",children:s.id}),e.jsxs(a,{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.type})]}),e.jsx(a,{children:s.username}),e.jsx(a,{children:s.position}),e.jsx(a,{children:s.agency}),e.jsx(a,{children:o(new Date(s.deleted_at),"MMM dd, yyyy HH:mm")}),e.jsx(a,{className:"text-right",children:e.jsxs(l,{variant:"ghost",size:"sm",className:"h-8",onClick:()=>se(s),disabled:f,children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Restore"]})})]},`personnel-${s.id}`)):e.jsx(h,{children:e.jsx(a,{colSpan:7,className:"h-24 text-center",children:e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 h-12 w-12 rounded-full bg-muted flex items-center justify-center",children:e.jsx(j,{className:"h-6 w-6 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No archived personnel found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"All personnel records are currently active"})]})})})})]})})})]})})]}),e.jsx(_,{open:W,onOpenChange:p,children:e.jsxs(T,{className:"max-w-4xl",children:[e.jsxs(L,{children:[e.jsxs(R,{children:["Archive Details - ",r==null?void 0:r.fname," ",r==null?void 0:r.lname]}),e.jsx(S,{children:"Complete archive information and court order documentation"})]}),r&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Basic Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"ID:"})," ",r.id]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",r.fname," ",r.lname]}),r.alias&&e.jsxs("div",{children:[e.jsx("strong",{children:"Alias:"})," ",r.alias]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Age:"})," ",r.age]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Gender:"})," ",r.gender]}),r.birthdate&&e.jsxs("div",{children:[e.jsx("strong",{children:"Birthdate:"})," ",o(new Date(r.birthdate),"MMM dd, yyyy")]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Archive Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Archive Status:"}),e.jsx(m,{className:`ml-2 ${A(r.archive_status)}`,children:r.archive_status})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Archive Reason:"})," ",r.archive_reason]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Archived At:"})," ",o(new Date(r.archived_at),"MMM dd, yyyy HH:mm")]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Court Order Documentation"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Court Order Type:"})," ",E(r.archive_court_order_type)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Case Number:"})," ",e.jsx("span",{className:"font-mono",children:r.archive_case_number})]}),r.archive_court_order_date&&e.jsxs("div",{children:[e.jsx("strong",{children:"Court Order Date:"})," ",o(new Date(r.archive_court_order_date),"MMM dd, yyyy HH:mm")]})]}),e.jsx("div",{className:"space-y-2",children:r.archive_court_order_file&&e.jsxs("div",{children:[e.jsx("strong",{children:"Court Order Document:"}),e.jsx("div",{className:"mt-2",children:e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>window.open(`/storage/${r.archive_court_order_file}`,"_blank"),children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),"View Document"]})})]})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[e.jsx(l,{variant:"outline",onClick:()=>p(!1),children:"Close"}),e.jsxs(l,{onClick:()=>O(r),disabled:x,children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Unarchive PDL"]})]})]})]})}),e.jsx(_,{open:G,onOpenChange:g,children:e.jsxs(T,{className:"max-w-md",children:[e.jsxs(L,{children:[e.jsx(R,{children:"Confirm Unarchive"}),e.jsx(S,{children:"Are you sure you want to unarchive this PDL record?"})]}),t&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"PDL Information"}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",t.fname," ",t.lname]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ID:"})," ",t.id]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Archive Status:"}),e.jsx(m,{className:`ml-2 ${A(t.archive_status)}`,children:t.archive_status})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Archived At:"})," ",o(new Date(t.archived_at),"MMM dd, yyyy HH:mm")]})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-md",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning"}),e.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:e.jsx("p",{children:"This action will restore the PDL record to active status and remove all archive information. The PDL will appear in the main list again."})})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(l,{variant:"outline",onClick:()=>{g(!1),y(null)},disabled:x,children:"Cancel"}),e.jsx(l,{onClick:Z,disabled:x,className:"bg-red-600 hover:bg-red-700",children:x?"Unarchiving...":"Yes, Unarchive PDL"})]})]})]})}),e.jsx(_,{open:K,onOpenChange:N,children:e.jsxs(T,{className:"max-w-md",children:[e.jsxs(L,{children:[e.jsx(R,{children:"Confirm Restore Personnel"}),e.jsx(S,{children:"Are you sure you want to restore this personnel record?"})]}),c&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Personnel Information"}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",c.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ID:"})," ",c.id]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Username:"})," ",c.username]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Position:"})," ",c.position]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Agency:"})," ",c.agency]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Archived At:"})," ",o(new Date(c.deleted_at),"MMM dd, yyyy HH:mm")]})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-md",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning"}),e.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:e.jsx("p",{children:"This action will restore the personnel record to active status. The personnel will be able to log in again and access the system."})})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(l,{variant:"outline",onClick:()=>{N(!1),w(null)},disabled:f,children:"Cancel"}),e.jsx(l,{onClick:re,disabled:f,className:"bg-green-600 hover:bg-green-700",children:f?"Restoring...":"Yes, Restore Personnel"})]})]})]})})]})]})}export{Ee as default};
