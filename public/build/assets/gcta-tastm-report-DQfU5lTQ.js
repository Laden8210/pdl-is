import{K as S,r as _,m as R,j as e,L as F}from"./app-Cx-danzQ.js";import{B as C}from"./button-CAgaPBYD.js";import{C as T,a as y,b as A,c as D}from"./card-CvKGQzfu.js";import{I as M}from"./input-D_CaxQiH.js";import{L as $}from"./label-BgTO8H6g.js";import{T as I,a as Y,b as j,c as a,d as B,e as t}from"./table-DAW4g9x9.js";import{A as G}from"./app-layout-C5i3BOfi.js";import{t as L,n as w,f as k}from"./format-B3rlCQGj.js";import"./index-BNotibd1.js";import"./users-P0Q0QaBj.js";import"./user-C3is8C32.js";import"./scale-DJ-YqURN.js";import"./eye-BcM4rPrd.js";function N(n,i){const r=+L(n)-+L(i);return r<0?-1:r>0?1:r}function E(n,i,r){const[c,d]=w(r==null?void 0:r.in,n,i);return c.getFullYear()-d.getFullYear()}function H(n,i,r){const[c,d]=w(r==null?void 0:r.in,n,i),o=N(c,d),h=Math.abs(E(c,d));c.setFullYear(1584),d.setFullYear(1584);const p=N(c,d)===-o,m=o*(h-+p);return m===0?0:m}const P=[{title:"Reports",href:"/reports"},{title:"List of PDL",href:"/reports/pdl-list"}];function z(n){return H(new Date,new Date(n))}function re(){const{props:n}=S(),{verifications:i}=n,[r,c]=_.useState(""),{data:d,get:o}=R({start_date:"",end_date:""}),h=i.filter(s=>{var u,f,b,g;if(!r)return!0;const l=s.pdl;if(!l)return!1;const x=r.toLowerCase();return((u=l.fname)==null?void 0:u.toLowerCase().includes(x))||((f=l.lname)==null?void 0:f.toLowerCase().includes(x))||((b=l.alias)==null?void 0:b.toLowerCase().includes(x))||`${l.fname} ${l.lname}`.toLowerCase().includes(x)||((g=l.id)==null?void 0:g.toString().includes(r))}),p=s=>{const l=new URLSearchParams;s&&l.append("verification_id",s.toString()),window.open(route("reports.gcta-tastm.export")+"?"+l.toString(),"_blank")},m=()=>{o(route("reports.gcta-tastm",{start_date:d.start_date,end_date:d.end_date}))};return e.jsxs(G,{breadcrumbs:P,children:[e.jsx(F,{title:"List of PDL Reports"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold",children:"List of GCTA and TASTM Reports"})}),e.jsxs(T,{children:[e.jsx(y,{children:e.jsx(A,{children:"Filter Reports"})}),e.jsx(D,{children:e.jsxs("div",{className:"mb-4 grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx($,{htmlFor:"search",children:"Search"}),e.jsx(M,{id:"search",type:"text",placeholder:"Search by name or ID...",value:r,onChange:s=>c(s.target.value)})]}),e.jsx("div",{className:"flex items-end gap-2 md:col-span-2",children:e.jsx(C,{onClick:m,className:"bg-blue-500 hover:bg-blue-600",children:"Apply Filter"})})]})})]}),e.jsxs(T,{children:[e.jsx(y,{children:e.jsx(A,{className:"text-center",children:e.jsx("div",{className:"flex items-center justify-center gap-4 mb-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold",children:"GCTA & TASTM Reports"}),e.jsx("div",{className:"text-sm text-gray-600",children:"South Cotabato Rehabilitation and Detention Center"})]})})})}),e.jsx(D,{children:e.jsxs(I,{children:[e.jsx(Y,{children:e.jsxs(j,{children:[e.jsx(a,{children:"ID"}),e.jsx(a,{children:"Full Name"}),e.jsx(a,{children:"Alias"}),e.jsx(a,{children:"Gender"}),e.jsx(a,{children:"GCTA Days"}),e.jsx(a,{children:"TASTM Days"}),e.jsx(a,{children:"Date of Birth"}),e.jsx(a,{children:"Age"}),e.jsx(a,{children:"Address"}),e.jsx(a,{children:"Added By"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(B,{children:h.length>0?h.map(s=>s.pdl&&e.jsxs(j,{children:[e.jsx(t,{children:s.pdl.id}),e.jsx(t,{children:`${s.pdl.fname} ${s.pdl.lname}`}),e.jsx(t,{children:s.pdl.alias??"-"}),e.jsx(t,{children:s.pdl.gender??"-"}),e.jsx(t,{className:"font-medium",children:s.gcta_days}),e.jsx(t,{className:"font-medium",children:s.tastm_days}),e.jsx(t,{children:k(new Date(s.pdl.birthdate),"MMMM dd, yyyy")}),e.jsx(t,{children:z(s.pdl.birthdate)}),e.jsx(t,{children:`${s.pdl.brgy??""}, ${s.pdl.city??""}, ${s.pdl.province??""}`}),e.jsx(t,{children:s.pdl.personnel?`${s.pdl.personnel.fname} ${s.pdl.personnel.lname}`:"â€”"}),e.jsx(t,{className:"space-x-1",children:e.jsx(C,{size:"sm",variant:"outline",onClick:()=>p(s.verification_id),children:"View"})})]},s.pdl.id)):e.jsx(j,{children:e.jsx(t,{colSpan:11,className:"py-4 text-center",children:"No records found"})})})]})})]})]})]})}export{re as default};
